webpackJsonp([4,40,81],{"/KGh":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),i=a.n(o),n=a("Wxq9"),s={data:function(){return{indexOBJ:0,pca:{province:"",city:"",area:""},regionData:n.regionData,industrySelectionList:[],adoptApproved:{currentPage:1,perPageSize:10,total:0,tableMsg:[{key:"mbmi_mer_name",name:"商户名称"},{key:"bii_name",name:"所属行业"}],tableData:[]},ruleForm:{loc:"",bmi_mer_name:"",bmi_mer_alias:"",bms_license_code:"",bmi_industry_id:"",bms_work_t1:"",bms_work_t2:"",bms_address:"",mbmi_mid:"",bmi_login_id:"",bmi_password:"123456",selectedOptions:[]},rules:{bmi_mer_name:[{pattern:/^[\u4E00-\u9FA5A-Za-z0-9]*$/,message:"商户名称不可输入空格、特殊符号",trigger:"blur"},{required:!0,message:"请输入商户名称",trigger:"blur"}],bmi_login_id:[{pattern:/^[0-9]{11}$/,message:"请输入手机号码",trigger:"blur"},{required:!0,message:"请输入商户登录名",trigger:"blur"},{min:11,max:11,message:"长度在 11 个字符",trigger:"blur"}],bmi_password:[{required:!0,message:"请输入商户初始密码",trigger:"blur"},{min:6,max:18,message:"长度在 6到18 个字符",trigger:"blur"}],bmi_mer_alias:[{pattern:/^[\u4E00-\u9FA5A-Za-z0-9]*$/,message:"商户简称不可输入空格、特殊符号",trigger:"blur"},{required:!0,message:"请输入商户简称",trigger:"blur"}],bms_license_code:[{pattern:/^[A-Za-z0-9]{18}$/,message:"请输入统一社会信用编码（18位）",trigger:"blur"},{required:!0,message:"请输入社会信用编码",trigger:"blur"}],bms_address:[{required:!0,message:"请输入详细地址",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],mbmi_mid:[{pattern:/^[A-Za-z0-9]{15}$/,message:"请输入银联子商户号（15位）",trigger:"blur"},{required:!0,message:"请输入银联子商户号",trigger:"blur"}],bms_work_t1:[{required:!0,message:"请选择开始营业时间",trigger:"change"}],bms_work_t2:[{required:!0,message:"请选择结束营业时间",trigger:"change"}],bmi_industry_id:[{required:!0,message:"请选择商户行业",trigger:"change"}],selectedOptions:[{type:"array",required:!0,message:"请选择所在地区",trigger:"change"}]},tableMsg:[{key:"date",name:"商户名称"},{key:"date",name:"所属行业"},{key:"date",name:"满减券推广"},{key:"date",name:"抽奖优惠券"},{key:"date",name:"商品推广"},{key:"date",name:"代金券推广"}],functionMsg:{name:"xxxxx",dialogVisible:!1,msg:[{radio:"1",name:"满减券推广"},{radio:"1",name:"商品推广"}]},serviceChargeMsg:{name:"xxxxxx",accountNumber:"xxxxxx",dialogVisible:!1,obj:[],msg:[{name:"设备",key:"di_describe"},{name:"网点内设备编号",key:"doi_active_id"}]},merchantInformation:{dataMsg:{},obj:[],name:"xxxxxx",accountNumber:"xxxxxx",dialogVisible:!1,value:"",value1:[],msg:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}]},franchiseOutlets:{currentPage:1,perPageSize:10,total:0,name:"xxxxxx",dialogVisible:!1,obj:{},setData:[],msg:[{name:"所属行系",key:"center_name"},{name:"所属一级分行",key:"province_name"},{name:"所属二级分行",key:"city_name"},{name:"所属一级支行",key:"county_name"},{name:"机构名称",key:"station_name"}]},newlyAdded:{name:"xxxxxx",accountNumber:"xxxxxx",dialogVisible:!1,value:"",value1:[],msg:[{radio:"2",name:"满减券推广"},{radio:"2",name:"商品推广"}],options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}]},headerStyle:{background:"#4B86BC",color:"#ffffff",borderRight:"1px solid #E3E5EB",padding:"0px",height:"45px","line-height":"45px"},addQueryList:[],currentCompanyId:"",mid:"",tableData:[{index:1,date:"2016-05-02",name:"王小虎",province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333}]}},created:function(){console.log(this.customGlobal.userInfoExt,"***********************************"),this.Select_industry(),this.getData(),this.bank_commodity()},watch:{"newlyAdded.dialogVisible":function(e){e&&this.addQueryClick("",this.addQueryList)}},methods:{getData:function(){var e=this,t=this,a={currentPage:this.adoptApproved.currentPage,perPageSize:this.adoptApproved.perPageSize,manager_status:1,obj_bank_center_id:this.customGlobal.userInfoExt.cui_bank_center_id,obj_province_id:this.customGlobal.userInfoExt.cui_province_id,obj_city_id:this.customGlobal.userInfoExt.cui_city_id,obj_county_id:this.customGlobal.userInfoExt.cui_county_id,obj_station_id:this.customGlobal.userInfoExt.cui_station_id},o=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.merchant_examination_passed_query,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(a)})).then(function(a){if(console.log("异步调用成功返回:"+i()(a)),"success"==a.data.status){if(o.close(),t.adoptApproved.tableData=a.data.rows,0==t.adoptApproved.tableData.length)return;console.log(a.data.rows[0].bank_mer_permissions,"-***********************************"),a.data.rows.forEach(function(e,a){t.adoptApproved.tableData[a].bank_mer_permissions=e.bank_mer_permissions.map(function(e){return e.bma_permissions_type})}),console.log(t.adoptApproved.tableData,"--------------**********************"),t.adoptApproved.total=a.data.total}else t.adoptApproved.tableData=[],console.info("商户查询失败"),o.close(),"请登录认证"===a.data.msg&&e.$router.push({path:"/login"})},function(a){console.log("---------------------------4"),console.log("异步调用出错:"+i()(a)),o.close(),t.adoptApproved.tableData=[],e.$alert(i()(a.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(a){console.log("---------------------------3"),console.log("异步调用失败返回:"+i()(a)),o.close(),t.adoptApproved.tableData=[],e.$alert(i()(a.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},functionClick:function(){var e=this,t=this.functionMsg.msg.filter(function(e){return 1==e.radio});console.log(t);var a=this,o=t.map(function(t){return{bma_sign_flag:"1",bma_permissions_type:"满减券推广"==t.name?1:"商品推广"==t.name?2:3,bma_bank_center_id:e.customGlobal.userInfoExt.cui_bank_center_id,bma_province_id:e.customGlobal.userInfoExt.cui_province_id,bma_city_id:e.customGlobal.userInfoExt.cui_city_id,bma_county_id:e.customGlobal.userInfoExt.cui_county_id,bma_station_id:e.customGlobal.userInfoExt.cui_station_id}}),n={bma_sign_flag:"1",bma_mer_uuid:this.functionMsg.obj.mbmi_uuid,permissions:o},s=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postManagerMerchant_examination_passed_function_open_update,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(n)})).then(function(t){console.log("异步调用成功返回:"+i()(t)),"success"==t.data.status?(a.getData(),e.functionMsg.dialogVisible=!1,s.close()):(console.info("商户查询失败"),s.close(),a.getData(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){console.log("异步调用出错:"+i()(t)),s.close(),a.getData(),e.$alert(i()(t.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("---------------------------3"),console.log("异步调用失败返回:"+i()(t)),s.close(),a.getData(),e.$alert(i()(t.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},inputChange:function(e,t){e[t]=e[t].replace(/[^\d.]/g,""),e[t]=e[t].replace(/\.{2,}/g,"."),e[t]=e[t].replace(".","$#$").replace(/\./g,"").replace("$#$","."),e[t]=e[t].replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e[t].indexOf(".")<0&&""!=e[t]&&(e[t]=parseFloat(e[t]),e[t]=e[t]+"",e[t].length>2&&(e[t]=e[t].slice(0,2)))},queryEquipment:function(){var e=this,t={currentPage:10,perPageSize:5,obj_bank_center_id:this.customGlobal.userInfoExt.cui_bank_center_id,obj_province_id:this.customGlobal.userInfoExt.cui_province_id,obj_city_id:this.customGlobal.userInfoExt.cui_city_id,obj_county_id:this.customGlobal.userInfoExt.cui_county_id,obj_station_id:this.customGlobal.userInfoExt.cui_station_id},a=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.Device_unique_ID_select,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(t)})).then(function(t){console.log("异步调用成功返回:"+i()(t)),"success"==t.data.status?a.close():(console.info("商户查询失败"),a.close(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){console.log("---------------------------4"),console.log("异步调用出错:"+i()(t)),a.close(),e.$alert(i()(t.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("---------------------------3"),console.log("异步调用失败返回:"+i()(t)),a.close(),e.$alert(i()(t.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},bank_commodity:function(){var e=this,t=this,a={companyId:this.customGlobal.userInfoExt.cui_station_id},o=this.$loading({lock:!0,text:"",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.bank_transcoding,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(a)})).then(function(a){"success"==a.data.status?(o.close(),t.currentCompanyId=a.data.currentCompanyId):(console.info("转码失败"),o.close(),"请登录认证"===a.data.msg&&e.$router.push({path:"/login"}))},function(t){o.close(),e.$alert(i()(t.message),"转码出错!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("异步调用失败返回:"+i()(t)),o.close(),e.$alert(i()(t.message),"转码出错",{confirmButtonText:"确定",callback:function(e){}})})},queryClick:function(e,t,a){var o=this,n={method:"1_1",detail:t.map(function(t){return{bank_company_alias_id:o.currentCompanyId,device_uuid:t.di_uuid,mer_uuid:e}})},s=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postBank13CompanyIdAndDeviceUnionConfig,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(n)})).then(function(e){console.log("异步调用成功返回:"+i()(e)),"success"==e.data.status?(e.data.detail.forEach(function(e){o.addQueryList.forEach(function(t,a){if(JSON.parse(e).device_uuid==t.di_uuid){var o=JSON.parse(e).bank_fee?JSON.parse(e).bank_fee:t.bank_fee,i=JSON.parse(e).other1_fee?JSON.parse(e).other1_fee:t.mbmp_fee;t.bank_fee=o,t.mbmp_fee=i}})}),console.log(o.addQueryList[0].mbmp_fee,"打印为旧结果"),o.postBank13CompanyIdUnionClick(),s.close()):(console.info("商户查询失败"),s.close(),"请登录认证"===e.data.msg&&o.$router.push({path:"/login"}))},function(e){console.log("---------------------------4"),console.log("异步调用出错:"+i()(e)),s.close(),o.$alert(i()(e.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log("---------------------------3"),console.log("异步调用失败返回:"+i()(e)),s.close(),o.$alert(i()(e.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},postBank13CompanyIdUnionClick:function(){var e=this,t={method:"1",bank_company_alias_id:this.currentCompanyId},a=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postBank13CompanyIdUnionConfig,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(t)})).then(function(t){console.log("异步调用成功返回:"+i()(t)),"success"==t.data.status?(console.log(JSON.parse(t.data.msg)),e.mid=JSON.parse(t.data.msg).mid,a.close()):(console.info("商户查询失败"),a.close(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){console.log("---------------------------4"),console.log("异步调用出错:"+i()(t)),a.close(),e.$alert(i()(t.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("---------------------------3"),console.log("异步调用失败返回:"+i()(t)),a.close(),e.$alert(i()(t.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},queryInformationClick:function(){var e=this,t={mbmi_uuid:this.merchantInformation.obj.mbmi_uuid,bms_bank_center_id:this.customGlobal.userInfoExt.cui_bank_center_id,bms_province_id:this.customGlobal.userInfoExt.cui_province_id,bms_city_id:this.customGlobal.userInfoExt.cui_city_id,bms_county_id:this.customGlobal.userInfoExt.cui_county_id,bms_station_id:this.customGlobal.userInfoExt.cui_station_id},a=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postManagerMerchant_query,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(t)})).then(function(t){console.log("异步调用成功返回:"+i()(t)),"success"==t.data.status?(e.merchantInformation.dataMsg=t.data.rows[0]?t.data.rows[0]:{},console.log(e.merchantInformation.dataMsg.bms_work_d_name,"-=-=-="),a.close()):(console.info("商户查询失败"),a.close(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){console.log("---------------------------4"),console.log("异步调用出错:"+i()(t)),a.close(),e.$alert(i()(t.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("---------------------------3"),console.log("异步调用失败返回:"+i()(t)),a.close(),e.$alert(i()(t.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},Select_industry:function(){var e=this,t=this,a=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.Bank_industry_select,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()({perPageSize:"1000",currentPage:"1"})})).then(function(o){console.log("异步调用成功返回:"+i()(o)),"success"==o.data.status?(t.industrySelectionList=o.data.rows,a.close()):(t.industrySelectionList=[],console.info("商户查询失败"),a.close(),"请登录认证"===o.data.msg&&e.$router.push({path:"/login"}))},function(o){console.log("异步调用出错:"+i()(o)),a.close(),t.industrySelectionList=[],e.$alert(i()(o.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(o){console.log("异步调用失败返回:"+i()(o)),a.close(),t.industrySelectionList=[],e.$alert(i()(o.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},addQueryClick:function(e){var t=this;console.log("res==",e,"---------------------------------------------------------");var a=this,o={obj_bank_center_id:this.customGlobal.userInfoExt.cui_bank_center_id,obj_province_id:this.customGlobal.userInfoExt.cui_province_id,obj_city_id:this.customGlobal.userInfoExt.cui_city_id,obj_county_id:this.customGlobal.userInfoExt.cui_county_id,obj_station_id:this.customGlobal.userInfoExt.cui_station_id},n=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.each_device_rate_query,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(o)})).then(function(o){console.log("异步调用成功返回:"+i()(o)),"success"==o.data.status?(a.addQueryList=o.data.rows,t.queryClick(e,a.addQueryList),n.close()):(a.addQueryList=[],console.info("商户查询失败"),n.close(),"请登录认证"===o.data.msg&&t.$router.push({path:"/login"}))},function(e){console.log("异步调用出错:"+i()(e)),n.close(),a.addQueryList=[],t.$alert(i()(e.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log("异步调用失败返回:"+i()(e)),n.close(),a.addQueryList=[],t.$alert(i()(e.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},resetForm:function(e){this.$refs[e].resetFields(),this.newlyAdded.dialogVisible=!1},submitData:function(e){var t=this;this.addQueryList.every(function(e){console.log(1*e.bank_fee,1*e.mbmp_fee,1*e.mbpb_fee);var t=1*(e.bank_fee?e.bank_fee:0)+1*(e.mbmp_fee?e.mbmp_fee:0)+1*(e.mbpb_fee?e.mbpb_fee:0);return t<30||30==t})?this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),t.$message({message:"请确认信息是否填写完整！",type:"warning"}),!1;t.submitForm()}):this.$alert("平台服务费+银行服务费+渠道商服务费之和不可超过每笔交易额的30%","处理失败",{confirmButtonText:"确定",callback:function(e){}})},submitForm:function(){var e=this;this.$confirm("在此提交的信息一经录入不可更改, 是否提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e,a=t.ruleForm.bms_work_t1.split(":"),o=t.ruleForm.bms_work_t2.split(":"),n="";n=0===a[0].indexOf("0",0)?a[0].substr(1,1):a[0];var s="";s=0===a[1].indexOf("0",0)?a[1].substr(1,1):a[1];var l="";l=0===o[0].indexOf("0",0)?o[0].substr(1,1):o[0];var r="";r=0===o[1].indexOf("0",0)?o[1].substr(1,1):o[1];var c=[];1==e.newlyAdded.msg[0].radio&&c.push(1),1==e.newlyAdded.msg[1].radio&&c.push(2),console.log(c,"------------------");var u={bmi_bank_center_id:t.customGlobal.userInfoExt.cui_bank_center_id,bmi_province_id:t.customGlobal.userInfoExt.cui_province_id,bmi_city_id:t.customGlobal.userInfoExt.cui_city_id,bmi_cui_id:t.customGlobal.userInfoExt.bmi_cui_id,bmi_county_id:t.customGlobal.userInfoExt.cui_county_id,bmi_station_id:t.customGlobal.userInfoExt.cui_station_id,bcf_cui_uuid:t.customGlobal.userInfoExt.cui_uuid,bmi_mer_name:t.ruleForm.bmi_mer_name,bmi_mer_alias:t.ruleForm.bmi_mer_alias,bmi_login_id:t.ruleForm.bmi_login_id,bmi_phone:t.ruleForm.bmi_login_id,mbmi_mid:t.ruleForm.mbmi_mid,bmi_password:e.customGlobal.md5(t.ruleForm.bmi_password),bmi_industry_id:t.ruleForm.bmi_industry_id,bms_industry_id:t.ruleForm.bmi_industry_id,bms_area_name:t.ruleForm.selectedOptions,bms_address:t.ruleForm.bms_address,bms_license_code:t.ruleForm.bms_license_code,permissions:c,bms_work_t:[n+","+s+","+l+","+r],bms_work_d:[0,6],bms_work_t_name:t.ruleForm.bms_work_t1+"-"+t.ruleForm.bms_work_t2,bms_work_d_name:["周一","周二","周三","周四","周五","周六","周日"],bms_area:t.ruleForm.loc,bms_name:t.ruleForm.bmi_mer_name,bms_phone:t.ruleForm.bmi_login_id,bcf_manager_id:"",bcf_manager_name:"",mbmi_contacts:"",mbmi_phone:t.ruleForm.bmi_login_id},m=e.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});e.customGlobal.postHttpClient(e.customGlobal.serverUrl.shop_add,e.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},e.qs.stringify({jsondata:i()(u)})).then(function(t){console.log("异步调用成功返回:"+i()(t)),"success"==t.data.status?(m.close(),e.Select_shop(t.data.mer_uuid,e.ruleForm.mbmi_mid,!0)):(console.info("商户新增失败"),m.close(),e.newlyAdded.dialogVisible=!1,e.serviceChargeMsg.dialogVisible=!1,e.resetForm("ruleForm"),e.getData(),e.$alert(t.data.msg,"商户新增失败",{confirmButtonText:"确定",callback:function(e){console.info("data:"+i()(t.data)),m.close()}}),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){console.log("异步调用出错:"+i()(t)),m.close(),e.newlyAdded.dialogVisible=!1,e.serviceChargeMsg.dialogVisible=!1,e.resetForm("ruleForm"),e.getData(),e.$alert(i()(t.message),"商户新增失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("异步调用失败返回:"+i()(t)),m.close(),e.newlyAdded.dialogVisible=!1,e.serviceChargeMsg.dialogVisible=!1,e.resetForm("ruleForm"),e.getData(),e.$alert(i()(t.message),"商户新增失败！",{confirmButtonText:"确定",callback:function(e){}})})}).catch(function(){})},Select_shop:function(e,t,a){var o=this;if(this.addQueryList.every(function(e){var t=1*(e.bank_fee?e.bank_fee:0)+1*(e.mbmp_fee?e.mbmp_fee:0)+1*(e.mbpb_fee?e.mbpb_fee:0);return t<30||30==t})){console.log(this.addQueryList),this.addQueryList.forEach(function(e){return e.bank_fee?e.bank_fee:"0"});var n=this.addQueryList,s={method:"2",detail:n.map(function(a){return console.log((100-1*a.mbpb_fee-1*a.bank_fee-1*a.mbmp_fee).toFixed(2)+"","-0-0-0-0-0"),{bank_company_alias_id:o.currentCompanyId,device_uuid:a.di_uuid,mer_uuid:e,value:{mer_uuid:e,device_uuid:a.di_uuid,bank_uuid:o.customGlobal.userInfoExt.cui_station_id,platform_id:o.mid,platform_fee:a.mbpb_fee?a.mbpb_fee:"0",bank_id:o.mid,bank_fee:a.bank_fee?a.bank_fee:"0",other1_id:a.bmp_mid?a.bmp_mid:"",other1_fee:a.mbmp_fee?a.mbmp_fee:"0",mer_id:t,mer_fee:(100-1*a.mbpb_fee-1*a.bank_fee-1*a.mbmp_fee).toFixed(2)+""}}})},l=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postBank13CompanyIdAndDeviceUnionConfig,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(s)})).then(function(e){console.log("异步调用成功返回:"+i()(e)),"success"==e.data.status?(l.close(),o.newlyAdded.dialogVisible=!1,o.serviceChargeMsg.dialogVisible=!1,console.log("res==",11),a&&o.resetForm("ruleForm"),o.getData(),o.$message({type:"success",showClose:!0,duration:3e3,dangerouslyUseHTMLString:!0,message:'<span style="color:black;">操作成功</span>'})):(console.info("商户新增失败"),l.close(),"请登录认证"===e.data.msg&&o.$router.push({path:"/login"}))},function(e){console.log("异步调用出错:"+i()(e)),l.close(),o.$alert(i()(e.message),"商1户新增失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log("异步调用失败返回:"+i()(e)),l.close(),o.$alert(i()(e.message),"商户新增失败！",{confirmButtonText:"确定",callback:function(e){}})});var r=n.map(function(t){return{mbbb_bank_station_uuid:o.customGlobal.userInfoExt.cui_station_id,mbbb_mer_uuid:e,mbbb_device_uuid:t.di_uuid,mbbb_fee:t.bank_fee?t.bank_fee:"0"}});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.Reset_equipment_and_rates_update,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(r)})).then(function(e){})}else this.$alert("平台服务费+银行服务费+渠道商服务费之和不可超过每笔交易额的30%","处理失败",{confirmButtonText:"确定",callback:function(e){}})},PopupControl:function(e,t,a){if(console.log(e.row),t.dialogVisible=!0,t.name=e.row.mbmi_mer_name,t.obj=e.row,a)switch(a){case"功能开通":t.msg[0].radio=e.row.bank_mer_permissions.indexOf("1")>-1?"1":"2",t.msg[1].radio=e.row.bank_mer_permissions.indexOf("2")>-1?"1":"2";break;case"服务费管理":this.addQueryClick(t.obj.mbmi_uuid,this.addQueryList);break;case"商户信息":this.queryInformationClick();break;case"加盟网点查看":this.franchiseOutletsClick(t.obj.mbmi_uuid)}},franchiseOutletsClick:function(e){var t=this,a=this,o={perPageSize:this.franchiseOutlets.perPageSize,currentPage:this.franchiseOutlets.currentPage,bma_mer_uuid:e,bma_from_bank_center_id:this.customGlobal.userInfoExt.cui_bank_center_id,bma_from_bank_province_id:this.customGlobal.userInfoExt.cui_province_id,bma_from_bank_city_id:this.customGlobal.userInfoExt.cui_city_id,bma_from_bank_county_id:this.customGlobal.userInfoExt.cui_county_id,bma_from_bank_station_uuid:this.customGlobal.userInfoExt.cui_station_id},n=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.internal_merchant_affiliate_network_query,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(o)})).then(function(e){console.log("异步调用成功返回:"+i()(e)),"success"==e.data.status?(a.franchiseOutlets.setData=e.data.rows,a.franchiseOutlets.total=e.data.total,n.close()):(console.info("商户查询失败"),n.close(),"请登录认证"===e.data.msg&&t.$router.push({path:"/login"}))},function(e){console.log("异步调用出错:"+i()(e)),n.close(),a.addQueryList=[],t.$alert(i()(e.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log("异步调用失败返回:"+i()(e)),n.close(),a.addQueryList=[],t.$alert(i()(e.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},selectPCAChange:function(e){this.pca.province=e[0],this.pca.city=e[1],this.pca.area=e[2],console.info("选择省、市、县编码："+i()(this.pca));for(var t="",a=["全部","全部","全部"],o=0;o<this.ruleForm.selectedOptions.length;o++)t=""===t?n.CodeToText[this.ruleForm.selectedOptions[o]]:t+","+n.CodeToText[this.ruleForm.selectedOptions[o]],a[o]=n.CodeToText[this.ruleForm.selectedOptions[o]];console.info("选择省、市、县中文："+a),this.ruleForm.loc=a},handleNodeClick:function(e,t){console.log(e,t)},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleChange:function(e){console.log(e)},adoptApprovedSizeChange:function(e){this.adoptApproved.perPageSize=e,this.getData()},adoptApprovedCurrentChange:function(e){this.adoptApproved.currentPage=e,this.getData()},handleSizeChange:function(e){this.queryParam.pageSize=e,this.queryValveCurrentData()},handleCurrentChange:function(e){this.queryParam.currentPage=e,this.queryValveCurrentData()},franchiseOutletsCurrentChange:function(e){this.franchiseOutlets.currentPage=e,this.franchiseOutletsClick(this.franchiseOutlets.obj.mbmi_uuid)},franchiseOutletsSizeChange:function(e){this.franchiseOutlets.perPageSize=e,this.franchiseOutletsClick(this.franchiseOutlets.obj.mbmi_uuid)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[e._v("商户信息列表")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.newlyAdded.dialogVisible=!0}}},[e._v("新增商户")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"new-table-fixed-right new-table-fixed",attrs:{border:"",data:e.adoptApproved.tableData,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"header-cell-style":e.headerStyle}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),e._l(e.adoptApproved.tableMsg,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.key,label:e.name}})}),e._v(" "),a("el-table-column",{attrs:{label:"优惠券推广"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.bank_mer_permissions.indexOf("1")>-1?a("i",{staticClass:"el-icon-check"}):a("i",{staticClass:"el-icon-close"})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品推广"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.bank_mer_permissions.indexOf("2")>-1?a("i",{staticClass:"el-icon-check"}):a("i",{staticClass:"el-icon-close"})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.PopupControl(t,e.functionMsg,"功能开通")}}},[e._v("功能开通")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.PopupControl(t,e.serviceChargeMsg,"服务费管理")}}},[e._v("服务费管理")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.PopupControl(t,e.merchantInformation,"商户信息")}}},[e._v("商户信息")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.PopupControl(t,e.franchiseOutlets,"加盟网点查看")}}},[e._v("已入驻的外部网点")])]}}])})],2),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":e.adoptApproved.currentPage,"page-sizes":[10,20,50,100,200],"page-size":e.adoptApproved.perPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.adoptApproved.total},on:{"size-change":e.adoptApprovedSizeChange,"current-change":e.adoptApprovedCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"功能开通",visible:e.functionMsg.dialogVisible,width:"20%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.functionMsg,"dialogVisible",t)}}},[a("div",[a("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"10px"}},[e._v("商户名称："+e._s(e.functionMsg.name))]),e._v(" "),e._l(e.functionMsg.msg,function(t,o){return a("div",{key:o,staticStyle:{"margin-bottom":"10px",display:"flex"}},[a("div",{staticStyle:{width:"100px","text-align":"left"}},[e._v(e._s(t.name)+"：")]),e._v(" "),a("div",[a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(a){e.$set(t,"radio",a)},expression:"item.radio"}},[e._v("开通")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(a){e.$set(t,"radio",a)},expression:"item.radio"}},[e._v("关闭")])],1)])})],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.functionMsg.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.functionClick()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"服务费管理",visible:e.serviceChargeMsg.dialogVisible,width:"80%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.serviceChargeMsg,"dialogVisible",t)}}},[a("div",[a("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"10px"}},[e._v("商户名称："+e._s(e.serviceChargeMsg.name))]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"10px"}},[e._v("收款账号："+e._s(e.serviceChargeMsg.obj.mbmi_mid))]),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"new-table-fixed-right new-table-fixed",attrs:{border:"",data:e.addQueryList,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"header-cell-style":e.headerStyle}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"di_uuid",label:"设备编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("format")(t.row.di_uuid)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"平台服务费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("每笔交易额\n              "),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:"",value:t.row.mbpb_fee,size:"mini",placeholder:"请输入百分比交易额"}}),e._v("%\n            ")],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"银行服务费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("每笔交易额\n              "),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!t.row.bmp_uuid||!t.row.mbpb_fee,size:"mini",placeholder:"请输入百分比交易额"},on:{input:function(a){return e.inputChange(t.row,"bank_fee")}},model:{value:t.row.bank_fee,callback:function(a){e.$set(t.row,"bank_fee",a)},expression:"scope.row.bank_fee"}}),e._v("%\n            ")],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"渠道服务费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("渠道商名称："+e._s(t.row.bmp_name||""))]),e._v(" "),a("div",[e._v("每笔交易额\n              "),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:"",size:"mini",placeholder:"请输入百分比交易额"},model:{value:t.row.mbmp_fee,callback:function(a){e.$set(t.row,"mbmp_fee",a)},expression:"scope.row.mbmp_fee"}}),e._v("%\n            ")],1)]}}])})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.serviceChargeMsg.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.Select_shop(e.serviceChargeMsg.obj.mbmi_uuid,e.serviceChargeMsg.obj.mbmi_mid)}}},[e._v("确 定\n      ")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"商户信息",visible:e.merchantInformation.dialogVisible,width:"35%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.merchantInformation,"dialogVisible",t)}}},[a("div",[a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("商户名称："+e._s(e.merchantInformation.dataMsg.bms_name)+"\n      ")]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("商户简称：\n        "+e._s(e.merchantInformation.dataMsg.bmi_mer_alias))]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("统一社会信用代码：\n        "+e._s(e.merchantInformation.dataMsg.bmi_license_code))]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("所属行业： "+e._s(e.merchantInformation.obj.bii_name))]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("每周营业日：\n        "+e._s(e.merchantInformation.dataMsg.bms_work_d_name?JSON.parse(e.merchantInformation.dataMsg.bms_work_d_name)[0]+"-"+JSON.parse(e.merchantInformation.dataMsg.bms_work_d_name).slice(-1):"")+"\n      ")]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("营业时间段：\n        "+e._s(e.merchantInformation.dataMsg.bms_work_t_name))]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("所在区域：\n        "+e._s(e.merchantInformation.dataMsg.bms_area?e.merchantInformation.dataMsg.bms_area.replaceAll('"',"").replaceAll(",","-"):"")+"\n      ")]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("详细地址：\n        "+e._s(e.merchantInformation.dataMsg.bms_address))]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("商户登录名(手机号)：\n        "+e._s(e.merchantInformation.dataMsg.bmi_phone))]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px"}},[e._v("银联子商户号： "+e._s(e.merchantInformation.dataMsg.mbmi_mid)+"\n      ")])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.merchantInformation.dialogVisible=!1}}},[e._v("关 闭")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"已入驻的外部网点",visible:e.franchiseOutlets.dialogVisible,width:"80%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.franchiseOutlets,"dialogVisible",t)}}},[a("div",[a("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"10px"}},[e._v("商户名称："+e._s(e.franchiseOutlets.name))]),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"new-table-fixed-right new-table-fixed",attrs:{border:"",data:e.franchiseOutlets.setData,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"header-cell-style":e.headerStyle}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),e._l(e.franchiseOutlets.msg,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.key,label:e.name}})})],2),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":e.franchiseOutlets.currentPage,"page-sizes":[10,20,50,100,200],"page-size":e.franchiseOutlets.perPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.franchiseOutlets.total},on:{"size-change":e.franchiseOutletsSizeChange,"current-change":e.franchiseOutletsCurrentChange}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.franchiseOutlets.dialogVisible=!1}}},[e._v("关 闭")])],1)]),e._v(" "),a("el-dialog",{attrs:{"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:e.newlyAdded.dialogVisible,width:"80%"},on:{"update:visible":function(t){return e.$set(e.newlyAdded,"dialogVisible",t)}}},[a("div",{staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold"},attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s("新增已审核商户"))])]),e._v(" "),a("div",{staticClass:"box test-5"},[a("div",{staticStyle:{"text-align":"left","font-size":"18px","font-weight":"bold","margin-left":"10px"},attrs:{slot:"title"},slot:"title"},[a("span",[e._v("基本信息")])]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"160px"}},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:24}},[a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"商户名称:",prop:"bmi_mer_name"}},[a("el-input",{attrs:{maxlength:20,placeholder:"请输入商户名称"},model:{value:e.ruleForm.bmi_mer_name,callback:function(t){e.$set(e.ruleForm,"bmi_mer_name",t)},expression:"ruleForm.bmi_mer_name"}})],1)],1),e._v(" "),a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"商户简称:",prop:"bmi_mer_alias"}},[a("el-input",{attrs:{maxlength:6,placeholder:"请输入商户简称"},model:{value:e.ruleForm.bmi_mer_alias,callback:function(t){e.$set(e.ruleForm,"bmi_mer_alias",t)},expression:"ruleForm.bmi_mer_alias"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:24}},[a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"统一社会信用代码:",prop:"bms_license_code"}},[a("el-input",{attrs:{maxlength:18,placeholder:"请输入统一社会信用代码(18位)"},model:{value:e.ruleForm.bms_license_code,callback:function(t){e.$set(e.ruleForm,"bms_license_code",t)},expression:"ruleForm.bms_license_code"}})],1)],1),e._v(" "),a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"商户所属行业:",prop:"bmi_industry_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.bmi_industry_id,callback:function(t){e.$set(e.ruleForm,"bmi_industry_id",t)},expression:"ruleForm.bmi_industry_id"}},e._l(e.industrySelectionList,function(e){return a("el-option",{key:e.bii_name,attrs:{label:e.bii_name,value:e.bii_id}})}),1)],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:24}},[a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"每周营业时间:"}},[a("div",{staticStyle:{width:"100%","text-align":"left"}},[e._v("\n                周一至周日\n              ")])])],1),e._v(" "),a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"选择营业时间:"}},[a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{prop:"bms_work_t1"}},[a("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"00:00",step:"00:30",end:"23:59"}},model:{value:e.ruleForm.bms_work_t1,callback:function(t){e.$set(e.ruleForm,"bms_work_t1",t)},expression:"ruleForm.bms_work_t1"}})],1),e._v("\n                　-　\n                "),a("el-form-item",{attrs:{prop:"bms_work_t2"}},[a("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"00:00",step:"00:30",end:"23:59",minTime:e.ruleForm.bms_work_t1}},model:{value:e.ruleForm.bms_work_t2,callback:function(t){e.$set(e.ruleForm,"bms_work_t2",t)},expression:"ruleForm.bms_work_t2"}})],1)],1)])],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:24}},[a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"所在地区:",prop:"selectedOptions"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.regionData},on:{change:e.selectPCAChange},model:{value:e.ruleForm.selectedOptions,callback:function(t){e.$set(e.ruleForm,"selectedOptions",t)},expression:"ruleForm.selectedOptions"}})],1)],1),e._v(" "),a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"详细地址:",prop:"bms_address"}},[a("el-input",{attrs:{type:"textarea",autosize:"",maxlength:30,placeholder:"请输入详细地址"},model:{value:e.ruleForm.bms_address,callback:function(t){e.$set(e.ruleForm,"bms_address",t)},expression:"ruleForm.bms_address"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:24}},[a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"商户登录名(手机号):",prop:"bmi_login_id"}},[a("el-input",{attrs:{maxlength:11,placeholder:"请输入商户登录名(手机号)"},model:{value:e.ruleForm.bmi_login_id,callback:function(t){e.$set(e.ruleForm,"bmi_login_id",t)},expression:"ruleForm.bmi_login_id"}})],1)],1),e._v(" "),a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"商户初始密码:",prop:"bmi_password"}},[a("el-input",{attrs:{placeholder:"请输入商户初始密码"},model:{value:e.ruleForm.bmi_password,callback:function(t){e.$set(e.ruleForm,"bmi_password",t)},expression:"ruleForm.bmi_password"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:24}},[a("el-col",{attrs:{md:12}},[a("el-form-item",{attrs:{label:"银联子商户号:",prop:"mbmi_mid"}},[a("el-input",{attrs:{placeholder:"请输入银联子商户号"},model:{value:e.ruleForm.mbmi_mid,callback:function(t){e.$set(e.ruleForm,"mbmi_mid",t)},expression:"ruleForm.mbmi_mid"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left","font-size":"18px","font-weight":"bold",margin:"10px"}},[a("span",[e._v("功能开通")])]),e._v(" "),e._l(e.newlyAdded.msg,function(t,o){return a("div",{key:o,staticStyle:{width:"100%","text-align":"left",margin:"0 0 10px 10px",display:"flex"}},[a("div",{staticStyle:{width:"100px","text-align":"left"}},[e._v(e._s(t.name)+"：")]),e._v(" "),a("div",[a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(a){e.$set(t,"radio",a)},expression:"item.radio"}},[e._v("开通")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(a){e.$set(t,"radio",a)},expression:"item.radio"}},[e._v("关闭")])],1)])}),e._v(" "),a("div",{staticStyle:{"text-align":"left","font-size":"18px","font-weight":"bold",margin:"10px"}},[a("span",[e._v("商品推广服务费设置")])]),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"new-table-fixed-right new-table-fixed",attrs:{border:"",data:e.addQueryList,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"header-cell-style":e.headerStyle}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"di_uuid",label:"设备编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("format")(t.row.di_uuid)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"平台服务费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("每笔交易额\n                "),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:"",value:t.row.mbpb_fee,size:"mini",placeholder:"请输入百分比交易额"}}),e._v("%\n              ")],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"银行服务费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("每笔交易额\n                "),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!t.row.bmp_uuid||!t.row.mbpb_fee,size:"mini",placeholder:"请输入百分比交易额"},on:{input:function(a){return e.inputChange(t.row,"bank_fee")}},model:{value:t.row.bank_fee,callback:function(a){e.$set(t.row,"bank_fee",a)},expression:"scope.row.bank_fee"}}),e._v("%\n              ")],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"渠道服务费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("渠道商名称："+e._s(t.row.bmp_name||""))]),e._v(" "),a("div",[e._v("每笔交易额\n                "),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:"",size:"mini",placeholder:"请输入百分比交易额"},model:{value:t.row.mbmp_fee,callback:function(a){e.$set(t.row,"mbmp_fee",a)},expression:"scope.row.mbmp_fee"}}),e._v("%\n              ")],1)]}}])})],1)],2)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("关 闭")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitData("ruleForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("su88")},"data-v-98e75f88",null);t.default=r.exports},"8YOR":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Uoz4"),i=a("/KGh"),n={data:function(){return{activeName:"first",activeIndex:"1"}},components:{toBeReviewed:o.default,Approved:i.default},methods:{handleClick:function(e,t){console.log(e,t)},handleSelect:function(e,t){switch(this.activeIndex=e,e){case"1":this.$refs.toBeReviewedClick.getData();break;case"2":this.$refs.ApprovedClick.getData()}}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{staticClass:"el-menu-demo",style:{height:"60px"},attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[a("el-menu-item",{staticStyle:{margin:"0 10px"},attrs:{index:"1"}},[e._v("商户信息")]),e._v(" "),a("el-menu-item",{staticStyle:{margin:"0 10px"},attrs:{index:"2"}},[e._v("入驻外部网点审核")])],1),e._v(" "),a("div",{staticStyle:{width:"98%",margin:"0 auto"}},[a("Approved",{directives:[{name:"show",rawName:"v-show",value:1==e.activeIndex,expression:"activeIndex==1"}],ref:"ApprovedClick",staticStyle:{"margin-top":"10px"}}),e._v(" "),a("toBeReviewed",{directives:[{name:"show",rawName:"v-show",value:2==e.activeIndex,expression:"activeIndex==2"}],ref:"toBeReviewedClick",staticStyle:{"margin-top":"10px"}})],1)],1)},staticRenderFns:[]},l=a("VU/8")(n,s,!1,null,null,null);t.default=l.exports},OdPc:function(e,t){},Uoz4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),i=a.n(o),n=a("bOdI"),s=a.n(n),l={data:function(){var e;return{notApproved:{currentPage:1,perPageSize:10,total:0,tableMsg:[{key:"mbmi_mer_name",name:"商户名称"},{key:"bii_name",name:"所属行业"},{key:"mbmi_phone",name:"联系电话"}],tableData:[]},tableMsg:[{key:"number",name:"序号"},{key:"name",name:"商户名称"},{key:"industry",name:"所属行业"},{key:"contacts",name:"联系人"},{key:"phone",name:"联系电话"}],StateManagement:(e={radio:"1",input:"",currentPage:1,perPageSize:10,total:0},s()(e,"input",""),s()(e,"dialogVisible",!1),s()(e,"msg",{}),s()(e,"tableData",[]),e),headerStyle:{background:"#4B86BC",color:"#ffffff",borderRight:"1px solid #E3E5EB",padding:"0px",height:"45px","line-height":"45px"},tableData:[{date:"2016-05-02",name:"王小虎",province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333}]}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=this,a={currentPage:this.notApproved.currentPage,perPageSize:this.notApproved.perPageSize,manager_status:1,obj_bank_center_id:this.customGlobal.userInfoExt.cui_bank_center_id,obj_province_id:this.customGlobal.userInfoExt.cui_province_id,obj_city_id:this.customGlobal.userInfoExt.cui_city_id,obj_county_id:this.customGlobal.userInfoExt.cui_county_id,obj_station_id:this.customGlobal.userInfoExt.cui_station_id},o=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.merchant_pending_review_query,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(a)})).then(function(a){console.log("异步调用成功返回:"+i()(a)),"success"==a.data.status?(o.close(),t.notApproved.tableData=a.data.rows,t.notApproved.total=a.data.total):(t.notApproved.tableData=[],console.info("商户查询失败"),o.close(),"请登录认证"===a.data.msg&&e.$router.push({path:"/login"}))},function(a){console.log("异步调用出错:"+i()(a)),o.close(),t.notApproved.tableData=[],e.$alert(i()(a.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(a){console.log("异步调用失败返回:"+i()(a)),o.close(),t.notApproved.tableData=[],e.$alert(i()(a.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},StateManagementChange:function(e){var t=this;this.StateManagement.dialogVisible=!0,this.StateManagement.msg=e.row;var a=this,o={currentPage:this.StateManagement.currentPage,perPageSize:this.StateManagement.perPageSize,bma_mer_uuid:e.row.mbmi_uuid},n=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.other_affiliated_outlets_query,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(o)})).then(function(e){console.log("异步调用成功返回:"+i()(e)),"success"==e.data.status?(a.StateManagement.tableData=e.data.rows,a.StateManagement.total=e.data.total,n.close()):(a.StateManagement.tableData=[],console.info("商户查询失败"),n.close(),"请登录认证"===e.data.msg&&t.$router.push({path:"/login"}))},function(e){console.log("异步调用出错:"+i()(e)),n.close(),a.StateManagement.tableData=[],t.$alert(i()(e.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log("异步调用失败返回:"+i()(e)),n.close(),a.StateManagement.tableData=[],t.$alert(i()(e.message),"商户查询失败！",{confirmButtonText:"确定",callback:function(e){}})})},submitForm:function(){var e=this;this.$confirm("是否进行审核操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(console.log(e.StateManagement.tableData,"---------------------------"),e.StateManagement.tableData.filter(function(e){return"3"==e.bma_from_status}).every(function(e){return e.bma_from_describer})){var t={dataList:e.StateManagement.tableData.map(function(e){return{bma_uuid:e.bma_uuid,bma_from_status:e.bma_from_status,bma_from_describer:e.bma_from_describer,bma_to_status:"",bma_to_describer:"",bma_to_bank_center_id:e.bma_to_bank_center_id,bma_to_bank_province_id:e.bma_to_bank_province_id,bma_to_bank_city_id:e.bma_to_bank_city_id,bma_to_bank_county_id:e.bma_to_bank_county_id,bma_to_bank_station_uuid:e.bma_to_bank_station_uuid}})},a=e.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});e.customGlobal.postHttpClient(e.customGlobal.serverUrl.other_affiliate_outlets_modify_status_update,e.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},e.qs.stringify({jsondata:i()(t)})).then(function(t){console.log("异步调用成功返回:"+i()(t)),"success"==t.data.status?(a.close(),e.StateManagement.dialogVisible=!1,e.getData()):(console.info("审核失败"),a.close(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){console.log("异步调用出错:"+i()(t)),a.close(),e.$alert(i()(t.message),"审核失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("异步调用失败返回:"+i()(t)),a.close(),e.$alert(i()(t.message),"审核失败！",{confirmButtonText:"确定",callback:function(e){}})})}else e.$message({type:"warning",showClose:!0,duration:3e3,dangerouslyUseHTMLString:!0,message:'<span style="color:black;">请填写审核不通过原因</span>'})}).catch(function(){})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},notApprovedSizeChange:function(e){this.notApproved.perPageSize=e,this.getData()},notApprovedCurrentChange:function(e){this.notApproved.currentPage=e,this.getData()},StateManagementSizeChange:function(e){this.StateManagement.perPageSize=e,this.StateManagementChange()},StateManagementCurrentChange:function(e){this.StateManagement.currentPage=e,this.StateManagementChange()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[e._m(0),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"new-table-fixed-right new-table-fixed",attrs:{border:"",data:e.notApproved.tableData,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"header-cell-style":e.headerStyle}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"审核类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("加盟其他网点申请")])]}}])}),e._v(" "),e._l(e.notApproved.tableMsg,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.key,label:e.name}})}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"审核操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.StateManagementChange(t)}}},[e._v("审核")])]}}])})],2),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":e.notApproved.currentPage,"page-sizes":[10,20,50,100,200],"page-size":e.notApproved.perPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.notApproved.total},on:{"size-change":e.notApprovedSizeChange,"current-change":e.notApprovedCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"审核-加盟其他网点申请",visible:e.StateManagement.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.StateManagement,"dialogVisible",t)}}},[a("span",[a("div",[a("div",{staticStyle:{width:"100%","text-align":"left","margin-bottom":"10px"}},[e._v("商户名称："+e._s(e.StateManagement.msg.mbmi_mer_name)+"\n        ")]),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"new-table-fixed-right new-table-fixed",attrs:{border:"",data:e.StateManagement.tableData,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"header-cell-style":e.headerStyle}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bsi_name",label:"加盟网点名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"450"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"40%"}},[a("el-radio",{attrs:{label:"2"},model:{value:t.row.bma_from_status,callback:function(a){e.$set(t.row,"bma_from_status",a)},expression:"scope.row.bma_from_status"}},[e._v("通过")]),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:t.row.bma_from_status,callback:function(a){e.$set(t.row,"bma_from_status",a)},expression:"scope.row.bma_from_status"}},[e._v("不通过")])],1),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:3==t.row.bma_from_status,expression:"scope.row.bma_from_status==3"}],staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请输入不通过原因"},model:{value:t.row.bma_from_describer,callback:function(a){e.$set(t.row,"bma_from_describer",a)},expression:"scope.row.bma_from_describer"}})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":e.StateManagement.currentPage,"page-sizes":[10,20,50,100,200],"page-size":e.StateManagement.perPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.StateManagement.total},on:{"size-change":e.StateManagementSizeChange,"current-change":e.StateManagementCurrentChange}})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.StateManagement.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{display:"flex","justify-content":"space-between",height:"40px"}},[t("div",[this._v("入驻外部网点审核列表")])])}]};var c=a("VU/8")(l,r,!1,function(e){a("OdPc")},"data-v-00b80438",null);t.default=c.exports},su88:function(e,t){}});
//# sourceMappingURL=4.331a683699f466639bd0.js.map