webpackJsonp([26],{Txbb:function(t,e){},k223:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("fZjL"),l=a.n(i),o=a("BO1k"),r=a.n(o),s=a("mvHQ"),n=a.n(s),c=a("ifoU"),u=a.n(c),d=a("Vhou"),p={name:"AccountInfoPlatform",destroyed:function(){d.a.$off("globalMsgForPlatformUser")},data:function(){var t=function(t,e,a){0===e.trim().length?a(new Error("登录标识不可为空")):a()};return{plat_clmShow:!1,plat_ballShow:!1,menuLeft:"-180",menuLeft2:"80",menuWidth:"80px",floatDivWidth:70,floatRightValue:"50px",floatTopValue:"55px",ballIcon:"el-icon-more",cardBodyHeight:!0,cardBodyStyle:"padding-top:10px;padding-bottom:10px;",icon1:"el-icon-d-arrow-left",icon2:"el-icon-caret-top",tableSize:19,multipleSelection:[],tableData:[],delLoginId:[],sortOrderCol:"",realNameByOrg:"",loginIdByOrg:"",userIdByOrg:"",checkOrgId:[],checkAllOrgIds:[],selType:"",userQueryOrgIds:[],treeDataStatus:{},treeData:[],tableRowIdMap:new u.a,tableCheckedKeys:!1,permissionType:"all",userQueryRoleIds:{},menuNum:0,tableTreeData:[],tableDataClone:[],tableBtnRowIdMap:new u.a,tableBtnCheckedKeys:!1,userQueryBtnIds:{},btnNum:0,treeBtnData:[],tableBtnTreeData:[],tableBtnDataClone:[],passwdShow:!0,tableDialgTitle:"",tableOperFlag:"",refreshTableData:(new Date).getTime(),roleSelect:[],roleId:"",reLoad:"",submitColm:!1,platformUserForm:{cui_uuid:"",cui_type:"",cui_login_id:"",cui_password:"123456",cui_realname:"",cui_wx_open_id:"",cui_wx_union_id:"",cui_wx_nick_name:"",cui_concat_phone:"",cui_status:!0,r_memo:""},permissionFormRules:{cui_login_id:[{validator:t,trigger:"blur"}],cui_realname:[{validator:t,trigger:"blur"}],cui_password:[],cui_concat_phone:[]},platformUserFormVisible:!1,platformUserOrgVisible:!1,platformUserBtnVisible:!1,queryParam:{totalRow:0,currentPage:1,pageSize:this.customGlobal.pageSize},platUserSearchForm:{cui_realname:"",cui_login_id:"",cui_wx_nick_name:"",cui_concat_phone:"",cui_statue:""},rules:{}}},mounted:function(){},created:function(){"0"===this.customGlobal.userInfoExt.cui_admin_type&&(this.submitColm=!0);var t=JSON.parse(n()(this.customGlobal.userMenu));this.initPlatTableTreeData(t),this.initPlatBtnTableTreeData(t),this.queryValveCurrentData(),this.initLoginUserOrgTree()},directives:{trigger:{inserted:function(t,e){"ballBtn"===t.id&&t.click()}},drag:function(t){var e=t,a="";document.onselectstart=function(){return!1},e.onmousedown=function(t){var i=t.clientX-e.offsetLeft,l=t.clientY-e.offsetTop;return document.getElementById("dragbtn").setAttribute("data-flag",!1),document.getElementById("dragbtn").setAttribute("show2",e.offsetLeft),a=(new Date).getTime(),document.onmousemove=function(t){var a=t.clientX-i,o=t.clientY-l;a<=0?a=0:a>=document.documentElement.clientWidth-e.clientWidth&&(a=document.documentElement.clientWidth-e.clientWidth),document.getElementById("dragbtn").setAttribute("show2",a.toString()),o<=0?o=0:o>=document.documentElement.clientHeight-e.clientHeight&&(o=document.documentElement.clientHeight-e.clientHeight),e.style.left=a+"px",e.style.top=o+"px"},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,(new Date).getTime()-a<200&&document.getElementById("dragbtn").setAttribute("data-flag",!0)},!1}}},methods:{confCardBodyHeigth:function(){!1===this.cardBodyHeight?(this.cardBodyHeight=!0,this.cardBodyStyle="padding-top:10px;padding-bottom:10px;",this.icon2="el-icon-caret-top"):(this.cardBodyHeight=!1,this.cardBodyStyle="padding-top:0px;padding-bottom:0px;",this.icon2="el-icon-caret-bottom")},sortColumn:function(t){var e="";null!=t.order?("descending"===t.order?e="desc":"ascending"===t.order&&(e="asc"),this.sortOrderCol=t.prop+" "+e,this.queryValveCurrentData()):this.sortOrderCol=""},handleSizeChange:function(t){this.queryParam.pageSize=t,this.queryValveCurrentData()},handleCurrentChange:function(t){this.queryParam.currentPage=t,this.queryValveCurrentData()},handleSelectionChange:function(t){this.multipleSelection=t},isSelect:function(t,e){return"0"!=t.cui_org_type},getRowKeys:function(t){return t.cui_login_id},openBox:function(){if(1!=document.getElementById("dragbtn").getAttribute("data-flag")){"el-icon-more"===this.ballIcon?this.ballIcon="el-icon-right":this.ballIcon="el-icon-more";var t=this.$refs.ballBtn.$el.getBoundingClientRect().x,e=document.documentElement.clientWidth;this.plat_ballShow=!this.plat_ballShow,document.getElementById("buttonPlatfromRole").style.left=t>e/2?this.menuLeft+"px":Math.abs(this.menuLeft2)+"px"}},tableTreeSelectAll:function(){this.tableCheckedKeys=!this.tableCheckedKeys,this.spliteTable(this.tableTreeData,this.tableCheckedKeys);var t=this.$refs.platRoleTreeTable.selection;if(0===t.length)this.tableRowIdMap.clear();else for(var e=0;e<t.length;e++)this.tableRowIdMap.set(t[e].id,!0);this.menuNum=this.tableRowIdMap.size},spliteTable:function(t,e){for(var a=0;a<t.length;a++)this.$refs.platRoleTreeTable.toggleRowSelection(t[a],e),t[a].status=e,!1===this.tableRowIdMap.has(t[a].id)?this.tableRowIdMap.set(t[a].id,!0):!0===this.tableRowIdMap.get(t[a].id)?this.tableRowIdMap.delete(t[a].id):this.tableRowIdMap.set(t[a].id,!0,t[a].caption),t[a].detail&&this.spliteTable(t[a].detail,e)},tableTreeSingleSelect:function(t,e){!1===this.tableRowIdMap.has(e.id)?this.tableRowIdMap.set(e.id,!0):!0===this.tableRowIdMap.get(e.id)?this.tableRowIdMap.delete(e.id):this.tableRowIdMap.set(e.id,!0),e.detail&&this.spliteTable(e.detail)},initPlatTableTreeData:function(t){"all"===this.permissionType?this.tableTreeData=[{caption:"热力用户权限",id:"00-0",detail:t.heatconfig.permissionconfig.detail},{caption:"平台用户权限",id:"00-1",detail:t.platfromconfig.permissionconfig.detail}]:this.tableTreeData=t.permissionconfig.detail,this.tableDataClone=this.tableTreeData},tableTreeSelectChange:function(t){this.menuNum=this.tableRowIdMap.size},initLoopCheckTable:function(t){for(var e=0;e<t.length;e++)"false"===t[e].status?(this.tableRowIdMap.delete(t[e].id),this.$refs.platRoleTreeTable.toggleRowSelection(t[e],!1)):"true"===t[e].status&&(this.tableRowIdMap.set(t[e].id,!0),this.$refs.platRoleTreeTable.toggleRowSelection(t[e],!0)),t[e].detail&&this.initLoopCheckTable(t[e].detail)},initTreeData:function(t){for(var e=0;e<t.length;e++)t[e].detail&&this.initTreeData(t[e].detail),"false"===t[e].status&&(t.splice(e,1),e--);return t},noCheckTreeTable:function(t){this.tableRowIdMap=new u.a;for(var e=0;e<t.length;e++)this.$refs.platRoleTreeTable.toggleRowSelection(t[e],!1),t[e].status=!1,t[e].detail&&this.noCheckTreeTable(t[e].detail)},checkPermissionId:function(t,e,a,i,l){for(var o=!1,r=0;r<e.length;r++)if("5"===l){if(e[r].id===t){e[r].status="true",this.tableDataClone=this.tableData,o=!0;break}if(e[r].hasOwnProperty("detail")){if(!0===(o=this.checkPermissionId(t,e[r].detail,a,i,l)))break}else this.tableDataClone=[],o=!1}return o},initTableDataPermissionStatus:function(t,e){var a=this,i=!0,o=!1,s=void 0;try{for(var n,c=r()(l()(t));!(i=(n=c.next()).done);i=!0){var u=n.value;this.checkPermissionId(u,e,{},"0","5")}}catch(t){o=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}this.$nextTick(function(){a.initLoopCheckTable(e)})},showOrgTree:function(t){var e=this;this.platformUserOrgVisible=!0,this.userIdByOrg=t.cui_uuid,this.realNameByOrg=t.cui_realname,this.loginIdByOrg=t.cui_login_id,this.checkAllOrgIds.length>0&&this.$nextTick(function(){e.noCheckOrgTree(e.checkAllOrgIds)}),this.checkOrgId=[],this.checkAllOrgIds=[],this.selType="",this.queryUserOrgIds(t.cui_login_id)},handleCheck:function(t,e){this.checkOrgId=e.checkedKeys,e.checkedNodes.length>0&&(this.selType=e.checkedNodes[0].type),this.checkAllOrgIds=[],this.recursion(this.treeData,!1),this.checkAllOrgIds=this.checkAllOrgIds.reverse()},recursion:function(t,e){for(var a=[],i=0;i<t.length;i++){var l=t[i];a[i]=!1,l.detail&&(a[i]=!!this.recursion(l.detail,!0)||a[i],a[i]&&this.checkAllOrgIds.push(l.id));for(var o=0;o<this.checkOrgId.length;o++)if(l.id==this.checkOrgId[o]){a[i]=!0,-1==this.checkAllOrgIds.indexOf(l.id)&&this.checkAllOrgIds.push(l.id);break}}if(e)return-1!=a.indexOf(!0)},noCheckOrgTree:function(t){this.$refs.OrgTree.setCheckedKeys(t)},queryUserOrgIds:function(t){var e=this,a={username:t};this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postQueryOrganTemplate,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()(a)})).then(function(t){if(e.userQueryOrgIds=[],"success"==t.data.status){var a=JSON.parse(t.data.orgkey),i=0,o=!0,s=!1,n=void 0;try{for(var c,u=r()(l()(a));!(o=(c=u.next()).done);o=!0){var d=c.value;e.userQueryOrgIds[i]=d,i++}}catch(t){s=!0,n=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw n}}e.$refs.OrgTree.setCheckedKeys(e.userQueryOrgIds,!0)}},function(t){e.$alert(n()(t.message),"当前用户机构查询出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert(n()(t.message),"当前用户机机构查询查询出错",{confirmButtonText:"确定",callback:function(t){}})})},submitUserOrg:function(){var t=this;if(0!=this.checkAllOrgIds.length)if(this.selType<this.customGlobal.userInfoExt.cui_org_type)this.$alert("您还未取得此机构的权限！","保存平台用户机构信息",{confirmButtonText:"确定",callback:function(t){}});else{for(var e={},a=0;a<this.checkAllOrgIds.length;a++)e[this.checkAllOrgIds[a]]=!0;this.saveUserOrgKeys(this.loginIdByOrg,e),this.saveUserOrgType(this.loginIdByOrg,this.selType),this.$nextTick(function(){t.$refs.OrgTree.setCheckedKeys(t.checkAllOrgIds)}),this.userOrgId=[],this.platformUserOrgVisible=!1}else this.$alert("您还未选择机构信息，无需提交！","保存平台用户机构信息",{confirmButtonText:"确定",callback:function(t){}})},saveUserOrgKeys:function(t,e){var a=this,i={username:t,orgkey:e},l=this.$loading({lock:!0,text:"操作中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postCreateUserAndOrgKey,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()(i)})).then(function(t){l.close(),"success"==t.data.status?a.$message({type:"success",message:"平台用户机构信息保存成功!"}):a.$alert("请联系系统管理员，并提交错误报告："+n()(error.message),"保存用户机构权限出错!",{confirmButtonText:"确定",callback:function(t){}})},function(t){l.close(),a.$alert(n()(t.message),"保存用户机构权限出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){l.close(),a.$alert(n()(t.message),"保存用户机构权限出错",{confirmButtonText:"确定",callback:function(t){}})})},saveUserOrgType:function(t,e){var a=this,i={cui_login_id:t,cui_org_type:e},l=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.platformAccount_orgType,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()(i)})).then(function(t){l.close(),"success"==t.data.status||a.$alert("请联系系统管理员，并提交错误报告："+n()(error.message),"保存平台用户查询级别出错!",{confirmButtonText:"确定",callback:function(t){}})},function(t){l.close(),a.$alert(n()(t.message),"保存平台用户查询级别出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){l.close(),a.$alert(n()(t.message),"保存平台用户查询级别出错",{confirmButtonText:"确定",callback:function(t){}})})},removeTreeNode:function(t,e){var a=t.parent,i=a.data.detail||a.data,l=i.findIndex(function(t){return t.id===e.id});i.splice(l,1)},initTreeDataStatus:function(t,e){var a=e.node,i=e.data;e.store;if("{}"===n()(this.treeDataStatus))return t("span",{style:"font-size:14px;"},[t("span",[i.caption])]);var o=!1,s=!0,c=!1,u=void 0;try{for(var d,p=r()(l()(this.treeDataStatus));!(s=(d=p.next()).done);s=!0){var m=d.value;if(i.id===m)return t("span",{style:"font-size:14px;"},[t("span",[i.caption])])}}catch(t){c=!0,u=t}finally{try{!s&&p.return&&p.return()}finally{if(c)throw u}}!1===o&&this.removeTreeNode(a,i)},initLoginUserOrgTree:function(){var t=this,e={username:this.customGlobal.userInfoExt.cui_login_id},a=this.$loading({lock:!0,text:"查询中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postQueryOrganTemplate,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()(e)})).then(function(e){"success"==e.data.status?(a.close(),t.treeData=JSON.parse(e.data.organ).detail,t.treeDataStatus=JSON.parse(e.data.orgkey)):(a.close(),t.$alert(e.data.msg,"查询失败",{confirmButtonText:"确定",callback:function(a){"请登录认证"===e.data.msg&&t.$router.push({path:"/login"})}}))},function(e){a.close(),t.$alert(n()(e.message),"查询出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){a.close(),t.$alert(n()(e.message),"查询出错",{confirmButtonText:"确定",callback:function(t){}})})},tableBtnTreeSelectAll:function(){this.tableBtnCheckedKeys=!this.tableBtnCheckedKeys,this.spliteBtnTable(this.tableBtnTreeData,this.tableBtnCheckedKeys);var t=this.$refs.platBtnTreeTable.selection;if(0===t.length)this.tableBtnRowIdMap.clear();else for(var e=0;e<t.length;e++)this.tableBtnRowIdMap.set(t[e].id,!0);this.btnNum=this.tableBtnRowIdMap.size},spliteBtnTable:function(t,e){for(var a=0;a<t.length;a++)this.$refs.platBtnTreeTable.toggleRowSelection(t[a],e),t[a].status=e,!1===this.tableBtnRowIdMap.has(t[a].id)?this.tableBtnRowIdMap.set(t[a].id,!0):!0===this.tableBtnRowIdMap.get(t[a].id)?this.tableBtnRowIdMap.delete(t[a].id):this.tableBtnRowIdMap.set(t[a].id,!0,t[a].caption),t[a].detail&&this.spliteBtnTable(t[a].detail,e)},tableBtnTreeSingleSelect:function(t,e){!1===this.tableBtnRowIdMap.has(e.id)?this.tableBtnRowIdMap.set(e.id,!0):!0===this.tableBtnRowIdMap.get(e.id)?this.tableBtnRowIdMap.delete(e.id):this.tableBtnRowIdMap.set(e.id,!0),e.detail&&this.spliteBtnTable(e.detail)},initPlatBtnTableTreeData:function(t){"all"===this.permissionType?this.tableBtnTreeData=[{caption:"热力用户按钮权限",vue:"",url:"",icon:"",id:"00-1",detail:t.heatconfig.buttonconfig.detail},{caption:"平台用户按钮权限",vue:"",url:"",icon:"",id:"00-2",detail:t.platfromconfig.buttonconfig.detail}]:this.tableBtnTreeData=t.buttonconfig.detail,this.tableBtnDataClone=this.tableBtnTreeData},tableBtnTreeSelectChange:function(t){this.btnNum=this.tableBtnRowIdMap.size},initBtnLoopCheckTable:function(t){for(var e=0;e<t.length;e++)"false"===t[e].status?(this.tableBtnRowIdMap.delete(t[e].id),this.$refs.platBtnTreeTable.toggleRowSelection(t[e],!1)):"true"===t[e].status&&(this.tableBtnRowIdMap.set(t[e].id,!0),this.$refs.platBtnTreeTable.toggleRowSelection(t[e],!0)),t[e].detail&&this.initBtnLoopCheckTable(t[e].detail)},noCheckBtnTreeTable:function(t){this.tableBtnRowIdMap=new u.a;for(var e=0;e<t.length;e++)this.$refs.platBtnTreeTable.toggleRowSelection(t[e],!1),t[e].status=!1,t[e].detail&&this.noCheckBtnTreeTable(t[e].detail)},checkBtnPermissionId:function(t,e,a,i,l){for(var o=!1,r=0;r<e.length;r++)if("5"===l){if(e[r].id===t){e[r].status="true",this.tableDataClone=this.tableData,o=!0;break}if(e[r].hasOwnProperty("detail")){if(!0===(o=this.checkPermissionId(t,e[r].detail,a,i,l)))break}else this.tableDataClone=[],o=!1}return o},initBtnTableDataPermissionStatus:function(t,e){var a=this,i=!0,o=!1,s=void 0;try{for(var n,c=r()(l()(t));!(i=(n=c.next()).done);i=!0){var u=n.value;this.checkPermissionId(u,e,{},"0","5")}}catch(t){o=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}this.$nextTick(function(){a.initBtnLoopCheckTable(e)})},platformUserBtn:function(t){this.platformUserBtnVisible=!0,this.loginIdByOrg=t.cui_login_id,this.realNameByOrg=t.cui_realname,0==this.roleSelect.length&&this.getPlatformUserBtn(t.cui_login_id)},getPlatformUserBtn:function(t){var e=this,a={username:t};this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postQueryUserOrgAndPermissionKey,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()(a)})).then(function(t){if("success"==t.data.status){e.tableBtnRowIdMap=new u.a,e.userQueryBtnIds={};var a=JSON.parse(t.data.btnkey);e.userQueryBtnIds=a;var i=0,o=!0,s=!1,n=void 0;try{for(var c,d=r()(l()(a));!(o=(c=d.next()).done);o=!0){var p=c.value;e.tableBtnRowIdMap.set(p,!0),i++}}catch(t){s=!0,n=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw n}}e.btnNum=i,e.noCheckBtnTreeTable(e.tableBtnTreeData),e.initBtnTableDataPermissionStatus(e.userQueryBtnIds,e.tableBtnTreeData)}},function(t){e.$alert(n()(t.message),"按钮权限查询出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert(n()(t.message),"按钮权限查询查询出错",{confirmButtonText:"确定",callback:function(t){}})})},submitUserBtn:function(){var t=this,e={};this.tableBtnRowIdMap.forEach(function(t,a){e[a]=!1}),"{}"===n()(e)&&(e[-1]=!1);var a={username:this.loginIdByOrg,btnkey:e},i=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postModifyUserAndBtnKey,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()(a)})).then(function(e){t.queryValveCurrentData(),"success"==e.data.status?(t.platformUserBtnVisible=!1,t.tableBtnRowIdMap=new u.a,t.noCheckBtnTreeTable(t.tableBtnTreeData),i.close(),t.$message({type:"success",message:"按钮权限保存成功!"})):(i.close(),t.$alert(e.data.msg,msg_show+"失败",{confirmButtonText:"确定",callback:function(a){"请登录认证"===e.data.msg&&"failed"===e.data.status&&t.$router.replace({path:"/login"})}}))},function(t){i.close()}).catch(function(t){i.close()})},getPermiessionId:function(t){var e=this,a={role_id:t},i=this;this.customGlobal.postHttpClient(this.customGlobal.serverUrl.platformRole_queryRoleByIds,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()(a)})).then(function(t){if("success"==t.data.status){e.tableRowIdMap=new u.a;var a=t.data.rows,l={};if(a.length>0){for(var o in a)e.tableRowIdMap.set(a[o].rp_p_id,!0),l[a[o].rp_p_id]=!0;e.menuNum=a.length}e.noCheckTreeTable(i.tableTreeData),e.initTableDataPermissionStatus(l,i.tableTreeData)}else e.$alert(t.data.msg,"角色权限获取失败",{confirmButtonText:"确定",callback:function(a){"请登录认证"===t.data.msg&&"failed"===t.data.status&&e.$router.replace({path:"/login"})}})},function(t){e.$alert(n()(t.message),"角色权限获取出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert(n()(t.message),"角色权限获取出错",{confirmButtonText:"确定",callback:function(t){}})})},queryUserRoleIds:function(t){var e=this,a={username:t};this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postQueryUserOrgAndPermissionKey,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()(a)})).then(function(t){if("success"==t.data.status){e.tableRowIdMap=new u.a,e.userQueryRoleIds={};var a=JSON.parse(t.data.permissionkey);e.userQueryRoleIds=a;var i=0,o=!0,s=!1,n=void 0;try{for(var c,d=r()(l()(a));!(o=(c=d.next()).done);o=!0){var p=c.value;e.tableRowIdMap.set(p,!0),i++}}catch(t){s=!0,n=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw n}}e.menuNum=i,e.noCheckTreeTable(e.tableTreeData),e.initTableDataPermissionStatus(e.userQueryRoleIds,e.tableTreeData)}},function(t){e.$alert(n()(t.message),"权限查询出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert(n()(t.message),"权限查询查询出错",{confirmButtonText:"确定",callback:function(t){}})})},reQueryValveCurrentData:function(){this.queryParam.currentPage=1,this.queryValveCurrentData()},queryValveCurrentData:function(){var t=this,e=this,a={perPageSize:this.queryParam.pageSize,currentPage:this.queryParam.currentPage,cui_login_id:this.platUserSearchForm.cui_login_id,cui_realname:this.platUserSearchForm.cui_realname,cui_wx_nick_name:this.platUserSearchForm.cui_wx_nick_name,cui_concat_phone:this.platUserSearchForm.cui_concat_phone,cui_status:this.platUserSearchForm.cui_status,query_type:this.customGlobal.userInfoExt.cui_org_type};""!==this.sortOrderCol?a.orderby=this.sortOrderCol:a.orderby="cui_writetime desc";var i=this.$loading({lock:!0,text:"查询中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.platformAccount_query,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()(a)})).then(function(a){"success"==a.data.status?(i.close(),e.tableData=a.data.rows,e.queryParam.totalRow=a.data.total):(i.close(),e.tableData=[],t.$alert(a.data.msg,"查询失败",{confirmButtonText:"确定",callback:function(e){"请登录认证"===a.data.msg&&"failed"===a.data.status&&t.$router.replace({path:"/login"})}}))},function(a){i.close(),e.tableData=[],t.$alert(n()(a.message),"查询出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(a){i.close(),e.tableData=[],t.$alert(n()(a.message),"查询出错",{confirmButtonText:"确定",callback:function(t){}})})},platformUserAdd:function(){var t=this;0==this.roleSelect.length&&this.getPlatformRole(),""!=this.reLoad&&this.$nextTick(function(){t.noCheckTreeTable(t.tableTreeData),t.initTableDataPermissionStatus("{}",t.tableTreeData)}),this.passwdShow=!0,this.platformUserFormVisible=!0,this.tableDialgTitle="新增平台用户及菜单授权",this.tableOperFlag=1,this.menuNum=0,this.platformUserForm.cui_login_id="",this.platformUserForm.cui_password="123456",this.platformUserForm.cui_realname="",this.platformUserForm.cui_wx_nick_name="",this.platformUserForm.cui_concat_phone="",this.platformUserForm.cui_wx_open_id="",this.platformUserForm.cui_uuid="",this.platformUserForm.r_memo="",this.platformUserForm.cui_status=!0},platformUserEdit:function(t){this.passwdShow=!1,this.platformUserFormVisible=!0,this.tableDialgTitle="编辑平台用户及菜单授权",this.tableOperFlag=2,this.platformUserForm.cui_login_id=t.cui_login_id,this.platformUserForm.cui_realname=t.cui_realname,this.platformUserForm.cui_wx_nick_name=t.cui_wx_nick_name,this.platformUserForm.cui_concat_phone=t.cui_concat_phone,this.platformUserForm.cui_wx_open_id=t.cui_wx_open_id,this.platformUserForm.cui_wx_union_id=t.cui_wx_union_id,this.platformUserForm.cui_uuid=t.cui_uuid,this.platformUserForm.cui_status=1==t.cui_status,this.reLoad!=t.cui_login_id&&this.queryUserRoleIds(t.cui_login_id),0==this.roleSelect.length&&this.getPlatformRole()},platformUserDel:function(t){var e=this;this.tableOperFlag=3,this.$confirm('请再次确认是否要删除用户[<span style="color:red;">'+t.cui_realname+"</span>]的记录?","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,closeOnClickModal:!1,closeOnPressEscape:!1}).then(function(){var a={uid:t.cui_uuid,login_id:t.cui_login_id},i=e.$loading({lock:!0,text:"操作中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});e.customGlobal.postHttpClient(e.customGlobal.serverUrl.platformAccount_delete,e.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},e.qs.stringify({jsondata:n()(a)})).then(function(t){e.queryValveCurrentData(),i.close(),"success"==t.data.status?e.$message({type:"success",message:"删除成功!"}):(i.close(),e.$alert(t.data.msg,"查询失败",{confirmButtonText:"确定",callback:function(a){"请登录认证"===t.data.msg&&"failed"===t.data.status&&e.$router.replace({path:"/login"})}}))},function(t){i.close(),e.$alert(n()(t.message),"删除出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){i.close(),e.$alert(n()(t.message),"删除出错",{confirmButtonText:"确定",callback:function(t){}})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},resetForm:function(t){this.$refs[t].resetFields()},closeBox:function(){this.reLoad=this.platformUserForm.cui_login_id,this.platformUserFormVisible=!1,this.$refs.platformEdit.clearValidate()},isCellPhone:function(t){return!!/^1(3|4|5|6|7|8)\d{9}$/.test(t)},getPlatformRole:function(){var t=this;this.customGlobal.postHttpClient(this.customGlobal.serverUrl.platformRole_queryAll,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:n()({r_type:1})})).then(function(e){"success"==e.data.status&&(t.roleSelect=e.data.rows)},function(t){}).catch(function(t){})},delPlatformUserArray:function(){var t=this;if(0!=this.multipleSelection.length){for(var e=[],a=0;a<this.multipleSelection.length;a++)e[a]=this.multipleSelection[a].cui_login_id;this.$confirm('请再次确认是否要对已选中的[<span style="color:red;">'+e.length+"</span>]个用户信息进行删除","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,closeOnClickModal:!1,closeOnPressEscape:!1}).then(function(){var a={login_id:e},i=t.$loading({lock:!0,text:"操作中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});t.customGlobal.postHttpClient(t.customGlobal.serverUrl.delUserByArray,t.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},t.qs.stringify({jsondata:n()(a)})).then(function(e){i.close(),"success"==e.data.status?(t.queryValveCurrentData(),t.$refs.platformUserTable.clearSelection(),t.$message({type:"success",message:"删除成功!"})):(i.close(),t.$alert(e.data.msg,"批量删除失败",{confirmButtonText:"确定",callback:function(a){"请登录认证"===e.data.msg&&"failed"===e.data.status&&t.$router.replace({path:"/login"})}}))},function(e){i.close(),t.$alert(n()(e.message),"批量删除出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){i.close(),t.$alert(n()(e.message),"批量删除出错",{confirmButtonText:"确定",callback:function(t){}})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}else this.$alert("您还未选择要删除的用户！","提示信息",{confirmButtonText:"确定",callback:function(t){}})},resetUserPasswd:function(t){var e=this;this.$confirm('请再次确认是否要将用户[<span style="color:red;">'+t.cui_realname+"</span>]的密码进行初始化？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,closeOnClickModal:!1,closeOnPressEscape:!1}).then(function(){var a={login_id:t.cui_login_id,pass_word:e.customGlobal.md5("123456")},i=e.$loading({lock:!0,text:"操作中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});e.customGlobal.postHttpClient(e.customGlobal.serverUrl.resetUserPasswd,e.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},e.qs.stringify({jsondata:n()(a)})).then(function(t){i.close(),"success"==t.data.status?e.$message({type:"success",message:"重置密码成功!"}):(i.close(),e.$alert(t.data.msg,"重置密码失败",{confirmButtonText:"确定",callback:function(a){"请登录认证"===t.data.msg&&"failed"===t.data.status&&e.$router.replace({path:"/login"})}}))},function(t){i.close(),e.$alert(n()(t.message),"重置密码出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){i.close(),e.$alert(n()(t.message),"重置密码出错",{confirmButtonText:"确定",callback:function(t){}})})}).catch(function(){e.$message({type:"info",message:"已取消"})})},submitForm:function(t){var e=this,a="",i="";switch(this.tableOperFlag){case 1:a=this.customGlobal.serverUrl.platformAccount_add,i="添加";break;case 2:a=this.customGlobal.serverUrl.platformAccount_update,i="编辑"}var l=new Array,o={},r=0;this.tableRowIdMap.forEach(function(t,e){l[r]=e,o[e]=!0,r++}),this.$refs[t].validate(function(t){if(!t)return!1;var r={cui_uuid:e.platformUserForm.cui_uuid,cui_login_id:e.platformUserForm.cui_login_id,cui_password:e.customGlobal.md5(e.platformUserForm.cui_password),cui_realname:e.platformUserForm.cui_realname,cui_wx_nick_name:e.platformUserForm.cui_wx_nick_name,cui_concat_phone:e.platformUserForm.cui_concat_phone,cui_wx_open_id:e.platformUserForm.cui_wx_open_id,cui_wx_union_id:e.platformUserForm.cui_wx_union_id,cui_status:1==e.platformUserForm.cui_status?"1":"2",plat_org:l,permission_id:o},s=e.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"});e.customGlobal.postHttpClient(a,e.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},e.qs.stringify({jsondata:n()(r)})).then(function(t){e.queryValveCurrentData(),"success"==t.data.status?(e.platformUserFormVisible=!1,e.tableRowIdMap=new u.a,e.noCheckTreeTable(e.tableTreeData),e.queryValveCurrentData(),s.close(),e.$message({type:"success",message:i+"成功!"})):(s.close(),e.$alert(t.data.msg,i+"失败",{confirmButtonText:"确定",callback:function(a){"请登录认证"===t.data.msg&&"failed"===t.data.status&&e.$router.replace({path:"/login"})}}))},function(t){s.close()}).catch(function(t){s.close()})})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"ruleForm2",staticClass:"account-plat-formitem",staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold",width:"100%"},attrs:{"label-position":"left",model:t.platUserSearchForm,rules:t.rules,"label-width":"130px"}},[a("el-card",{staticClass:"account-plat-card1 account-plat-card2",attrs:{shadow:"always","body-style":t.cardBodyStyle}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold"},attrs:{slot:"header"},on:{click:t.confCardBodyHeigth},slot:"header"},[a("el-row",{on:{click:t.confCardBodyHeigth}},[a("el-col",{attrs:{md:23}},[t._v("\n            用户信息\n          ")]),t._v(" "),a("el-col",{attrs:{md:1},on:{click:t.confCardBodyHeigth}},[a("el-link",{staticStyle:{float:"right","text-decoration":"none","font-size":"20px",height:"10px","line-height":"10px"},attrs:{icon:t.icon2,underline:!1}})],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.cardBodyHeight,expression:"cardBodyHeight"}]},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{md:8}},[a("el-form-item",{attrs:{label:"真实姓名",prop:"cui_realname"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platUserSearchForm.cui_realname,callback:function(e){t.$set(t.platUserSearchForm,"cui_realname",e)},expression:"platUserSearchForm.cui_realname"}})],1)],1),t._v(" "),a("el-col",{attrs:{md:8}},[a("el-form-item",{attrs:{label:"登录标识",prop:"cui_login_id"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platUserSearchForm.cui_login_id,callback:function(e){t.$set(t.platUserSearchForm,"cui_login_id",e)},expression:"platUserSearchForm.cui_login_id"}})],1)],1),t._v(" "),a("el-col",{attrs:{md:8}},[a("el-form-item",{attrs:{label:"微信昵称",prop:"cui_wx_nick_name"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platUserSearchForm.cui_wx_nick_name,callback:function(e){t.$set(t.platUserSearchForm,"cui_wx_nick_name",e)},expression:"platUserSearchForm.cui_wx_nick_name"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{md:8}},[a("el-form-item",{attrs:{label:"联系电话",prop:"cui_concat_phone"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platUserSearchForm.cui_concat_phone,callback:function(e){t.$set(t.platUserSearchForm,"cui_concat_phone",e)},expression:"platUserSearchForm.cui_concat_phone"}})],1)],1),t._v(" "),a("el-col",{attrs:{md:8}},[a("el-form-item",{attrs:{label:"用户状态",prop:"cui_status"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择"},model:{value:t.platUserSearchForm.cui_status,callback:function(e){t.$set(t.platUserSearchForm,"cui_status",e)},expression:"platUserSearchForm.cui_status"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"启用",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"禁用",value:"2"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{md:8}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.queryValveCurrentData}},[t._v("查询")])],1)],1)],1)])],1),t._v(" "),a("el-card",{staticStyle:{width:"100%"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:this.submitColm,expression:"this.submitColm"}],staticStyle:{position:"relative"},attrs:{id:"dragbtn"}},[a("div",{directives:[{name:"drag",rawName:"v-drag"}],style:{width:"62px",right:this.floatRightValue,top:this.floatTopValue,"border-radius":"50%",position:"fixed","padding-left":"0px","padding-top":"8px",cursor:"pointer","z-index":"888"},attrs:{draggable:"false"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.plat_ballShow,expression:"plat_ballShow"}],style:{display:"flex","justify-content":"space-between",position:"absolute",left:this.menuLeft,width:this.menuWidth,top:" 10px"},attrs:{id:"buttonPlatfromRole"}},[a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{attrs:{type:"danger",size:"small",title:"批量删除"},on:{click:t.delPlatformUserArray}},[a("i",{staticClass:"el-icon-delete "},[t._v("批量删除")])])],1),t._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small",title:"新增数据"},on:{click:t.platformUserAdd}},[a("i",{staticClass:"el-icon-edit "},[t._v("新增")])])],1)]),t._v(" "),a("el-tooltip",{attrs:{content:"展开与隐藏功能按钮",placement:"top"}},[a("el-button",{directives:[{name:"trigger",rawName:"v-trigger"}],ref:"ballBtn",class:[!0===t.plat_ballShow?"fadeIn":"fadeOut"],attrs:{id:"ballBtn",type:"primary",icon:"el-icon-close",icon:this.ballIcon,circle:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.openBox(e)}}})],1)],1)]),t._v(" "),a("el-table",{ref:"platformUserTable",staticClass:"account-plat-fixed-right account-plat-fixed ",attrs:{border:"",data:t.tableData,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"row-key":t.getRowKeys,"header-cell-style":{background:"#4B86BC",color:"#ffffff",borderRight:"1px solid #E3E5EB",padding:"0px",height:"45px","line-height":"45px"}},on:{"sort-change":t.sortColumn,"selection-change":t.handleSelectionChange}},[t.submitColm?a("el-table-column",{attrs:{type:"selection",selectable:t.isSelect,width:"55","reserve-selection":!0}}):t._e(),t._v(" "),t.plat_clmShow?a("el-table-column",{attrs:{prop:"cui_uuid",label:"用户ID",align:"center","show-overflow-tooltip":"",width:"30"}}):t._e(),t._v(" "),t.plat_clmShow?a("el-table-column",{attrs:{prop:"cui_type",label:"用户类型",align:"center","show-overflow-tooltip":"",width:"10"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"cui_login_id",label:"登录标识",align:"center","show-overflow-tooltip":"",width:"150"}}),t._v(" "),t.plat_clmShow?a("el-table-column",{attrs:{prop:"cui_password",label:"登录口令",align:"center","show-overflow-tooltip":"",width:"130"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"cui_realname",label:"真实名称",align:"center","show-overflow-tooltip":"",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cui_status",label:"用户状态",align:"center","show-overflow-tooltip":"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return["2"===e.row.cui_status?a("el-tag",{attrs:{size:"small",effect:"dark",type:"danger"}},[t._v("禁用")]):t._e(),t._v(" "),"1"===e.row.cui_status?a("el-tag",{attrs:{size:"small",effect:"dark",type:"success"}},[t._v("启用")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"cui_writetime",label:"修改时间",align:"center","show-overflow-tooltip":"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cui_wx_open_id",label:"微信OPENID",align:"center","show-overflow-tooltip":"",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cui_wx_union_id",label:"微信UNIONID",align:"center","show-overflow-tooltip":"",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cui_wx_nick_name",label:"微信昵称",align:"center","show-overflow-tooltip":"",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"cui_concat_phone",label:"联系电话",align:"center","show-overflow-tooltip":"",width:"150"}}),t._v(" "),t.submitColm?a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"230",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{content:"编辑",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.row.cui_org_type,expression:"scope.row.cui_org_type!='0'?true:false"}],attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},nativeOn:{click:function(a){return a.stopPropagation(),t.platformUserEdit(e.row)}}})],1),t._v(" "),a("el-tooltip",{attrs:{content:"删除",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.row.cui_org_type,expression:"scope.row.cui_org_type!='0'?true:false"}],attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},nativeOn:{click:function(a){return a.stopPropagation(),t.platformUserDel(e.row)}}})],1),t._v(" "),a("el-tooltip",{attrs:{content:"机构授权",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.row.cui_org_type,expression:"scope.row.cui_org_type!='0'?true:false"}],attrs:{type:"warning",icon:"el-icon-connection",circle:"",size:"mini"},nativeOn:{click:function(a){return a.stopPropagation(),t.showOrgTree(e.row)}}})],1),t._v(" "),a("el-tooltip",{attrs:{content:"按钮禁用",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.row.cui_org_type,expression:"scope.row.cui_org_type!='0'?true:false"}],attrs:{type:"success",icon:"el-icon-turn-off",circle:"",size:"mini"},nativeOn:{click:function(a){return a.stopPropagation(),t.platformUserBtn(e.row)}}})],1),t._v(" "),a("el-tooltip",{attrs:{content:"重置密码",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.row.cui_org_type,expression:"scope.row.cui_org_type!='0'?true:false"}],attrs:{type:"info",icon:"el-icon-refresh",circle:"",size:"mini"},nativeOn:{click:function(a){return a.stopPropagation(),t.resetUserPasswd(e.row)}}})],1)]}}],null,!1,2724023798)}):t._e()],1)],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.queryParam.currentPage,"page-sizes":[10,20,50,100,200],"page-size":t.queryParam.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.queryParam.totalRow},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{staticClass:"account-plat-dialog",attrs:{visible:t.platformUserFormVisible,"close-on-press-escape":!1,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(e){t.platformUserFormVisible=e}}},[a("div",{staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold"},attrs:{slot:"title"},slot:"title"},[a("span",[t._v(t._s(this.tableDialgTitle))])]),t._v(" "),a("div",[a("el-card",{staticClass:"account-plat-card1 account-plat-card2",staticStyle:{"background-color":"#d6d6d6"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("用户信息")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("赋予权限信息")]),t._v("("+t._s(this.menuNum)+")")])],1)],1),t._v(" "),a("el-card",[a("el-container",[a("el-aside",{staticStyle:{width:"50%","background-color":"white"}},[a("el-form",{ref:"platformEdit",staticClass:"account-plat-formitem",staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold","margin-top":"10px"},attrs:{model:t.platformUserForm,rules:t.permissionFormRules,"label-width":"130px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.passwdShow,expression:"passwdShow"}],attrs:{label:"登录标识",prop:"cui_login_id",rules:this.permissionFormRules.cui_login_id}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platformUserForm.cui_login_id,callback:function(e){t.$set(t.platformUserForm,"cui_login_id",e)},expression:"platformUserForm.cui_login_id"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.passwdShow,expression:"passwdShow"}],attrs:{label:"登录口令",prop:"cui_password",rules:this.permissionFormRules.cui_password}},[a("el-input",{staticStyle:{width:"80%"},attrs:{"show-password":""},model:{value:t.platformUserForm.cui_password,callback:function(e){t.$set(t.platformUserForm,"cui_password",e)},expression:"platformUserForm.cui_password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"cui_realname",rules:this.permissionFormRules.cui_realname}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platformUserForm.cui_realname,callback:function(e){t.$set(t.platformUserForm,"cui_realname",e)},expression:"platformUserForm.cui_realname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"微信OPENID",prop:"cui_wx_open_id"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platformUserForm.cui_wx_open_id,callback:function(e){t.$set(t.platformUserForm,"cui_wx_open_id",e)},expression:"platformUserForm.cui_wx_open_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"微信UNIONID",prop:"cui_wx_union_id"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platformUserForm.cui_wx_union_id,callback:function(e){t.$set(t.platformUserForm,"cui_wx_union_id",e)},expression:"platformUserForm.cui_wx_union_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"微信昵称",prop:"cui_wx_nick_name"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platformUserForm.cui_wx_nick_name,callback:function(e){t.$set(t.platformUserForm,"cui_wx_nick_name",e)},expression:"platformUserForm.cui_wx_nick_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"cui_concat_phone",rules:this.permissionFormRules.cui_concat_phone}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.platformUserForm.cui_concat_phone,callback:function(e){t.$set(t.platformUserForm,"cui_concat_phone",e)},expression:"platformUserForm.cui_concat_phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"cui_status"}},[a("el-switch",{staticStyle:{display:"block","margin-top":"8px",width:"20%"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.platformUserForm.cui_status,callback:function(e){t.$set(t.platformUserForm,"cui_status",e)},expression:"platformUserForm.cui_status"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"r_memo"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选角色"},on:{change:function(e){return t.getPermiessionId(e)}},model:{value:t.roleId,callback:function(e){t.roleId=e},expression:"roleId"}},t._l(t.roleSelect,function(t,e){return a("el-option",{key:t.r_uuid,attrs:{label:t.r_caption,value:t.r_uuid}})}),1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"ID",prop:"cui_uuid"}},[a("el-input",{model:{value:t.platformUserForm.cui_uuid,callback:function(e){t.$set(t.platformUserForm,"cui_uuid",e)},expression:"platformUserForm.cui_uuid"}})],1)],1)],1),t._v(" "),a("el-container",[a("el-table",{key:t.refreshTableData,ref:"platRoleTreeTable",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{height:"410",data:t.tableTreeData,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"detail",hasChildren:"hasChildren"}},on:{"select-all":t.tableTreeSelectAll,select:t.tableTreeSingleSelect,"selection-change":t.tableTreeSelectChange}},[a("el-table-column",{attrs:{type:"selection",selectable:t.isSelect,width:"50"}}),t._v(" "),t.plat_clmShow?a("el-table-column",{attrs:{prop:"id",label:"ID"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"caption",label:"权限名称"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.resetForm("platformEdit")}}},[t._v("重 置")]),t._v(" "),a("el-button",{on:{click:function(e){return t.closeBox()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("platformEdit")}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{staticClass:"account-plat-dialog",attrs:{visible:t.platformUserOrgVisible,"close-on-press-escape":!1,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(e){t.platformUserOrgVisible=e}}},[a("div",{staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold"},attrs:{slot:"title"},slot:"title"},[a("span",[t._v("平台用户机构授权")])]),t._v(" "),a("div",[a("el-card",{staticClass:"account-plat-card1 account-plat-card2",staticStyle:{"background-color":"#d6d6d6"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("用户信息")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("分配机构信息")])])],1)],1),t._v(" "),a("el-card",[a("el-container",{staticStyle:{height:"60vh"}},[a("el-aside",{attrs:{width:"50%"}},[a("el-form",{ref:"platformOrg",staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold","margin-top":"100px"},attrs:{"label-width":"130px"}},[a("el-form-item",{attrs:{label:"登录标识",prop:"cui_login_id"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{disabled:""},model:{value:this.loginIdByOrg,callback:function(e){t.$set(this,"loginIdByOrg",e)},expression:"this.loginIdByOrg"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"cui_realname"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{disabled:""},model:{value:this.realNameByOrg,callback:function(e){t.$set(this,"realNameByOrg",e)},expression:"this.realNameByOrg"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"ID",prop:"cui_uuid"}},[a("el-input",{model:{value:this.userIdByOrg,callback:function(e){t.$set(this,"userIdByOrg",e)},expression:"this.userIdByOrg"}})],1)],1)],1),t._v(" "),a("el-container",[a("el-tree",{ref:"OrgTree",staticStyle:{height:"calc(100vh)",width:"100%"},attrs:{data:t.treeData,"check-strictly":!0,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:{children:"detail",label:"caption"}},on:{check:t.handleCheck}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.resetForm("platformOrg")}}},[t._v("重 置")]),t._v(" "),a("el-button",{on:{click:function(e){t.platformUserOrgVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitUserOrg}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{staticClass:"account-plat-dialog",attrs:{visible:t.platformUserBtnVisible,"close-on-press-escape":!1,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(e){t.platformUserBtnVisible=e}}},[a("div",{staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold"},attrs:{slot:"title"},slot:"title"},[a("span",[t._v("平台用户按钮授权")])]),t._v(" "),a("div",[a("el-card",{staticClass:"account-plat-card1 account-plat-card2",staticStyle:{"background-color":"#d6d6d6"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("用户信息")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("禁用按钮信息")]),t._v("("+t._s(this.btnNum)+")")])],1)],1),t._v(" "),a("el-card",[a("el-container",[a("el-aside",{attrs:{width:"50%"}},[a("el-form",{ref:"platformBtn",staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold","margin-top":"100px"},attrs:{"label-width":"130px"}},[a("el-form-item",{attrs:{label:"登录标识",prop:"cui_login_id"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{disabled:""},model:{value:this.loginIdByOrg,callback:function(e){t.$set(this,"loginIdByOrg",e)},expression:"this.loginIdByOrg"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"cui_realname"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{disabled:""},model:{value:this.realNameByOrg,callback:function(e){t.$set(this,"realNameByOrg",e)},expression:"this.realNameByOrg"}})],1)],1)],1),t._v(" "),a("el-container",[a("el-table",{key:t.refreshTableData,ref:"platBtnTreeTable",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{height:"410",data:t.tableBtnTreeData,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"detail",hasChildren:"hasChildren"}},on:{"select-all":t.tableBtnTreeSelectAll,select:t.tableBtnTreeSingleSelect,"selection-change":t.tableBtnTreeSelectChange}},[a("el-table-column",{attrs:{type:"selection",selectable:t.isSelect,width:"50"}}),t._v(" "),t.plat_clmShow?a("el-table-column",{attrs:{prop:"id",label:"ID"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"caption",label:"按钮名称"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.resetForm("platformBtn")}}},[t._v("重 置")]),t._v(" "),a("el-button",{on:{click:function(e){t.platformUserBtnVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitUserBtn}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var h=a("VU/8")(p,m,!1,function(t){a("oIzD"),a("Txbb")},"data-v-9fe5bc12",null);e.default=h.exports},oIzD:function(t,e){}});
//# sourceMappingURL=26.74524cb4e978f27fe487.js.map