{"version":3,"sources":["webpack:///src/components/index/right/DeviceGraphExample.vue","webpack:///./src/components/index/right/DeviceGraphExample.vue?1bb1","webpack:///./src/components/index/right/DeviceGraphExample.vue"],"names":["DeviceGraphExample","name","mounted","this","dragControllerDiv","init","data","graphJson","graphJsonClone","selectBtn","sceneModel","currentNode","undefined","currentContainer","publicScene","publicStage","dialogFormVisible1","publicRows","map_default","a","publicNodes","methods","canvas","document","getElementById","stage","JTopo","Stage","eagleEye","visible","scene","Scene","alpha","backgroundColor","mode","createNode","jsonObj","graphId","that","node","TextNode","type","setLocation","setSize","showSelected","paintSelected","save","beginPath","strokeStyle","fillStyle","arc","width","Math","PI","fill","stroke","closePath","restore","console","info","addEventListener","event","dragable","target","text","add","createContainerForNode","containerForNode","Container","id","textPosition","fontColor","font","fillColor","borderColor","setBound","parseFloat","x","y","height","status","gridLayout","layout","GridLayout","n1","set","createRowContainer","container","rowsDetail","detail","i1","length","createRowContainer1","parseInt","w","h","autoDraw","clear","removeAllNodes","JSON","parse","row","saveGraph","findNode","centerAndZoom","size","zoomOut","zoomIn","get","stringify_default","find","rows","i2","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","next","done","_ref","value","_ref2","slicedToArray_default","key","log","remove","err","return","resize","getElementsByClassName","left","mid","box","_loop","i","onmousedown","e","style","background","startX","clientX","offsetLeft","onmousemove","endX","moveLen","maxT","clientWidth","offsetWidth","j","onmouseup","evt","releaseCapture","setCapture","right_DeviceGraphExample","render","_vm","_h","$createElement","_c","_self","ref","staticClass","staticStyle","min-width","margin-bottom","attrs","gutter","span","text-align","_v","effect","content","placement","on","click","placeholder","model","callback","$$v","expression","title","max-width","close-on-press-escape","close-on-click-modal","show-close","update:visible","$event","font-size","font-weight","slot","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/46.11e355fcef6472c42d0e.js","sourcesContent":["<template>\n  <div class=\"box\" ref=\"box\">\n\n      <!--    <el-container >-->\n<!--      <el-aside  width=\"30%\">-->\n        <div class=\"left\" style=\"min-width: 30%;\" >\n\n          <el-row :gutter=\"12\" style=\"margin-bottom:10px;\">\n            <el-col :span=\"4\"> <span style=\"text-align: center;\">结构体</span></el-col>\n            <el-col :span=\"4\">\n              <el-tooltip   effect=\"dark\" content=\"转换成货道图\" placement=\"bottom\">\n                <el-button size=\"small\" class=\"el-icon-right\" @click=\"autoDraw\"></el-button>\n              </el-tooltip>\n            </el-col>\n            <el-col :span=\"4\">\n              <el-tooltip   effect=\"dark\" content=\"保存\" placement=\"bottom\">\n                <el-button size=\"small\" class=\"el-icon-check\"  @click=\"saveGraph\"></el-button>\n              </el-tooltip>\n\n            </el-col>\n            <el-col :span=\"4\">\n              <el-tooltip   effect=\"dark\" content=\"居中\" placement=\"bottom\">\n                <el-button size=\"small\" class=\"el-icon-aim\"  @click=\"centerAndZoom\"></el-button>\n              </el-tooltip>\n            </el-col>\n            <el-col :span=\"4\">\n              <el-tooltip   effect=\"dark\" content=\"放大\" placement=\"bottom\">\n                <el-button size=\"small\" class=\"el-icon-zoom-in\"  @click=\"zoomOut\"></el-button>\n              </el-tooltip>\n            </el-col>\n            <el-col :span=\"4\">\n              <el-tooltip   effect=\"dark\" content=\"缩小\" placement=\"bottom\">\n                <el-button size=\"small\" class=\"el-icon-zoom-out\"  @click=\"zoomIn\"></el-button>\n              </el-tooltip>\n            </el-col>\n          </el-row>\n\n          <el-input\n            type=\"textarea\"\n            :rows=\"40\"\n            placeholder=\"请输入内容\"\n            v-model=\"graphJson\">\n          </el-input>\n\n        </div>\n\n\n<!--      </el-aside>-->\n\n      <div class=\"resize\" title=\"收缩侧边栏\">\n        ⋮\n      </div>\n\n      <div class=\"mid\"  style=\"max-width: 70%;\">\n        <el-row :gutter=\"12\" >\n          <el-col :span=\"24\"> <span style=\"text-align: center;\">货道图</span></el-col>\n        </el-row>\n<!--        <el-main style=\"display: flex;align-items: flex-start;padding:0px;margin: 0px;\">-->\n          <canvas width=\"700\" height=\"800\" id=\"canvas_graph\"></canvas>\n<!--        </el-main>-->\n      </div>\n<!--    </el-container>-->\n\n\n\n    <el-dialog  :visible.sync=\"dialogFormVisible1\"\n                :close-on-press-escape=\"false\"\n                :close-on-click-modal=\"false\"\n                :show-close=\"true\"\n\n    >\n      <div slot=\"title\"  style=\"text-align: left;font-size:20px;font-weight: bold;\">\n        <span  >{{  }}</span>\n        <span  >{{  }}</span>\n      </div>\n\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nexport default {\nname: \"DeviceGraphExample.vue\",\n  mounted:function(){\n    this.dragControllerDiv();\n    this.init();\n  },\n  data(){\n    return{\n      graphJson:\"{}\",\n      graphJsonClone:{},\n      selectBtn:\"select\",\n      sceneModel : \"nodrag\",//\"edit\"，“select”，“nodrag”\n      currentNode:undefined,\n      currentContainer:undefined,\n      publicScene :null,\n      publicStage :null,\n      dialogFormVisible1:false,\n      publicRows:new Map(),\n      publicNodes:new Map(),\n    }\n  },\n  methods:{\n    init(){\n        let that = this;\n        let canvas = document.getElementById(\"canvas_graph\");\n        let stage = new JTopo.Stage(canvas);\n        stage.eagleEye.visible = false;\n        // stage.wheelZoom = 1.2; //缩放比例\n       //stage.centerAndZoom();//缩放并居中显示所有元素\n        let scene = new JTopo.Scene(stage);\n        // scene.background = '/static/bg.png';\n        scene.alpha = 1;\n        scene.backgroundColor = '63,74,89';//63,74,89黑色；255,255,255白色\n        //例如：stage.mode = \"drag\";\n        //normal[默认]：可以点击选中单个节点（按住Ctrl可以选中多个），点中空白处可以拖拽整个画面\n        //drag: 该模式下不可以选择节点，只能拖拽整个画面\n        //nodrag :不允许拖拽\n        //select: 可以框选多个节点、可以点击单个节点\n        //edit: 在默认基础上增加了：选中节点时可以通过6个控制点来调整节点的宽、高\n        scene.mode= that.sceneModel;//\n        that.publicScene = scene;\n        that.publicStage = stage;\n\n\n    },\n    /**\n     {\"graphcount\":\"6\",\"detail\":[\n        {\"row\":\"1\",\"x\":\"1\",\"y\":\"1\",\"width\":\"600\",\"height\":\"50\",\"detail\":[\n          {\"x\":\"1\",\"y\":\"1\",\"id\":\"1\",\"type\":\"弹簧\",\"width\":\"100\",\"height\":\"50\",\"status\":\"正常\"},\n          {\"x\":\"1\",\"y\":\"2\",\"id\":\"2\",\"type\":\"弹簧\",\"width\":\"100\",\"height\":\"50\",\"status\":\"正常\"},\n          {\"x\":\"1\",\"y\":\"3\",\"id\":\"3\",\"type\":\"弹簧\",\"width\":\"100\",\"height\":\"50\",\"status\":\"正常\"}\n        ]},\n        {\"row\":\"2\",\"x\":\"1\",\"y\":\"50\",\"width\":\"600\",\"height\":\"50\",\"detail\":[\n          {\"x\":\"2\",\"y\":\"1\",\"id\":\"11\",\"type\":\"履带\",\"width\":\"100\",\"height\":\"50\",\"status\":\"正常\"},\n          {\"x\":\"2\",\"y\":\"2\",\"id\":\"12\",\"type\":\"履带\",\"width\":\"100\",\"height\":\"50\",\"status\":\"正常\"},\n          {\"x\":\"2\",\"y\":\"3\",\"id\":\"13\",\"type\":\"履带\",\"width\":\"100\",\"height\":\"50\",\"status\":\"正常\"}\n        ]}\n        ]\n        }\n\n     * **/\n    createNode(jsonObj,graphId,scene){\n    // createNode(text,x,y,w,h,scene){\n      let that = this;\n      // let node = new JTopo.Node(text);\n      // var node = new JTopo.CircleNode(text);\n      var node = new JTopo.TextNode(jsonObj.type);\n      // var node = new JTopo.LinkNode(text);\n      // var node = new JTopo.PieChartNode(text);\n      node.setLocation(1,1);//x,y\n      node.setSize(20,20);//大小w,h\n      //node.setBound(1, 1, 20, 20);\n      // node.showSelected = true;\n      node.alpha = 1;//0.9\n      node.showSelected = false; // 不显示选中矩形\n\n      node.jsonObj = jsonObj;\n      node.graphId = graphId;\n\n\n      node.paintSelected = function (a){\t//修改节点选中样式\n        0 != this.showSelected &&\n        (a.save(), a.beginPath(), a.strokeStyle = \"rgba(218,221,221, 0)\",\n          a.fillStyle = \"rgba(218,221,221,0)\",\n          a.arc( 0, 0, this.width/2 + 3, 0, Math.PI*2, false),\n          a.fill(), a.stroke(), a.closePath(), a.restore())\n      };\n\n      console.info(\"创建货道\"+graphId+\",\"+jsonObj.type);\n\n      node.addEventListener(\"dbclick\", function(event){\n        node.dragable = !node.dragable;//是否允许拖动。\n        that.currentNode = event.target;\n        that.currentContainer = undefined;\n        console.info(\"货道text：\"+that.currentNode.text);\n        // that.$message({\n        //   type: 'info',\n        //   showClose: true,\n        //   duration:0,\n        //   dangerouslyUseHTMLString: true,\n        //   // iconClass:'el-icon-info',\n        //   message: '<spand style=\"color:black;\"> 已经选择的ID：'+this.currentNode.text +\"</spand>\"\n        // });\n        //that.dialogFormVisible1 = true;\n\n      });\n\n      scene.add(node);\n      return node;\n    },\n    createContainerForNode(jsonObj,scene){\n      let that = this;\n      let containerForNode = new JTopo.Container(jsonObj.id);\n      containerForNode.textPosition = 'Middle_Center';\n      containerForNode.fontColor = '255,255,255';//255,255,255白色\n      containerForNode.font = '18pt 微软雅黑';\n      containerForNode.fillColor = '128,128,128';// 0,176,0绿色；255,0,0红色；128,128,128灰色；255,255,255白色\n      containerForNode.borderColor = '255,0,0';\n      // containerForNode.borderRadius = 30; // 圆角\n      containerForNode.alpha = 1;//\n\n      containerForNode.setBound(parseFloat(jsonObj.x), parseFloat(jsonObj.y), parseFloat(jsonObj.width), parseFloat(jsonObj.height));\n      containerForNode.jsonObj = jsonObj;\n      containerForNode.graphId = jsonObj.id;\n      if(jsonObj.status==='正常'){\n        containerForNode.fillColor = '0,176,0';\n      }else if(jsonObj.status==='故障'){\n        containerForNode.fillColor = '255,0,0';\n      }else if(jsonObj.status==='未知'){\n        containerForNode.fillColor = '128,128,128';\n      }\n\n      // 流式布局（水平、垂直间隔均为10)\n      // var flowLayout = JTopo.layout.FlowLayout(10, 10);\n      // 网格布局(4行3列)\n      let gridLayout = JTopo.layout.GridLayout(4, 3);\n      //容器默认是没有固定大小的，是通过布局来实现的定位\n      containerForNode.layout = gridLayout;\n\n      //////\n        console.info(\"货道号:\"+jsonObj.id);\n        let n1 = this.createNode(jsonObj,jsonObj.id ,scene);\n        containerForNode.add(n1);\n\n      ////////\n\n      containerForNode.addEventListener(\"dbclick\", function(event){\n        containerForNode.dragable = !containerForNode.dragable;//是否允许拖动。\n        that.currentContainer = event.target;\n        that.currentNode = undefined;\n        console.info(\"货道容器：\"+that.currentContainer.text);\n        // that.$message({\n        //   type: 'info',\n        //   showClose: true,\n        //   duration:0,\n        //   dangerouslyUseHTMLString: true,\n        //   // iconClass:'el-icon-info',\n        //   message: '<spand style=\"color:black;\"> 已经选择的ID：'+this.currentContainer.text +\"</spand>\"\n        // });\n        that.dialogFormVisible1 = true;\n\n      });\n\n      this.publicNodes.set(jsonObj.id,containerForNode);\n      scene.add(containerForNode);\n      return containerForNode;\n    },\n    createRowContainer(jsonObj,scene){\n      let that = this;\n      // let container = new JTopo.Container(jsonObj.row);\n      let container = new JTopo.Container();\n      container.textPosition = 'Middle_Center';\n      container.fontColor = '100,255,0';\n      container.font = '18pt 微软雅黑';\n      container.fillColor = '255,255,255';//255,255,255白色\n      container.borderColor = '255,0,0';\n      // container.borderRadius = 30; // 圆角\n\n      container.setBound(parseFloat(jsonObj.x), parseFloat(jsonObj.y), parseFloat(jsonObj.width), parseFloat(jsonObj.height));\n      //先加行容器\n      scene.add(container);\n\n      //container.jsonObj = jsonObj;\n      let rowsDetail = jsonObj.detail;\n      for(let i1=0;i1< rowsDetail.length;i1++){\n        let containerForNode = this.createContainerForNode(rowsDetail[i1],scene);\n        //行容器再加节点\n        container.add(containerForNode);\n      }\n\n      return container;\n    },\n    createRowContainer1(jsonObj,scene){\n      let that = this;\n      let container = new JTopo.Container(jsonObj.id);\n      container.textPosition = 'Middle_Center';\n      container.fontColor = '100,255,0';\n      container.font = '18pt 微软雅黑';\n      container.fillColor = '255,0,0';\n      container.borderColor = '255,0,0';\n      // container.borderRadius = 30; // 圆角\n\n// console.info(\"parseFloat\"+parseFloat(jsonObj.x));\n// console.info(\"parseInt\"+parseInt(jsonObj.x));\n      container.setBound(parseInt(jsonObj.x),parseInt(jsonObj.y),parseInt(jsonObj.w),parseInt(jsonObj.h));\n      scene.add(container);\n\n      return container;\n    },\n\n\n    autoDraw(){\n      this.publicScene.clear();\n       this.removeAllNodes();\n\n      let that = this;\n      let rowsDetail = JSON.parse( this.graphJson ).detail;\n      for(let i1=0;i1< rowsDetail.length;i1++){\n            console.info(\"行号:\"+rowsDetail[i1].row);\n            let rowsNodeDetail = rowsDetail[i1].detail;\n            let row = this.createRowContainer(rowsDetail[i1],this.publicScene);\n\n            this.publicRows.set(rowsDetail[i1].row,row)　;\n\n      }\n      // this.createRowContainer1( {\"id\":\"1\",\"x\":\"1.1\",\"y\":\"1\",\"w\":\"100\",\"h\":\"50\"},this.publicScene);\n      // this.createRowContainer1( {\"id\":\"2\",\"x\":\"110\",\"y\":\"1\",\"w\":\"100\",\"h\":\"50\"},this.publicScene);\n      // this.createRowContainer1( {\"id\":\"3\",\"x\":\"220\",\"y\":\"1\",\"w\":\"100\",\"h\":\"50\"},this.publicScene);\n    },\n    saveGraph(){\n      // console.info(\"货道内容：\"+JSON.stringify(this.publicNodes.get(\"1\")));\n      this.findNode(\"2\",\"0,176,0\");\n      this.findNode(\"11\",\"255,0,0\");\n      this.findNode(\"33\",\"255,0,0\");\n      this.findNode(\"42\",\"255,0,0\");\n      this.findNode(\"56\",\"255,0,0\");\n    },\n    centerAndZoom(){\n      if(this.publicRows.size>0 ){\n        this.publicStage.centerAndZoom();\n      }else{\n        console.info(\"请先生成货道图\");\n      }\n\n    },\n    zoomOut(){\n\n      if(this.publicRows.size>0 ){\n        this.publicStage.zoomOut();\n      }else{\n        console.info(\"请先生成货道图\");\n      }\n    },\n    zoomIn(){\n\n      if(this.publicRows.size>0 ){\n        this.publicStage.zoomIn();\n      }else{\n        console.info(\"请先生成货道图\");\n      }\n    },\n    findNode(graphId,fillColor){\n      // let container = this.publicNodes.get(\"1\");\n      // container.text =\"10000\" ;\n      // console.info(\"货道内容：\"+JSON.stringify(this.publicNodes.get(\"1\")));\n      // for(let i1=0;i1<container.childs.length;i1++){\n      //   if(container.childs[i1].graphId==='1'){\n      //     console.info(\"找到节点\"+container.childs[i1].jsonObj);\n      //     container.childs[i1].text=\"找到\";\n      //     container.fillColor =\"0,176,0\";\n      //\n      //     break;\n      //   }\n      // }\n\n      let container = this.publicNodes.get(graphId);\n\n        if(container.graphId===graphId){\n          console.info(\"找到节点\"+JSON.stringify( container.jsonObj ));\n          container.fillColor =fillColor;\n\n        }\n        //解析JSON数据对象\n        let find  = false;\n        // console.info(\"graphJson:\"+this.graphJson);\n\n        let rows = JSON.parse(this.graphJson).detail;\n      //console.info(\"rows:\"+rows);\n        for(let i1=0;i1<rows.length;i1++){\n            let row = rows[i1].detail;\n            for(let i2=0;i2<row.length;i2++){\n              if(row[i2].id===graphId){\n                find = true;\n                if(fillColor==='0,176,0'){\n                    row[i2].status='正常';\n                    //console.info(\"查询到货道号：\"+graphId+\",正常,row:\"+JSON.stringify(row[i2]));\n                }else if(fillColor==='255,0,0'){\n                    row[i2].status='故障';\n                    //console.info(\"查询到货道号：\"+graphId+\",故障,row:\"+JSON.stringify(row[i2]));\n                }\n\n                break;\n              }\n            }\n            if(find){\n              rows[i1].detail = row;\n              //console.info(\"已查询到:\"+JSON.stringify(rows[i1]));\n              break;\n            }\n        }\n        this.graphJsonClone = JSON.parse(this.graphJson);\n        this.graphJsonClone.detail = rows;\n        this.graphJson = JSON.stringify(this.graphJsonClone);\n        //console.info(\"graphJsonBak:\"+this.graphJson);\n\n\n    },\n    removeAllNodes(){\n      for(let [key,value] of this.publicRows){\n        console.log(\"key:\"+key,\"value:\"+value);\n        this.publicScene.remove(this.publicRows.get(key));\n      }\n\n\n    },\n    dragControllerDiv: function () {\n      var resize = document.getElementsByClassName('resize');\n      var left = document.getElementsByClassName('left');\n      var mid = document.getElementsByClassName('mid');\n      var box = document.getElementsByClassName('box');\n      for (let i = 0; i < resize.length; i++) {\n        // 鼠标按下事件\n        resize[i].onmousedown = function (e) {\n          //颜色改变提醒\n          resize[i].style.background = '#818181';\n          var startX = e.clientX;\n          resize[i].left = resize[i].offsetLeft;\n          // 鼠标拖动事件\n          document.onmousemove = function (e) {\n            var endX = e.clientX;\n            var moveLen = resize[i].left + (endX - startX); // （endx-startx）=移动的距离。resize[i].left+移动的距离=左边区域最后的宽度\n            var maxT = box[i].clientWidth - resize[i].offsetWidth; // 容器宽度 - 左边区域的宽度 = 右边区域的宽度\n\n            if (moveLen < 32) moveLen = 32; // 左边区域的最小宽度为32px\n            if (moveLen > maxT - 150) moveLen = maxT - 150; //右边区域最小宽度为150px\n\n            resize[i].style.left = moveLen; // 设置左侧区域的宽度\n\n            for (let j = 0; j < left.length; j++) {\n              left[j].style.width = moveLen + 'px';\n              mid[j].style.width = (box[i].clientWidth - moveLen - 10) + 'px';\n            }\n          };\n          // 鼠标松开事件\n          document.onmouseup = function (evt) {\n            //颜色恢复\n            resize[i].style.background = '#d6d6d6';\n            document.onmousemove = null;\n            document.onmouseup = null;\n            resize[i].releaseCapture && resize[i].releaseCapture(); //当你不在需要继续获得鼠标消息就要应该调用ReleaseCapture()释放掉\n          };\n          resize[i].setCapture && resize[i].setCapture(); //该函数在属于当前线程的指定窗口里设置鼠标捕获\n          return false;\n        };\n      }\n    },\n\n  }\n}\n</script>\n\n<style scoped>\n/* 拖拽相关样式 */\n/*包围div样式*/\n.box {\n  width: 100%;\n  height: 100%;\n  margin: 1% 0px;\n  overflow: hidden;\n  box-shadow: -1px 9px 10px 3px rgba(0, 0, 0, 0.11);\n}\n/*左侧div样式*/\n.left {\n  width: calc(32% - 10px);  /*左侧初始化宽度*/\n  height: 100%;\n  background: #FFFFFF;\n  float: left;\n}\n/*拖拽区div样式*/\n.resize {\n  cursor: col-resize;\n  float: left;\n  position: relative;\n  top: 45%;\n  background-color: #d6d6d6;\n  border-radius: 5px;\n  margin-top: -10px;\n  width: 10px;\n  height: 50px;\n  background-size: cover;\n  background-position: center;\n  /*z-index: 99999;*/\n  font-size: 32px;\n  color: white;\n}\n/*拖拽区鼠标悬停样式*/\n.resize:hover {\n  color: #444444;\n}\n/*右侧div'样式*/\n.mid {\n  float: left;\n  width: 68%;   /*右侧初始化宽度*/\n  height: 100%;\n  background: #fff;\n  box-shadow: -1px 4px 5px 3px rgba(0, 0, 0, 0.11);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/index/right/DeviceGraphExample.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"box\",staticClass:\"box\"},[_c('div',{staticClass:\"left\",staticStyle:{\"min-width\":\"30%\"}},[_c('el-row',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"gutter\":12}},[_c('el-col',{attrs:{\"span\":4}},[_c('span',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"结构体\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"转换成货道图\",\"placement\":\"bottom\"}},[_c('el-button',{staticClass:\"el-icon-right\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.autoDraw}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"保存\",\"placement\":\"bottom\"}},[_c('el-button',{staticClass:\"el-icon-check\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.saveGraph}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"居中\",\"placement\":\"bottom\"}},[_c('el-button',{staticClass:\"el-icon-aim\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.centerAndZoom}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"放大\",\"placement\":\"bottom\"}},[_c('el-button',{staticClass:\"el-icon-zoom-in\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.zoomOut}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"缩小\",\"placement\":\"bottom\"}},[_c('el-button',{staticClass:\"el-icon-zoom-out\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.zoomIn}})],1)],1)],1),_vm._v(\" \"),_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":40,\"placeholder\":\"请输入内容\"},model:{value:(_vm.graphJson),callback:function ($$v) {_vm.graphJson=$$v},expression:\"graphJson\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"resize\",attrs:{\"title\":\"收缩侧边栏\"}},[_vm._v(\"\\n        ⋮\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"mid\",staticStyle:{\"max-width\":\"70%\"}},[_c('el-row',{attrs:{\"gutter\":12}},[_c('el-col',{attrs:{\"span\":24}},[_c('span',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"货道图\")])])],1),_vm._v(\" \"),_c('canvas',{attrs:{\"width\":\"700\",\"height\":\"800\",\"id\":\"canvas_graph\"}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogFormVisible1,\"close-on-press-escape\":false,\"close-on-click-modal\":false,\"show-close\":true},on:{\"update:visible\":function($event){_vm.dialogFormVisible1=$event}}},[_c('div',{staticStyle:{\"text-align\":\"left\",\"font-size\":\"20px\",\"font-weight\":\"bold\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',[_vm._v(_vm._s())]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s())])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5dd8e06d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/index/right/DeviceGraphExample.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5dd8e06d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DeviceGraphExample.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeviceGraphExample.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeviceGraphExample.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5dd8e06d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./DeviceGraphExample.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5dd8e06d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/index/right/DeviceGraphExample.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}