webpackJsonp([22,38],{"7m2N":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("bOdI"),n=i.n(a),o=i("mvHQ"),s=i.n(o),r={name:"TransactionRecord",data:function(){return{scale:"scale(1)",options:[],value:"*",count_num:0,count:0,typeShow:!0,typeValue:1,totalRow:0,queryParam:{totalRow:0,currentPage:1,pageSize:this.customGlobal.pageSize},pickerOptions:{shortcuts:[{text:"近三十天",onClick:function(t){var e=(new Date).toLocaleString(),i=new Date((new Date).getTime()-2592e6).toLocaleString();i=i.substr(0,11)+"00:00:00",console.log("res==",i.substr(11,8)),t.$emit("pick",[i,e])}},{text:"当月",onClick:function(t){var e=(new Date).toLocaleString(),i=new Date((new Date).getFullYear(),(new Date).getMonth(),1).toLocaleString();console.log([i,e]),t.$emit("pick",[i,e])}}]},value1:[],value2:"",tableData:[]}},created:function(){Date.prototype.toLocaleString=function(){return this.getFullYear()+"-"+(this.getMonth()>9?this.getMonth()+1:"0"+(this.getMonth()+1))+"-"+(this.getDate()>9?this.getDate():"0"+this.getDate())+" "+(this.getHours()>9?this.getHours():"0"+this.getHours())+":"+(this.getMinutes()>9?this.getMinutes():"0"+this.getMinutes())+":"+(this.getSeconds()>9?this.getSeconds():"0"+this.getSeconds())};var t=(new Date).toLocaleString(),e=new Date((new Date).getTime()-2592e6).toLocaleString();e=e.substr(0,11)+"00:00:00",this.value1=[e,t],this.queryParam.currentPage=1,this.query_name(),this.queryList()},mounted:function(){var t=this.$refs.Transaction;this.scale="scale("+t.offsetWidth/600+")"},props:["msg","type","list"],watch:{"list.id":function(t){var e=(new Date).toLocaleString(),i=new Date((new Date).getTime()-2592e6).toLocaleString();i=i.substr(0,11)+"00:00:00",this.value1=[i,e],console.log(this.customGlobal.userInfoExt.cui_type,"==="),this.queryParam.currentPage=1,this.query_name(),this.queryList()}},methods:{changeClick:function(){this.queryParam.currentPage=1,this.query_name()},typeClick:function(t){switch(this.queryParam.currentPage=1,t){case 1:this.typeShow=!0;break;case 2:this.typeShow=!1}this.query_name()},handleCurrentChange:function(t){console.log("当前页: "+t),this.queryParam.currentPage=t,this.query_name()},queryList:function(t){var e=this;if(this.msg.type){var i=void 0,a=void 0;switch(a=this.type?this.list.type:this.customGlobal.userInfoExt.cui_type){case"0":i=this.list.id;break;case"1":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_bank_center_id;break;case"2":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_province_id;break;case"3":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_city_id;break;case"4":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_county_id;break;case"5":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_station_id}this.options=[{company_id:"*",company_name:"全部"}],console.log("--------------------------------------------------------------------------");var n={cui_type:a,company_id:i},o=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postQueryChildernCompanyList,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:s()(n)})).then(function(t){"success"===t.data.status?e.options=e.options.concat(t.data.rows):(console.info("查询失败"),o.close(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){o.close(),e.$alert(s()(t.message),"查询失败!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){console.log("异步调用失败返回:"+s()(t)),o.close(),e.$alert(s()(t.message),"查询失败",{confirmButtonText:"确定",callback:function(t){}})})}},query_name:function(t){var e=this;if(console.log("res==",this.list),this.value1){switch(t){case 1:this.queryParam.currentPage=1}console.log(this.msg,"---------------");var i=this;i.tableData=[];var a,o,r=void 0,c="",l="",u="",d="",_=void 0,p=void 0;switch(r=this.type?this.list.type:this.customGlobal.userInfoExt.cui_type){case"0":p=this.list.id;break;case"1":this.type?(p=this.list.id,c=this.list.id):(p=this.customGlobal.userInfoExt.cui_bank_center_id,c=this.customGlobal.userInfoExt.cui_bank_center_id);break;case"2":this.type?(p=this.list.id,l=this.list.id):(p=this.customGlobal.userInfoExt.cui_province_id,l=this.customGlobal.userInfoExt.cui_province_id);break;case"3":this.type?(p=this.list.id,u=this.list.id):(p=this.customGlobal.userInfoExt.cui_city_id,u=this.customGlobal.userInfoExt.cui_city_id);break;case"4":this.type?(p=this.list.id,d=this.list.id):(p=this.customGlobal.userInfoExt.cui_county_id,d=this.customGlobal.userInfoExt.cui_county_id);break;case"5":this.type?(p=this.list.id,this.list.id):(p=this.customGlobal.userInfoExt.cui_station_id,this.customGlobal.userInfoExt.cui_station_id)}if(this.msg.type)a={start_time:this.value1[0],end_time:this.value1[1],level:this.typeShow?"1":"2",bai_cui_type:r,perPageSize:i.queryParam.pageSize,currentPage:i.queryParam.currentPage},n()(a,this.msg.query_company_id,i.value),n()(a,this.msg.cur_company_id,p||"*"),_=a;else o={start_time:this.value1[0],end_time:this.value1[1],level:this.typeShow?"1":"2",bai_cui_type:r,perPageSize:i.queryParam.pageSize,currentPage:i.queryParam.currentPage},n()(o,this.msg.bank_center_id,c),n()(o,this.msg.province_id,l),n()(o,this.msg.city_id,u),n()(o,this.msg.county_id,d),n()(o,"flag",this.msg.flag?this.msg.flag:""),_=o;var h=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl[this.msg.api],this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:s()(_)})).then(function(t){"success"===t.data.status?(h.close(),e.count_num=t.data.rows1[0].count_num,i.tableData=t.data.rows,i.totalRow=t.data.total,1==i.queryParam.currentPage&&i.tableData.length>0&&(e.count=i.tableData[0].count_num)):(console.info("查询失败"),h.close(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){h.close(),e.$alert(s()(t.message),"查询失败!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){console.log("异步调用失败返回:"+s()(t)),h.close(),e.$alert(s()(t.message),"查询失败",{confirmButtonText:"确定",callback:function(t){}})})}else this.$message({message:"日期不可为空!",type:"warning"})}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"Transaction",staticClass:"TransactionRecord"},[t.type?i("el-card",{staticClass:"box1"},[i("div",{staticClass:"nav_bar"},[i("div",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.msg.name))]),t._v(" "),i("div",{staticClass:"box_1",staticStyle:{color:"rgb(66, 189, 243)",cursor:"pointer"}},[t._v("注释\n        "),i("div",{staticClass:"box_2"},[i("div",[t._v(t._s(t.msg.notes))])])])]),t._v(" "),i("div",{staticStyle:{display:"flex","margin-top":"15px"}},[i("el-date-picker",{staticClass:"dataInput",attrs:{type:"datetimerange","picker-options":t.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v(" "),i("div",[i("el-button",{staticStyle:{height:"25px","line-height":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.query_name(1)}}},[t._v("查询\n        ")])],1)],1),t._v(" "),t.msg.type?i("div",{staticStyle:{display:"flex","margin-top":"15px","font-size":"12px"}},[i("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:t.changeClick},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return i("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}})}),1)],1):i("div",{staticClass:"nav_title"},[i("div",{class:{colorSize:t.typeShow,size:!0},on:{click:function(e){return t.typeClick(1)}}},[t._v("看下级行")]),t._v(" "),i("div",{class:{colorSize:!t.typeShow,size:!0},on:{click:function(e){return t.typeClick(2)}}},[t._v("看网点")])]),t._v(" "),i("div",{staticClass:"title"},[i("div",{staticStyle:{"margin-right":"30px","line-height":"32px",display:"flex"}},[t._v("总计：\n        "),i("div",{staticStyle:{"min-width":"25px","margin-right":"5px","text-align":"center"}},[i("span",{staticClass:"colorSize"},[t._v(t._s(t.count_num))])]),t._v(t._s(t.msg.Company)+"\n      ")]),t._v(" "),i("el-pagination",{attrs:{small:"",background:"",layout:"prev, pager, next",total:t.totalRow},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),i("div",{staticStyle:{width:"100%","margin-top":"15px"}},t._l(t.tableData,function(e,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"8px"}},[i("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between","font-size":"12px"}},[i("div",[t._v(" "+t._s(t.queryParam.currentPage>1?10*(t.queryParam.currentPage-1)+a+1:a+1)+" 　\n            "),t.msg.type?i("span",[t._v(t._s(e.bmi_mer_name)+"(")]):t._e(),t._v(t._s(e.company_name)),t.msg.type?i("span",[t._v(")")]):t._e()]),t._v(" "),i("div",[t._v(t._s("元"==t.msg.Company?e.count_num.toFixed(2):e.count_num))])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"10px","background-color":"rgb(215, 215, 215)"}},[i("div",{style:{width:("0"==e.count_num?0:e.count_num/t.count*100)+"%","background-color":"#00bfbf",height:"10px"}})])])}),0)]):i("el-card",{staticClass:"box2"},[i("div",{staticClass:"nav_bar"},[i("div",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.msg.name))]),t._v(" "),i("div",{staticClass:"box_1",staticStyle:{color:"rgb(66, 189, 243)",cursor:"pointer"}},[t._v("注释\n        "),i("div",{staticClass:"box_2"},[i("div",[t._v(t._s(t.msg.notes))])])])]),t._v(" "),i("div",{staticStyle:{display:"flex","margin-top":"15px"}},[i("el-date-picker",{staticClass:"dataInput",attrs:{type:"datetimerange","picker-options":t.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v(" "),i("div",[i("el-button",{staticStyle:{height:"25px","line-height":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.query_name(1)}}},[t._v("查询\n        ")])],1)],1),t._v(" "),t.msg.type?i("div",{staticStyle:{display:"flex","margin-top":"15px","font-size":"12px"}},[i("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:t.changeClick},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return i("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}})}),1)],1):i("div",{staticClass:"nav_title"},[i("div",{class:{colorSize:t.typeShow,size:!0},on:{click:function(e){return t.typeClick(1)}}},[t._v("看下级行")]),t._v(" "),i("div",{class:{colorSize:!t.typeShow,size:!0},on:{click:function(e){return t.typeClick(2)}}},[t._v("看网点")])]),t._v(" "),i("div",{staticClass:"title"},[i("div",{staticStyle:{"margin-right":"30px","line-height":"32px",display:"flex"}},[t._v("总计：\n        "),i("div",{staticStyle:{"min-width":"25px","margin-right":"5px","text-align":"center"}},[i("span",{staticClass:"colorSize"},[t._v(t._s(t.count_num))])]),t._v(t._s(t.msg.Company)+"\n      ")]),t._v(" "),i("div",{staticStyle:{"text-align":"left"}},[i("el-pagination",{attrs:{small:"",background:"",layout:"prev, pager, next",total:t.totalRow},on:{"current-change":t.handleCurrentChange}})],1)]),t._v(" "),i("div",{staticStyle:{width:"100%","margin-top":"15px"}},t._l(t.tableData,function(e,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"8px"}},[i("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between","font-size":"12px"}},[i("div",[t._v(" "+t._s(t.queryParam.currentPage>1?10*(t.queryParam.currentPage-1)+a+1:a+1)+" 　\n            "),t.msg.type?i("span",[t._v(t._s(e.bmi_mer_name)+"(")]):t._e(),t._v(t._s(e.company_name)),t.msg.type?i("span",[t._v(")")]):t._e()]),t._v(" "),i("div",[t._v(t._s("元"==t.msg.Company?e.count_num.toFixed(2):e.count_num))])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"10px","background-color":"rgb(215, 215, 215)"}},[i("div",{style:{width:("0"==e.count_num?0:e.count_num/t.count*100)+"%","background-color":"#00bfbf",height:"10px"}})])])}),0)])],1)},staticRenderFns:[]};var l=i("VU/8")(r,c,!1,function(t){i("YhqH")},"data-v-b4581220",null);e.default=l.exports},XhIO:function(t,e){},YhqH:function(t,e){},oDF4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("fZjL"),n=i.n(a),o=i("BO1k"),s=i.n(o),r=i("mvHQ"),c=i.n(r),l=i("Vhou"),u={name:"TransactionRecord",data:function(){return{activeName:"first",list:{id:"0",type:"0"},type:!1,couponTableList:[],convenientPaymentTableList:[],dialogFormVisible1:!1,editableTabs:[],communityRows:[],cbInfo:{},oldCbInfo:{},dialogLeft:0,dialogTop:0,curTreeNode:null,curTreeData:null,icon1:"el-icon-caret-left",showTree:!0,currentSelTreeNodeId:"",currentSelTreeNodeIds:[],treeDataStatus:{},treeData:[],defaultTreeKey:[]}},components:{componentTable:i("7m2N").default},created:function(){this.couponTableList=[{name:"优惠券发放情况（领券数）",notes:"成功被领取的优惠券数量，反映了下级机构/网点的推广情况及客户参与情况。",api:"postQueryGetTicketNumberReport",bank_center_id:"bauti_bank_center_id",province_id:"bauti_province_id",city_id:"bauti_city_id",county_id:"bauti_county_id",Company:"张"},{name:"优惠券使用情况（用券数）",notes:"客户使用的优惠券数量，反映了客户对网点所提供优惠券的满意度。",api:"postQueryCheckTicketNumberReport",bank_center_id:"bauti_bank_center_id",province_id:"bauti_province_id",city_id:"bauti_city_id",county_id:"bauti_county_id",Company:"张"},{name:"客户领券数（以商户为单位统计）",notes:"客户领券数，反映了客户对商户期待值和喜好值。",api:"postQueryGetTicketNumberReportForMer",query_company_id:"query_company_id",cur_company_id:"cur_company_id",type:"1",Company:"张"},{name:"客户到店数（以商户为单位统计）",notes:"客户到店数，反映了银行为商家的引流情况，数量越大，表明对商家的经营助力越大。",api:"postQueryCheckTicketNumberReportForMer",query_company_id:"query_company_id",cur_company_id:"cur_company_id",type:"1",Company:"张"},{name:"信用卡激活人次",notes:"信用卡激活人次，即为使用微信绑定信用卡支付并成功领券人次。",api:"postQueryGetDebitOrCreditNumberReport",bank_center_id:"bauti_bank_center_id",province_id:"bauti_province_id",city_id:"bauti_city_id",county_id:"bauti_county_id",flag:"2",Company:"人次"},{name:"储蓄卡激活人次",notes:"储蓄卡激活人次，即为使用微信绑定储蓄卡支付并成功领券人次。",api:"postQueryGetDebitOrCreditNumberReport",bank_center_id:"bauti_bank_center_id",province_id:"bauti_province_id",city_id:"bauti_city_id",county_id:"bauti_county_id",flag:"1",Company:"人次"}],this.convenientPaymentTableList=[{name:"支付笔数",notes:"支付笔数，反映了移动便民示范工程开展效果。",api:"Total_payment_business_Kanban",bank_center_id:"obj_bank_center_id",province_id:"obj_province_id",city_id:"obj_city_id",county_id:"obj_county_id",Company:"笔"},{name:"支付金额",notes:"支付金额，反映了移动便民示范工程交易金额。",api:"Payment_amount_Kanban",bank_center_id:"obj_bank_center_id",province_id:"obj_province_id",city_id:"obj_city_id",county_id:"obj_county_id",Company:"元"},{name:"特惠价参与人次",notes:"特惠价参与人次，即网点为推广手机银行、信用卡激活等给予客户的特惠价支付次数，反映了手机银行等业务的客户体验情况。一般指定客户参与，并限制单人参与次数。",api:"Special_discount_participants",bank_center_id:"obj_bank_center_id",province_id:"obj_province_id",city_id:"obj_city_id",county_id:"obj_county_id",Company:"人次"},{name:"优惠价参与人次",notes:"优惠价参与人次=网点商品优惠价支付人次+入驻商户商品优惠价支付人次，优惠价为银行为客户提供的低于市场价购买的权益，一般不指定客户参与，并不限制数量。",api:"Preferential_price_participants",bank_center_id:"obj_bank_center_id",province_id:"obj_province_id",city_id:"obj_city_id",county_id:"obj_county_id",Company:"人次"},{name:"服务费收入",notes:"服务费为商户在移动支付体验机中售卖的商品（含网点交付的和到店兑换的）向银行支付的营销服务费，网点可对入驻的商户设置每笔交易服务费所占比例。",api:"Service_fee_income_amount",bank_center_id:"obj_bank_center_id",province_id:"obj_province_id",city_id:"obj_city_id",county_id:"obj_county_id",Company:"元"}],this.convenientPaymentList=[{name:"抽奖活动人次",notes:"客户参与“抽福袋”功能活动人次。",api:"Number_of_participants_in_lottery",bank_center_id:"obj_bank_center_id",province_id:"obj_province_id",city_id:"obj_city_id",county_id:"obj_county_id",Company:"人次"}],this.initOrgTemplateInfo(),this.type="0"==this.customGlobal.userInfoExt.cui_type},watch:{currentSelTreeNodeId:function(t,e){t!==e&&l.a.$emit("globalMsgForCommunityBuilder",{community:{ci_uuid:"",ci_community_name:""},builder:{bi_build_number:"",bi_uuid:""}})}},methods:{handleClick:function(t,e){console.log(t,e)},removeTreeNode:function(t,e){var i=t.parent,a=i.data.detail||i.data,n=a.findIndex(function(t){return t.id===e.id});a.splice(n,1)},initTreeDataStatus:function(t,e){var i=this,a=e.node,o=e.data;e.store;if("{}"===c()(this.treeDataStatus))return 4e3===o.type?t("span",{style:"font-size:14px;"},[t("span",[o.caption]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return i.showOrgInfo(o,a,t)}}},["选择"])]):t("span",{style:"font-size:14px;"},[t("span",[o.caption])]);var r=!1,l=!0,u=!1,d=void 0;try{for(var _,p=s()(n()(this.treeDataStatus));!(l=(_=p.next()).done);l=!0){var h=_.value;if(o.id===h)return 4e3===o.type?t("span",{style:"font-size:14px;"},[t("span",[o.caption]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return i.showOrgInfo(o,a,t)}}},["选择"])]):t("span",{style:"font-size:14px;"},[t("span",[o.caption])])}}catch(t){u=!0,d=t}finally{try{!l&&p.return&&p.return()}finally{if(u)throw d}}if(!1===r){if("0"===o.id)return t("span",{style:"font-size:14px;"},[t("span",[o.caption])]);this.removeTreeNode(a,o)}},initOrgTemplateInfo:function(){var t=this;this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postQueryOrganTemplate,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:c()({config:"all",username:this.customGlobal.userInfoExt.cui_login_id})})).then(function(e){console.log("异步调用成功返回:"+c()(e)),"success"==e.data.status?("0"===t.customGlobal.userInfoExt.cui_type?t.treeData=[JSON.parse(e.data.organ)]:t.treeData=JSON.parse(e.data.organ).detail,t.treeDataStatus=JSON.parse(e.data.orgkey),console.info("treeData:"+c()(t.treeData)),console.info("treeDataStatus:"+c()(t.treeDataStatus))):(console.info("查询失败"),"请登录认证"===e.data.msg&&"failed"===e.data.status?t.$router.replace({path:"/login"}):(t.treeData=[JSON.parse(e.data.organ)],t.treeDataStatus=JSON.parse(e.data.orgkey))),function t(e){for(var i=0;e&&i<e.length;i++){var a=e[i];Array.isArray(a.detail)&&a.detail.length>0&&t(a.detail),"5"==a.type&&(e.splice(i,1),i--)}}(t.treeData[0].detail)},function(e){console.log("异步调用出错:"+c()(e)),t.$alert(c()(e.message),"查询出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){console.log("异步调用失败返回:"+c()(e)),t.$alert(c()(e.message),"查询出错",{confirmButtonText:"确定",callback:function(t){}})})},showOrgInfo:function(t,e,i){null!==this.$refs.org_tree.getCurrentKey()&&this.$refs.org_tree.getCurrentKey()===t.id&&i.stopPropagation(),this.curTreeData=t,this.curTreeNode=e,this.dialogFormVisible1=!0,console.info("e.pageX :"+i.pageX),console.info("e.clientX :"+i.clientX);var a=i.target.getBoundingClientRect();console.info("rect.left:"+a.left),console.info("rect.top:"+a.top),this.dialogLeft=a.left+10,this.dialogTop=a.top/2},showHiddenTree:function(){this.showTree?this.icon1="el-icon-caret-right":this.icon1="el-icon-caret-left",this.showTree=!this.showTree,console.info("是否显示："+this.showTree)},handleTreeNodeClick:function(t,e){4!==t.type&&!0===this.dialogFormVisible1&&(this.dialogFormVisible1=!1),this.list=t,console.log("2点击事件,可在此处理对应逻辑_data:",t);var i=[],a=[],n=[],o=[];i.push(this.$refs.org_tree.getCurrentNode().caption),a.push(this.$refs.org_tree.getCurrentNode().id),n.push(this.$refs.org_tree.getCurrentNode().type+""),o.push({id:this.$refs.org_tree.getCurrentNode().id,caption:this.$refs.org_tree.getCurrentNode().caption,type:this.$refs.org_tree.getCurrentNode().type+""}),this.getTreeNodeParentCaption(i,a,n,o,this.$refs.org_tree.getCurrentNode());this.$refs.org_tree.getNode(this.$refs.org_tree.getCurrentNode()).level;if(this.currentSelTreeNodeId!==this.$refs.org_tree.getCurrentKey()){this.currentSelTreeNodeId=this.$refs.org_tree.getCurrentKey();for(var s=0;s<i.length;s++)i[s]=this.customGlobal.encrypt(i[s],this.customGlobal.cryptoKey);this.$router.push({name:"org_query_bank",path:"/org_query_bank",query:{orgid:this.currentSelTreeNodeId,caption:i.reverse(),id:a.reverse(),cur_obj:{orgid:this.currentSelTreeNodeId,caption:this.$refs.org_tree.getCurrentNode().caption,type:this.$refs.org_tree.getCurrentNode().type+""},type:n.reverse(),obj:o.reverse(),cb_info:this.cbInfo}}),this.currentSelTreeNodeIds=a.reverse(),console.info("2currentSelTreeNodeIds:"+this.currentSelTreeNodeIds)}else{l.a.$emit("globalMsgForCommunityBuilder",{community:{ci_uuid:"",ci_community_name:""},builder:{bi_build_number:"",bi_uuid:""}}),this.cbInfo={community:{ci_uuid:"",ci_community_name:""},builder:{bi_build_number:"",bi_uuid:""}},this.currentSelTreeNodeId=this.$refs.org_tree.getCurrentKey();for(s=0;s<i.length;s++)i[s]=this.customGlobal.encrypt(i[s],this.customGlobal.cryptoKey);this.$router.push({name:"org_query_bank",path:"/org_query_bank",query:{orgid:this.currentSelTreeNodeId,caption:i.reverse(),id:a.reverse(),cur_obj:{orgid:this.currentSelTreeNodeId,caption:this.$refs.org_tree.getCurrentNode().caption,type:this.$refs.org_tree.getCurrentNode().type+""},type:n.reverse(),obj:o.reverse(),cb_info:this.cbInfo}}),this.currentSelTreeNodeIds=a.reverse(),console.info("3currentSelTreeNodeIds:"+this.currentSelTreeNodeIds)}},getTreeNodeParentCaption:function(t,e,i,a,n){for(var o=this.$refs.org_tree.getNode(n),s=o.level,r=1;r<s;)void 0!==o.parent&&(t.push(o.parent.label),e.push(o.parent.key),i.push(o.parent.data.type+""),a.push({id:o.parent.key,caption:o.parent.label,type:o.parent.data.type+""}),o=this.$refs.org_tree.getNode(o.parent),r++);return{label:t,key:e,type:i,obj:a}}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.type?i("div",{staticClass:"new-tree1 new-tree2"},[i("el-card",{staticClass:"new-card1 new-card2",attrs:{shadow:"always"}},[i("el-container",{staticStyle:{width:"100%",border:"1px solid #eee"}},[t.showTree?i("el-aside",{staticStyle:{height:"calc(100vh - 125px)","background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[t.showTree?i("el-tree",{ref:"org_tree",staticStyle:{height:"calc(100vh - 125px)"},attrs:{data:t.treeData,"default-expanded-keys":t.defaultTreeKey,"node-key":"id","highlight-current":"",props:{children:"detail",label:"caption"},"render-content":t.initTreeDataStatus},on:{"node-click":t.handleTreeNodeClick}}):t._e()],1):t._e(),t._v(" "),i("el-container",{staticStyle:{width:"100%",border:"1px solid #eee"}},[i("el-aside",{staticStyle:{height:"calc(100vh - 125px)","background-color":"rgb(238, 241, 246)"},attrs:{width:"25px"}},[i("i",{class:t.icon1,staticStyle:{height:"100%",display:"flex",width:"25px","flex-direction":"row","justify-content":"center","align-items":"center"},on:{click:t.showHiddenTree}})]),t._v(" "),i("el-main",{staticStyle:{height:"calc(100vh - 125px)","padding-top":"0px",overflow:"hidden"}},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"优惠券活动",name:"first"}},["first"==t.activeName?i("div",{staticClass:"coment"},t._l(t.couponTableList,function(e,a){return i("componentTable",{key:a,staticClass:"component",attrs:{msg:e,type:t.type,list:t.list}})}),1):t._e()]),t._v(" "),i("el-tab-pane",{attrs:{label:"移动支付便民示范工程",name:"second"}},["second"==t.activeName?i("div",{staticClass:"coment"},t._l(t.convenientPaymentTableList,function(e,a){return i("componentTable",{key:a,staticClass:"component",attrs:{msg:e,type:t.type,list:t.list}})}),1):t._e()]),t._v(" "),i("el-tab-pane",{attrs:{label:"抽奖活动",name:"third"}},["third"==t.activeName?i("div",{staticClass:"coment"},t._l(t.convenientPaymentList,function(e,a){return i("componentTable",{key:a,staticClass:"component",attrs:{msg:e,type:t.type,list:t.list}})}),1):t._e()])],1)],1)],1)],1)],1)],1):i("div",{staticClass:"TransactionRecord"},[i("div",{staticClass:"content"},[t._v("优惠券活动")]),t._v(" "),i("div",{staticClass:"box_c"},t._l(t.couponTableList,function(e,a){return i("componentTable",{key:a,staticClass:"box_c_c",attrs:{msg:e,type:t.type}})}),1),t._v(" "),i("div",{staticClass:"content"},[t._v("移动支付便民示范工程")]),t._v(" "),i("div",{staticClass:"box_c"},t._l(t.convenientPaymentTableList,function(e,a){return i("componentTable",{key:a,staticClass:"box_c_c",attrs:{msg:e,type:t.type}})}),1),t._v(" "),i("div",{staticClass:"content"},[t._v("抽奖活动")]),t._v(" "),i("div",{staticClass:"box_c"},t._l(t.convenientPaymentList,function(e,a){return i("componentTable",{key:a,staticClass:"box_c_c",attrs:{msg:e,type:t.type}})}),1)])},staticRenderFns:[]};var _=i("VU/8")(u,d,!1,function(t){i("XhIO")},"data-v-19b9455c",null);e.default=_.exports}});
//# sourceMappingURL=22.cc9209c881b16b899cb1.js.map