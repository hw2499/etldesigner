webpackJsonp([75],{"7g7M":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("mvHQ"),o=a.n(l),s={name:"NoSQLRWExample",methods:{handleTreeNodeClick:function(t,e){var a=this;console.info("type:"+t.type);var l=this;if("2"===t.type){this.key=t.caption;var s={db:this.currentDB,key:this.key},n=this.$loading({lock:!0,text:"查询中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient("/fr/postQueryRedisKeyValue",this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:o()(s)})).then(function(t){console.log("异步调用成功返回:"+o()(t)),"success"==t.data.status?(n.close(),l.value=t.data.value,l.ttl=t.data.ttl,l.type=t.data.type,"string"===l.type||"hash"===l.type&&(l.tableData=JSON.parse(t.data.value)),console.info(l.ttl)):(console.info("查询失败"),n.close(),a.$alert(t.data.msg,"查询失败",{confirmButtonText:"确定",callback:function(e){console.info("data:"+o()(t.data)),"请登录认证"===t.data.msg&&"failed"===t.data.status&&a.$router.replace({path:"/login"})}}))},function(t){console.log("异步调用出错:"+o()(t)),n.close(),a.$alert(o()(t.message),"查询出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){console.log("异步调用失败返回:"+o()(t)),n.close(),a.$alert(o()(t.message),"查询出错",{confirmButtonText:"确定",callback:function(t){}})})}else console.info("type:"+t.type)},queryDB:function(){var t=this,e=this;this.key="",this.value="",this.ttl="-1";var a={db:this.currentDB},l=this.$loading({lock:!0,text:"查询中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient("/fr/postQueryRedisDBKeys",this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:o()(a)})).then(function(a){console.log("异步调用成功返回:"+o()(a)),"success"==a.data.status?(l.close(),e.keysTreeData=JSON.parse(a.data.rows),console.info(e.keysTreeData)):(console.info("查询失败"),l.close(),e.keysTreeData=[],t.$alert(a.data.msg,"查询失败",{confirmButtonText:"确定",callback:function(e){console.info("data:"+o()(a.data)),"请登录认证"===a.data.msg&&"failed"===a.data.status&&t.$router.replace({path:"/login"})}}))},function(a){console.log("异步调用出错:"+o()(a)),l.close(),e.keysTreeData=[],t.$alert(o()(a.message),"查询出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(a){console.log("异步调用失败返回:"+o()(a)),l.close(),e.keysTreeData=[],t.$alert(o()(a.message),"查询出错",{confirmButtonText:"确定",callback:function(t){}})})},saveConfirm:function(){var t=this;this.$confirm("确认要修改["+this.key+"]?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,closeOnClickModal:!1,closeOnPressEscape:!1}).then(function(){t.saveValue()}).catch(function(){})},saveValue:function(){var t=this;if("string"===this.type){var e={key:this.key,value:this.value},a=this.$loading({lock:!0,text:"更新中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient("/fr/postSaveKeyValue",this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:o()(e)})).then(function(e){console.log("异步调用成功返回:"+o()(e)),"success"==e.data.status?(t.$message({type:"success",showClose:!1,duration:1e3,dangerouslyUseHTMLString:!0,message:"修改成功"}),a.close(),console.info(e.data)):(console.info("修改失败"),a.close(),t.$alert(e.data.msg,"修改失败",{confirmButtonText:"确定",callback:function(a){console.info("data:"+o()(e.data)),"请登录认证"===e.data.msg&&"failed"===e.data.status&&t.$router.replace({path:"/login"})}}))},function(e){console.log("异步调用出错:"+o()(e)),a.close(),t.$alert(o()(e.message),"修改出错!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){console.log("异步调用失败返回:"+o()(e)),a.close(),t.$alert(o()(e.message),"修改出错",{confirmButtonText:"确定",callback:function(t){}})})}else this.$alert("不允许修改","出错",{confirmButtonText:"确定",callback:function(t){}})}},data:function(){return{type:"string",key:"",value:"",ttl:"-1",db_options:[{value:"0",label:"db0"},{value:"1",label:"db1"},{value:"2",label:"db2"},{value:"3",label:"db3"},{value:"4",label:"db4"}],currentDB:"0",tableData:[],keysTreeData:[]}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("el-header",[a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.currentDB,callback:function(e){t.currentDB=e},expression:"currentDB"}},t._l(t.db_options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{staticStyle:{display:"flex"},attrs:{span:18}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:t.queryDB}})],1)],1)],1),t._v(" "),a("el-container",{staticClass:"new-flag",staticStyle:{height:"100%",border:"1px solid #eee"}},[a("el-aside",{staticStyle:{height:"calc(100vh)","background-color":"rgb(238, 241, 246)"},attrs:{width:"400px"}},[a("el-scrollbar",{staticStyle:{width:"100%",height:"100%"}},[a("el-tree",{ref:"tree",staticStyle:{height:"calc(100vh)"},attrs:{data:t.keysTreeData,"default-expand-all":"","node-key":"id","highlight-current":"",props:{children:"detail",label:"caption"}},on:{"node-click":t.handleTreeNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var l=e.data;return[a("el-tooltip",{attrs:{slot:"label",effect:"dark",content:l.caption,placement:"right-end"},slot:"label"},[a("span",[t._v(t._s(l.caption))])])]}}])})],1)],1),t._v(" "),a("el-main",[a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"line-height":"40px",height:"40px"}},[t._v("KEY")])]),t._v(" "),a("el-col",{attrs:{span:22}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{model:{value:t.key,callback:function(e){t.key=e},expression:"key"}},[t._v(t._s(this.key))])],1)])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"line-height":"40px",height:"40px"}},[t._v("TTL")])]),t._v(" "),a("el-col",{attrs:{span:22}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{model:{value:t.ttl,callback:function(e){t.ttl=e},expression:"ttl"}},[t._v(t._s(this.ttl))])],1)])],1),t._v(" "),"string"===this.type?a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"line-height":"40px",height:"40px"}},[t._v("VALUE")])]),t._v(" "),a("el-col",{attrs:{span:22}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{type:"textarea",rows:"20"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[t._v(t._s(this.value))])],1)])],1):t._e(),t._v(" "),"string"===this.type?a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"line-height":"40px",height:"40px"}})]),t._v(" "),a("el-col",{attrs:{span:22}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-button",{on:{click:t.saveConfirm}},[t._v("保存")])],1)])],1):t._e(),t._v(" "),"hash"===this.type?a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"line-height":"40px",height:"40px"}},[t._v("VALUE")])]),t._v(" "),a("el-col",{attrs:{span:22}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-table",{ref:"multipleTable",attrs:{border:"",data:t.tableData,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"header-cell-style":{background:"#4B86BC",color:"#ffffff",borderRight:"1px solid #E3E5EB"}}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",property:"k",label:"key"}}),t._v(" "),a("el-table-column",{attrs:{width:"500",property:"v",label:"value"}})],1)],1)])],1):t._e()],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,n,!1,function(t){a("IzoH")},"data-v-08744a0a",null);e.default=i.exports},IzoH:function(t,e){}});
//# sourceMappingURL=75.b4ed7f2f8c4d5d2482cb.js.map