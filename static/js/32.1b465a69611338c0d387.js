webpackJsonp([32],{"111V":function(e,o){},"2u6q":function(e,o){e.exports="data:image/png;base64,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"},tstd:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=t("mvHQ"),i=t.n(s),a={name:"SystemConfigManager",data:function(){var e=this;return{nullImg:t("2u6q"),uploadConfig:{actionUrl:this.customGlobal.serverUrl.orgBaseURI+"/fr/postCallPowerFileUpload?userid="+this.customGlobal.userInfoExt.cui_login_id+"&logic=2",uploadImgFlag:!1,uploadPercent:0,uploadImageUrl:""},configForm:{sd_uuid:"",sd_company_uuid:"",sd_key:"",sd_value:"",sd_memo:"",sd_memo_2:"",sd_order:""},configFormRules:{sd_uuid:[{validator:function(e,o,t){0===o.trim().length?t(new Error("唯一ID不可为空")):t()},trigger:"blur"}],sd_company_uuid:[{validator:function(e,o,t){0===o.trim().length?t(new Error("组织机构ID不可为空")):t()},trigger:"blur"}],sd_key:[{validator:function(e,o,t){0===o.trim().length?t(new Error("键不可为空")):t()},trigger:"blur"}],sd_value:[{validator:function(e,o,t){0===o.trim().length?t(new Error("值不可为空")):t()},trigger:"blur"}],sd_memo_2:[{validator:function(e,o,t){0===o.trim().length?t(new Error("备注不可为空")):t()},trigger:"blur"}],sd_order:[{validator:function(o,t,s){0===t.trim().length||0==e.customGlobal.isnumber(t)?s(new Error("排序不可为空,且必须是整数")):s()},trigger:"blur"}]},configDialog:{configFormVisible1:!1,configDialogTitle:""},tableData:[],queryParam:{totalRow:0,currentPage:1,pageSize:this.customGlobal.pageSize}}},created:function(){this.querySystemConfigData()},mounted:function(){},methods:{resetForm:function(e){this.$refs[e].resetFields()},submitForm:function(e){var o=this;console.info("窗体元素："+i()(this.configForm)),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.info("valid:"+e),o.saveSystemConfig()})},saveSystemConfig:function(){var e=this;this.$refs.uploadFile.clearFiles();var o=this,t={sd_company_uuid:this.configForm.sd_company_uuid,sd_uuid:this.configForm.sd_uuid,sd_key:this.configForm.sd_key,sd_value:this.configForm.sd_value,sd_memo_2:this.configForm.sd_memo_2,sd_order:this.configForm.sd_order},s=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postSaveSystemConfig,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(t)})).then(function(o){console.log("异步调用成功返回:"+i()(o)),"success"==o.data.status?(e.configDialog.configFormVisible1=!1,s.close(),e.$message({type:"success",showClose:!0,duration:3e3,dangerouslyUseHTMLString:!0,message:'<spand style="color:black;"> 保存成功 </spand>'}),e.querySystemConfigData()):(console.info("保存失败"),s.close(),e.$alert(o.data.msg,"保存失败",{confirmButtonText:"确定",callback:function(t){console.info("data:"+i()(o.data)),"请登录认证"===o.data.msg&&"failed"===o.data.status&&e.$router.replace({path:"/login"})}}))},function(t){console.log("异步调用出错:"+i()(t)),s.close(),o.tableData=[],e.$alert(i()(t.message),"保存出错!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("异步调用失败返回:"+i()(t)),s.close(),o.tableData=[],e.$alert(i()(t.message),"保存出错",{confirmButtonText:"确定",callback:function(e){}})})},deleteSystemConfig:function(e){var o=this,t=this,s={sd_uuid:e},a=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postDeleteSystemConfig,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(s)})).then(function(e){console.log("异步调用成功返回:"+i()(e)),"success"==e.data.status?(o.configDialog.configFormVisible1=!1,a.close(),o.$message({type:"success",showClose:!0,duration:3e3,dangerouslyUseHTMLString:!0,message:'<spand style="color:black;"> 删除成功 </spand>'}),o.querySystemConfigData()):(console.info("删除失败"),a.close(),o.$alert(e.data.msg,"删除失败",{confirmButtonText:"确定",callback:function(t){console.info("data:"+i()(e.data)),"请登录认证"===e.data.msg&&"failed"===e.data.status&&o.$router.replace({path:"/login"})}}))},function(e){console.log("异步调用出错:"+i()(e)),a.close(),t.tableData=[],o.$alert(i()(e.message),"删除出错!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log("异步调用失败返回:"+i()(e)),a.close(),t.tableData=[],o.$alert(i()(e.message),"删除出错",{confirmButtonText:"确定",callback:function(e){}})})},closeDialog1:function(){this.$refs.uploadFile.clearFiles(),this.$refs.configForm.clearValidate(),this.configDialog.configFormVisible1=!1},handleEditRow:function(e,o){console.log("行号："+e+",行内容："+i()(o)),this.configDialog.configDialogTitle="修改配置项["+o.sd_memo+"]",this.configDialog.configFormVisible1=!0,this.configForm.sd_uuid=o.sd_uuid,this.configForm.sd_key=o.sd_key,this.configForm.sd_memo=o.sd_memo,"logo_img"===o.sd_key&&void 0!==o.sd_value&&(this.uploadConfig.uploadImageUrl=this.customGlobal.serverUrl.orgBaseURI+"/fr/imgserver/"+o.sd_value),void 0===o.sd_uuid&&(console.info("新sd_uuid"+this.customGlobal.genLogicNo("SYSVAR")),this.configForm.sd_uuid=this.customGlobal.genLogicNo("SYSVAR")),console.info("row.sd_memo_2:"+o.sd_memo_2),void 0===o.sd_memo_2?this.configForm.sd_memo_2="备注":this.configForm.sd_memo_2=o.sd_memo_2,void 0===o.sd_company_uuid?this.configForm.sd_company_uuid=this.customGlobal.userInfoExt.cui_company_id:this.configForm.sd_company_uuid=o.sd_company_uuid,void 0===o.sd_value?this.configForm.sd_value="":this.configForm.sd_value=o.sd_value,void 0===o.sd_order?this.configForm.sd_order="0":this.configForm.sd_order=o.sd_order},handleDeleteRow:function(e,o){var t=this;console.log("行号："+e+",行内容："+i()(o));var s=o.sd_uuid;this.$confirm('请再次确认是否要删除[<span style="color:red;">'+o.sd_memo+"</span>]该行记录?","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,closeOnClickModal:!1,closeOnPressEscape:!1}).then(function(){t.deleteSystemConfig(s)}).catch(function(){})},querySystemConfigData:function(){var e=this,o=this,t={perPageSize:this.queryParam.pageSize,currentPage:this.queryParam.currentPage,sd_company_uuid:this.customGlobal.userInfoExt.cui_company_id},s=this.$loading({lock:!0,text:"查询中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postQuerySystemConfig,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:i()(t)})).then(function(t){console.log("异步调用成功返回:"+i()(t)),"success"==t.data.status?(s.close(),o.tableData=t.data.rows,o.queryParam.totalRow=t.data.total):(console.info("查询失败"),s.close(),o.tableData=[],e.$alert(t.data.msg,"查询失败",{confirmButtonText:"确定",callback:function(o){console.info("data:"+i()(t.data)),"请登录认证"===t.data.msg&&"failed"===t.data.status&&e.$router.replace({path:"/login"})}}))},function(t){console.log("异步调用出错:"+i()(t)),s.close(),o.tableData=[],e.$alert(i()(t.message),"查询出错!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("异步调用失败返回:"+i()(t)),s.close(),o.tableData=[],e.$alert(i()(t.message),"查询出错",{confirmButtonText:"确定",callback:function(e){}})})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.queryParam.pageSize=e,this.querySystemConfigData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.queryParam.currentPage=e,this.querySystemConfigData()},selUploadFile:function(e,o){o.length>=1&&(console.info("已经选择了一个文件，先删除之前选择的文件然后再重新选择文件"),this.$message({type:"success",showClose:!0,duration:3e3,dangerouslyUseHTMLString:!0,message:'<span style="color:black;"> 已经选择了一个文件，先删除之前选择的文件然后再重新选择文件 </span>'}))},handleAvatarSuccess:function(e,o){this.uploadConfig.uploadImgFlag=!1,this.uploadConfig.uploadPercent=0,this.configForm.sd_value=e.rawfilename,this.uploadConfig.uploadImageUrl=this.customGlobal.serverUrl.orgBaseURI+"/fr/imgserver/"+e.rawfilename,console.info("服务端返回信息："+i()(e))},beforeAvatarUpload:function(e){var o=!1;o=-1!=["image/jpeg","image/png"].indexOf(e.type);var t=e.size/1024<10;return console.info(e.size+"文件大小："+e.size/10),o||this.$message.error("上传头像图片只能是 JPG|PNG 格式!"),t||this.$message.error("上传头像图片大小不能超过 10KB!"),o&&t}}},l={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("el-card",{style:{display:"flex","justify-content":"center"}},[t("el-table",{ref:"systemTable",staticStyle:{width:"100%",_height:"100%"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"header-cell-style":{background:"#4B86BC",color:"#ffffff",borderRight:"1px solid #E3E5EB",padding:"0px",height:"45px","line-height":"45px"}}},[e._e(),e._v(" "),e._e(),e._v(" "),t("el-table-column",{attrs:{prop:"sd_memo",label:"名称",align:"center","show-overflow-tooltip":"",width:"150"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sd_value",label:"值",align:"center","show-overflow-tooltip":"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(o){return[void 0===o.row.sd_value?t("el-tag",{attrs:{effect:"dark",size:"small",type:"info"}},[e._v("未配置")]):t("el-tag",{attrs:{effect:"dark",size:"small",type:"success"}},[e._v(e._s(o.row.sd_value))])]}}])}),e._v(" "),e._e(),e._v(" "),t("el-table-column",{attrs:{prop:"sd_memo_2",label:"备注",align:"center","show-overflow-tooltip":"",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sd_order",label:"排序",align:"center","show-overflow-tooltip":"",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-tooltip",{attrs:{effect:"dark",content:"修改",placement:"top"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},nativeOn:{click:function(t){return t.stopPropagation(),e.handleEditRow(o.$index,o.row)}}})],1),e._v(" "),t("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top"}},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:void 0!==o.row.sd_uuid,expression:"scope.row.sd_uuid===undefined?false:true"}],attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},nativeOn:{click:function(t){return t.stopPropagation(),e.handleDeleteRow(o.$index,o.row)}}})],1)]}}])})],1),e._v(" "),t("el-pagination",{attrs:{background:"","current-page":e.queryParam.currentPage,"page-sizes":[10,20,50,100,200],"page-size":e.queryParam.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.queryParam.totalRow},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),t("el-dialog",{attrs:{visible:e.configDialog.configFormVisible1,"close-on-press-escape":!1,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(o){return e.$set(e.configDialog,"configFormVisible1",o)}}},[t("div",{staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold"},attrs:{slot:"title"},slot:"title"},[t("span",[e._v(e._s(this.configDialog.configDialogTitle))])]),e._v(" "),t("el-form",{ref:"configForm",staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold"},attrs:{"label-position":"left",model:e.configForm,rules:e.configFormRules,"label-width":"130px"}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"UUID",prop:"sd_uuid",rules:this.configFormRules.sd_uuid}},[t("el-input",{model:{value:e.configForm.sd_uuid,callback:function(o){e.$set(e.configForm,"sd_uuid",o)},expression:"configForm.sd_uuid"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"组织机构",prop:"sd_company_uuid",rules:this.configFormRules.sd_company_uuid}},[t("el-input",{model:{value:e.configForm.sd_company_uuid,callback:function(o){e.$set(e.configForm,"sd_company_uuid",o)},expression:"configForm.sd_company_uuid"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{attrs:{disabled:!0,readonly:!0},model:{value:e.configForm.sd_memo,callback:function(o){e.$set(e.configForm,"sd_memo",o)},expression:"configForm.sd_memo"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"键",prop:"sd_key",rules:this.configFormRules.sd_key}},[t("el-input",{model:{value:e.configForm.sd_key,callback:function(o){e.$set(e.configForm,"sd_key",o)},expression:"configForm.sd_key"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"值",prop:"sd_value",rules:this.configFormRules.sd_value}},[t("el-row",{attrs:{gutter:24,type:"flex",justify:"space-between"}},[t("el-col",{attrs:{md:"logo_img"===e.configForm.sd_key?16:24}},[t("el-input",{attrs:{disabled:"logo_img"===e.configForm.sd_key,readonly:"logo_img"===e.configForm.sd_key},model:{value:e.configForm.sd_value,callback:function(o){e.$set(e.configForm,"sd_value",o)},expression:"configForm.sd_value"}})],1),e._v(" "),t("el-col",{attrs:{md:"logo_img"===e.configForm.sd_key?4:0}},["logo_img"===e.configForm.sd_key?t("el-avatar",{staticStyle:{width:"40px",height:"40px"},attrs:{shape:"square",src:e.uploadConfig.uploadImageUrl,fit:"fill"}},[t("img",{attrs:{src:e.nullImg}})]):e._e()],1),e._v(" "),t("el-col",{attrs:{md:"logo_img"===e.configForm.sd_key?4:0}},[t("el-upload",{ref:"uploadFile",attrs:{action:this.uploadConfig.actionUrl,"with-credentials":!0,"show-file-list":!0,limit:1,accept:".png,.jpg","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-exceed":e.selUploadFile}},["logo_img"===e.configForm.sd_key?t("el-button",{attrs:{_size:"medium",type:"success"}},[e._v("上传")]):e._e()],1)],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"备注",prop:"sd_memo_2",rules:this.configFormRules.sd_memo_2}},[t("el-input",{model:{value:e.configForm.sd_memo_2,callback:function(o){e.$set(e.configForm,"sd_memo_2",o)},expression:"configForm.sd_memo_2"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"排序",prop:"sd_order",rules:this.configFormRules.sd_order}},[t("el-input",{model:{value:e.configForm.sd_order,callback:function(o){e.$set(e.configForm,"sd_order",o)},expression:"configForm.sd_order"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){return e.resetForm("configForm")}}},[e._v("重 置")]),e._v(" "),t("el-button",{on:{click:e.closeDialog1}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.submitForm("configForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=t("VU/8")(a,l,!1,function(e){t("111V")},"data-v-320690de",null);o.default=n.exports}});
//# sourceMappingURL=32.1b465a69611338c0d387.js.map