webpackJsonp([67],{R1CA:function(e,t){},iAc1:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("Xxa5"),a=i.n(o),s=i("exGp"),n=i.n(s),l=i("pFYg"),r=i.n(l),c=i("mvHQ"),m=i.n(c),_=i("YZ0n"),d=i("mtWM"),u=i.n(d),g={name:"MerchantAndCommodity",components:{VueCropper:_.VueCropper},data:function(){return{activeIndex:"1",cardBodyStyle:"padding-top:10px;padding-bottom:10px;",ruleForm:{mbmi_mer_name:""},tableData:[],sortOrderCol:"",queryParam:{totalRow:0,currentPage:1,pageSize:this.customGlobal.pageSize},essentialFormVisible:!1,tableDialgTitle:"",essentialForm:{tableData_prize:[],mbmi_mer_name:"",mbmi_contacts:"",mbmi_phone:"",mbmi_address:"",mbmi_license_code:"",mbgi_goods_name:"",mbgi_goods_describer:"",mbgi_money_1:""},essentialFormrule:{},new_but:"",add_itemshow:"",mbmi_status:"",key:"",mbmi_flag:"",disabled:!1,options:{img:"",outputSize:1,outputType:"png | jpeg | jpg",full:!0,canMove:!0,canMoveBox:!0,original:!1,autoCrop:!0,autoCropWidth:250,autoCropHeight:250,fixedBox:!0,enlarge:1,centerBox:!0,fixed:!0,fixedNumber:[1,1],maxImgSize:2e3,mode:"contain",high:!0,infoTrue:!0,title:"图像裁剪",details:"选择图片，上传"},dialogVisible:!1,imgsrc:"",mbgi_goods_img_path:"",mbgi_goods_img_path1:"",index:"",mbgi_mer_uuid:"",mbgi_uuid:"",tableData_gift:[]}},created:function(){this.mbmi_status="2",this.select_table()},computed:{scaleFun:function(){var e=this.scaleratioXY;return"transform:scale("+e+","+e+")"}},methods:{handleSelect:function(e,t){console.log("上："+e,t),this.queryParam.currentPage=1,this.key=e,"1"===this.key?this.mbmi_status="2":"2"===this.key&&(this.mbmi_status="1"),this.select_table()},sortColumn:function(e){var t="";null!=e.order?("descending"===e.order?t="desc":"ascending"===e.order&&(t="asc"),this.sortOrderCol=e.prop+" "+t,this.select_table()):this.sortOrderCol=""},handleSizeChange:function(e){this.queryParam.pageSize=e,this.select_table()},handleCurrentChange:function(e){this.queryParam.currentPage=e,this.select_table()},administration:function(e,t){this.mbgi_mer_uuid=t.mbmi_uuid,this.essentialForm.mbmi_mer_name=t.mbmi_mer_name,this.essentialForm.mbmi_contacts=t.mbmi_contacts,this.essentialForm.mbmi_phone=t.mbmi_phone,this.essentialForm.mbmi_address=t.mbmi_address,this.essentialForm.mbmi_license_code=t.mbmi_license_code,this.mbmi_flag=t.mbmi_flag,this.essentialFormVisible=!0,this.tableDialgTitle="商户与商品信息管理",this.add_itemshow=!0,this.new_but="2",this.disabled=!0,this.select_gift()},new_merchant:function(){this.disabled=!1,this.essentialFormVisible=!0,this.new_but="1",this.add_itemshow=!1,this.tableDialgTitle="新增商户",this.essentialForm.mbmi_mer_name="",this.essentialForm.mbmi_contacts="",this.essentialForm.mbmi_phone="",this.essentialForm.mbmi_address="",this.essentialForm.mbmi_license_code=""},clearQuery:function(e){this.$refs[e].resetFields()},select_table:function(){var e=this,t=this,i={mbmi_bank_center_id:t.customGlobal.userInfoExt.cui_bank_center_id,mbmi_province_id:t.customGlobal.userInfoExt.cui_province_id,mbmi_city_id:t.customGlobal.userInfoExt.cui_city_id,mbmi_county_id:t.customGlobal.userInfoExt.cui_county_id,mbmi_station_id:t.customGlobal.userInfoExt.cui_station_id,mbmi_flag:"1",mbmi_mer_name:t.ruleForm.mbmi_mer_name,mbmi_status:t.mbmi_status,perPageSize:t.queryParam.pageSize,currentPage:t.queryParam.currentPage},o=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.mobileBankingMerchant_select,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:m()(i)})).then(function(i){"success"===i.data.status?(o.close(),t.tableData=i.data.rows,t.queryParam.totalRow=i.data.total):(console.info("商户查询失败"),o.close(),"请登录认证"===i.data.msg&&e.$router.push({path:"/login"}))},function(t){o.close(),e.$alert(m()(t.message),"商户查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("异步调用失败返回:"+m()(t)),o.close(),e.$alert(m()(t.message),"商户查询失败",{confirmButtonText:"确定",callback:function(e){}})})},cancelForm:function(){this.essentialFormVisible=!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.mobileBankingMerchant_add()})},mobileBankingMerchant_add:function(){var e=this,t={mbmi_cui_id:this.customGlobal.userInfoExt.cui_uuid,mbmi_bank_center_id:this.customGlobal.userInfoExt.cui_bank_center_id,mbmi_province_id:this.customGlobal.userInfoExt.cui_province_id,mbmi_city_id:this.customGlobal.userInfoExt.cui_city_id,mbmi_county_id:this.customGlobal.userInfoExt.cui_county_id,mbmi_station_id:this.customGlobal.userInfoExt.cui_station_id,mbmi_mer_name:this.essentialForm.mbmi_mer_name,mbmi_contacts:this.essentialForm.mbmi_contacts,mbmi_phone:this.essentialForm.mbmi_phone,mbmi_area_id:"",mbmi_area_text:"",mbmi_address:this.essentialForm.mbmi_address,mbmi_account_name:"",mbmi_account_code:"",mbmi_account_bank:"",mbmi_license_code:this.essentialForm.mbmi_license_code,mbmi_license_img_path:""},i=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.mobileBankingMerchant_add,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:m()(t)})).then(function(t){"success"==t.data.status?(i.close(),e.$message({type:"success",showClose:!0,duration:3e3,dangerouslyUseHTMLString:!0,message:'<span style="color:black;">新增客户成功</span>'}),e.essentialFormVisible=!1,e.queryParam.currentPage=1,e.select_table()):(console.info("新增客户失败"),i.close(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){i.close(),e.$alert(m()(t.message),"新增客户出错!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("异步调用失败返回:"+m()(t)),i.close(),e.$alert(m()(t.message),"新增客户出错",{confirmButtonText:"确定",callback:function(e){}})})},add_item:function(){if("0"==this.essentialForm.tableData_prize.length){var e={mbgi_goods_img_path:"",mbgi_goods_name:"",mbgi_goods_describer:"",mbgi_money_1:"",disabled_mbgi_goods_img_path:!1,disabled_mbgi_goods_name:!1,disabled_mbgi_goods_describer:!1,disabled_mbgi_money_1:!1,flag:"1",preserve_show:!0,revise_show:!1,cut_off_show:!0};this.essentialForm.tableData_prize.unshift(e),console.log("this.tableData_prize:"+m()(this.essentialForm.tableData_prize))}else if(!1===this.essentialForm.tableData_prize[0].preserve_show){e={mbgi_goods_img_path:"",mbgi_goods_name:"",mbgi_goods_describer:"",mbgi_money_1:"",disabled_mbgi_goods_img_path:!1,disabled_mbgi_goods_name:!1,disabled_mbgi_goods_describer:!1,disabled_mbgi_money_1:!1,flag:"1",preserve_show:!0,revise_show:!1,cut_off_show:!0};this.essentialForm.tableData_prize.unshift(e),console.log("this.tableData_prize:"+m()(this.essentialForm.tableData_prize))}else this.$alert("请保存后在新增商品","新增提示",{confirmButtonText:"确定",callback:function(e){}})},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(i){e(),t.onclose()}).catch(function(e){})},realTime:function(e){var t=this,i=e;this.$refs.cropper.getCropData(function(e){t.imgsrc=e,(i.w>=200||i.h>=200)&&(i.w>=i.h&&(t.scaleratioXY=200/i.w),i.h>i.w&&(t.scaleratioXY=200/i.h))})},uploadImg:function(e,t){var i=this,o=this,a=e.target.files[0];if(!/\.(jpg|jpeg|png|JPG|PNG)$/.test(e.target.value))return alert("图片类型必须是.gif,jpeg,jpg,png中的一种"),!1;var s=new FileReader;s.onload=function(e){var a=void 0;a="object"===r()(e.target.result)?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,1===t?o.options.img=a:2===t&&(i.example2.img=a)},s.readAsDataURL(a)},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},oncropped:function(e){var t=this;this.$refs.reference.value="";"blob"===e?this.$refs.cropper.getCropBlob(function(e){}):this.$refs.cropper.getCropData(function(e){""===t.options.img?alert("您还没有选择图片"):(t.uploadFileToServer(e),t.dialogVisible=!1,t.options.img="",t.imgsrc="")})},onOpen:function(e,t){!1===t.disabled_mbgi_goods_img_path&&(this.options.img="",this.imgsrc="",this.dialogVisible=!0,this.index=e,this.mbgi_goods_img_path=t.mbgi_goods_img_path)},dataURItoBlob:function(e){var t=void 0;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var i=e.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(t.length),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new Blob([o],{type:i})},uploadFileToServer:function(e){var t=this;return n()(a.a.mark(function i(){var o;return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:(o=new Image).src=e,o.onload=n()(a.a.mark(function i(){var o,s;return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:o=t.dataURItoBlob(e),(s=new FormData).append("file",o,t.customGlobal.getFormatDateTimeString("3")+".png"),t.uploadFileRequest(s);case 4:case"end":return i.stop()}},i,t)}));case 3:case"end":return i.stop()}},i,t)}))()},uploadFileRequest:function(e){var t=this;return n()(a.a.mark(function i(){var o;return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:o=t,u()({method:"post",url:t.customGlobal.serverUrl.orgBaseURI+"/fr/postCallPowerFileUpload?userid="+t.customGlobal.userInfoExt.cui_login_id+"&logic=2",data:e,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){console.info("progressEvent:"+m()(e))}}).then(function(e){if(console.info("response:"+m()(e)),"success"===e.data.status){console.info("上传成功："+e.data.rawfilename);var t=o.customGlobal.serverUrl.orgBaseURI+"/fr/imgserver/"+e.data.rawfilename;console.info("图片："+t),o.mbgi_goods_img_path1=t,console.info("图片："+o.mbgi_goods_img_path1);var i=o.index;o.essentialForm.tableData_prize[i].mbgi_goods_img_path=o.mbgi_goods_img_path1,console.info("图片："+o.essentialForm.tableData_prize[i].mbgi_goods_img_path)}else console.info("上传失败")}).catch(function(e){console.log(e)});case 2:case"end":return i.stop()}},i,t)}))()},preserve:function(e,t){var i=this;if(""===t.mbgi_goods_name||""===t.mbgi_goods_img_path||""===t.mbgi_goods_describer||""===t.mbgi_money_1)this.$alert("填写的信息不能为空","保存提示",{confirmButtonText:"确定",callback:function(e){}});else{console.log("parseInt(row.mbgi_money_1):"+parseInt(t.mbgi_money_1));if(/^(\d+)(\.\d+)?$/.test(t.mbgi_money_1)){console.info("true:"+t.mbgi_money_1);var o=this,a="";"1"!==t.flag&&(a=o.mbgi_uuid);var s={flag:t.flag,mbgi_mer_uuid:o.mbgi_mer_uuid,mbgi_goods_name:t.mbgi_goods_name,mbgi_goods_img_path:t.mbgi_goods_img_path,mbgi_goods_describer:t.mbgi_goods_describer,mbgi_goods_marker:t.mbgi_goods_describer,mbgi_money_1:t.mbgi_money_1,mbgi_cui_id:o.customGlobal.userInfoExt.cui_uuid,mbgi_bank_center_id:o.customGlobal.userInfoExt.cui_bank_center_id,mbgi_province_id:o.customGlobal.userInfoExt.cui_province_id,mbgi_city_id:o.customGlobal.userInfoExt.cui_city_id,mbgi_county_id:o.customGlobal.userInfoExt.cui_county_id,mbgi_station_id:o.customGlobal.userInfoExt.cui_station_id,mbgi_uuid:a,mbgi_goods_alias_name:t.mbgi_goods_name},n=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.commodity_preservation,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:m()(s)})).then(function(e){"success"==e.data.status?(n.close(),i.$message({type:"success",showClose:!0,duration:3e3,dangerouslyUseHTMLString:!0,message:'<span style="color:black;">商品保存成功</span>'}),t.disabled_mbgi_goods_img_path=!0,t.disabled_mbgi_goods_name=!0,t.disabled_mbgi_goods_describer=!0,t.disabled_mbgi_money_1=!0,t.preserve_show=!1,t.revise_show=!0,t.cut_off_show=!0,t.flag="2",o.select_gift()):(console.info("商品保存失败"),n.close(),"请登录认证"===e.data.msg&&i.$router.push({path:"/login"}))},function(e){n.close(),i.$alert(m()(e.message),"商品保存出错!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log("异步调用失败返回:"+m()(e)),n.close(),i.$alert(m()(e.message),"商品保存出错",{confirmButtonText:"确定",callback:function(e){}})})}else console.info("false:"+t.mbgi_money_1),this.$alert("原价必须大于0元","保存提示",{confirmButtonText:"确定",callback:function(e){}})}},revise:function(e,t){t.disabled_mbgi_goods_img_path=!1,t.disabled_mbgi_goods_name=!1,t.disabled_mbgi_goods_describer=!1,t.disabled_mbgi_money_1=!1,this.mbgi_uuid=t.mbgi_uuid,t.preserve_show=!0,t.revise_show=!1,t.cut_off_show=!0},cut_off:function(e,t){"1"===t.flag?(this.essentialForm.tableData_prize.shift(),console.log("删除后的表格："+m()(this.essentialForm.tableData_prize))):"2"===t.flag&&("1"===t.mbgi_status?(this.mbgi_uuid=t.mbgi_uuid,this.cut_off_delect()):"2"===t.mbgi_status&&this.$alert("此商品已上架","删除提示",{confirmButtonText:"确定",callback:function(e){}}))},select_gift:function(){var e=this,t=this;t.tableData_gift=[],t.essentialForm.tableData_prize=[];var i={mbgi_mer_uuid:t.mbgi_mer_uuid,flag:"4"},o=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.commodity_preservation,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:m()(i)})).then(function(i){"success"===i.data.status?(o.close(),t.tableData_gift=i.data.rows,t.essentialForm.tableData_prize=t.tableData_gift,t.essentialForm.tableData_prize.forEach(function(t){e.$set(t,"disabled_mbgi_goods_img_path",!0),e.$set(t,"disabled_mbgi_goods_name",!0),e.$set(t,"disabled_mbgi_goods_describer",!0),e.$set(t,"disabled_mbgi_money_1",!0),e.$set(t,"preserve_show",!1),e.$set(t,"revise_show",!0),e.$set(t,"cut_off_show",!0),e.$set(t,"flag","2")}),console.log("表格"+m()(t.essentialForm.tableData_prize))):(console.info("商品查询失败"),o.close(),"请登录认证"===i.data.msg&&e.$router.push({path:"/login"}))},function(t){o.close(),e.$alert(m()(t.message),"商品查询失败!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("异步调用失败返回:"+m()(t)),o.close(),e.$alert(m()(t.message),"商品查询失败",{confirmButtonText:"确定",callback:function(e){}})})},cut_off_delect:function(){var e=this,t=this,i={flag:"3",mbgi_uuid:t.mbgi_uuid,mbgi_cui_id_2:t.customGlobal.userInfoExt.cui_uuid},o=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.commodity_preservation,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:m()(i)})).then(function(i){"success"==i.data.status?(o.close(),e.$message({type:"success",showClose:!0,duration:3e3,dangerouslyUseHTMLString:!0,message:'<span style="color:black;">商品删除成功</span>'}),t.select_gift()):(console.info("商品删除失败"),o.close(),"请登录认证"===i.data.msg&&e.$router.push({path:"/login"}))},function(t){o.close(),e.$alert(m()(t.message),"商品删除出错!",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(t){console.log("异步调用失败返回:"+m()(t)),o.close(),e.$alert(m()(t.message),"商品删除出错",{confirmButtonText:"确定",callback:function(e){}})})}}},b={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content"},[i("el-menu",{style:{height:"60px"},attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[i("el-menu-item",{staticStyle:{margin:"0 10px"},attrs:{index:"1"}},[i("span",[e._v("在合作商户")])]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{margin:"0 10px"},attrs:{index:"2"}},[i("span",[e._v("已暂停商户")])])],1),e._v(" "),i("el-form",{ref:"ruleForm",staticClass:"account-plat-formitem",staticStyle:{"text-align":"left","font-size":"20px"},attrs:{"label-position":"left",model:e.ruleForm,"label-width":"130px"},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-card",{staticClass:"account-plat-card1 account-plat-card2",attrs:{shadow:"always","body-style":e.cardBodyStyle}},[i("div",{staticStyle:{"margin-top":"10px"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{md:16}},[i("el-form-item",{attrs:{label:"商户名称:",prop:"mbmi_mer_name"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:e.ruleForm.mbmi_mer_name,callback:function(t){e.$set(e.ruleForm,"mbmi_mer_name",t)},expression:"ruleForm.mbmi_mer_name"}})],1)],1),e._v(" "),i("el-col",{attrs:{md:4}},[i("el-button",{staticStyle:{float:"right","margin-left":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.clearQuery("ruleForm")}}},[e._v("清空\n            ")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.select_table}},[e._v("查询")])],1),e._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{md:4}},[i("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:e.new_merchant}},[i("i",{staticClass:"el-icon-edit"},[e._v("新增商户")])])],1)],1)],1)])],1),e._v(" "),i("el-card",[i("el-table",{ref:"tableData",staticClass:"account-plat-fixed-right account-plat-fixed ",attrs:{border:"",data:e.tableData,"tooltip-effect":"dark","row-style":{height:"10px"},"cell-style":{padding:"5px 0px"},"header-cell-style":{background:"#4B86BC",color:"#ffffff",borderRight:"1px solid #E3E5EB",padding:"0px",height:"45px","line-height":"45px"}},on:{"sort-change":e.sortColumn}},[i("el-table-column",{attrs:{fixed:"",align:"center",type:"index",label:"序号",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"mbmi_mer_name",label:"商户名称",align:"center","show-overflow-tooltip":"",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{prop:"mbmi_contacts",label:"联系人",align:"center","show-overflow-tooltip":"",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"mbmi_phone",label:"联系电话",align:"center","show-overflow-tooltip":"",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"mbmi_license_code",label:"统一社会信用代码",align:"center","show-overflow-tooltip":"",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return"4"!==t.row.lai_detail_status?[i("el-tooltip",{attrs:{content:"商户与商品信息管理",placement:"top"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-user",circle:"",size:"mini"},nativeOn:{click:function(i){return i.stopPropagation(),e.administration(t.$index,t.row)}}})],1)]:void 0}}],null,!0)})],1)],1),e._v(" "),i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":e.queryParam.currentPage,"page-sizes":[10,20,50,100,200],"page-size":e.queryParam.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.queryParam.totalRow},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{staticClass:"account-plat-dialog",attrs:{visible:e.essentialFormVisible,"close-on-press-escape":!1,"close-on-click-modal":!1,"show-close":!1,width:"80%"},on:{"update:visible":function(t){e.essentialFormVisible=t}}},[i("div",{staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold"},attrs:{slot:"title"},slot:"title"},[i("span",[e._v(e._s(this.tableDialgTitle))])]),e._v(" "),i("el-form",{ref:"essentialForm",staticClass:"account-plat-formitem",staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold"},attrs:{"label-position":"left",model:e.essentialForm,rules:e.essentialFormrule,"label-width":"130px"}},[i("el-row",{staticStyle:{"font-size":"16px",margin:"10px 0"},attrs:{gutter:24}},[i("el-col",{attrs:{md:24}},[i("div",[e._v("基本信息设置")])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"10px"},attrs:{gutter:24}},[i("el-col",{staticStyle:{margin:"10px 0"},attrs:{md:12}},[i("el-form-item",{attrs:{label:"商户名称:",prop:"mbmi_mer_name"}},[i("el-input",{attrs:{maxlength:20,placeholder:"最多支持20个字",disabled:e.disabled},model:{value:e.essentialForm.mbmi_mer_name,callback:function(t){e.$set(e.essentialForm,"mbmi_mer_name",t)},expression:"essentialForm.mbmi_mer_name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{margin:"10px 0"},attrs:{md:12}},[i("el-form-item",{attrs:{label:"统一社会信用代码:",prop:"mbmi_license_code"}},[i("el-input",{attrs:{maxlength:18,placeholder:"请输入18个位统一社会信用代码",disabled:e.disabled},model:{value:e.essentialForm.mbmi_license_code,callback:function(t){e.$set(e.essentialForm,"mbmi_license_code",t)},expression:"essentialForm.mbmi_license_code"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"10px"},attrs:{gutter:24}},[i("el-col",{staticStyle:{margin:"10px 0"},attrs:{md:12}},[i("el-form-item",{attrs:{label:"联系人:",prop:"mbmi_contacts"}},[i("el-input",{attrs:{maxlength:20,placeholder:"最多支持20个字",disabled:e.disabled},model:{value:e.essentialForm.mbmi_contacts,callback:function(t){e.$set(e.essentialForm,"mbmi_contacts",t)},expression:"essentialForm.mbmi_contacts"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{margin:"10px 0"},attrs:{md:12}},[i("el-form-item",{attrs:{label:"联系电话:",prop:"mbmi_phone"}},[i("el-input",{attrs:{maxlength:11,placeholder:"最多支持11个位",disabled:e.disabled},model:{value:e.essentialForm.mbmi_phone,callback:function(t){e.$set(e.essentialForm,"mbmi_phone",t)},expression:"essentialForm.mbmi_phone"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{margin:"10px 0 10px 10px"},attrs:{gutter:24}},[i("el-col",{attrs:{md:24}},[i("el-form-item",{attrs:{label:"详细地址:",prop:"mbmi_address"}},[i("el-input",{attrs:{type:"textarea",autosize:"",maxlength:30,autosize:{minRows:2,maxRows:4},placeholder:"请输入内容,最多支持30个字",disabled:e.disabled},model:{value:e.essentialForm.mbmi_address,callback:function(t){e.$set(e.essentialForm,"mbmi_address",t)},expression:"essentialForm.mbmi_address"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"box",staticStyle:{margin:"20px 10px"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{float:"right"},attrs:{type:"primary"}},[e._v("提交")])],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.add_itemshow,expression:"add_itemshow"}],staticStyle:{"font-size":"16px",margin:"20px 0"},attrs:{gutter:24}},[i("el-col",{attrs:{md:17}},[i("div",[e._v("商品信息设置")])]),e._v(" "),i("el-col",{attrs:{md:7}},[i("el-button",{on:{click:e.add_item}},[e._v("添加商品")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"show",rawName:"v-show",value:e.add_itemshow,expression:"add_itemshow"}],staticClass:"account-plat-fixed-right account-plat-fixed ",staticStyle:{"margin-left":"50px",width:"94%","margin-bottom":"50px","overflow-y":"auto","max-height":"300px"},attrs:{data:e.essentialForm.tableData_prize,border:"","tooltip-effect":"dark","row-style":{height:"0px"},"cell-style":{padding:"5px 0px"},"header-cell-style":{background:"#4B86BC",color:"#ffffff",borderRight:"1px solid #E3E5EB",padding:"0px",height:"45px","line-height":"45px"}},on:{"sort-change":e.sortColumn}},[i("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",width:"150"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("i",{staticStyle:{color:"#F56C6C"}},[e._v("*")]),e._v(" "),i("span",{staticStyle:{color:"#fff"}},[e._v("商品图片")])]}},{key:"default",fn:function(t){return[""===t.row.mbgi_goods_img_path?i("el-button",{on:{click:function(i){return e.onOpen(t.$index,t.row)}}},[e._v("上传照片\n            ")]):e._e(),e._v(" "),i("div",{on:{click:function(i){return e.onOpen(t.$index,t.row)}}},[""!==t.row.mbgi_goods_img_path?i("el-image",{staticStyle:{width:"80px",height:"60px"},attrs:{src:t.row.mbgi_goods_img_path}}):e._e()],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("i",{staticStyle:{color:"#F56C6C"}},[e._v("*")]),e._v(" "),i("span",{staticStyle:{color:"#fff"}},[e._v("商品名称")])]}},{key:"default",fn:function(t){return[i("el-form-item",{attrs:{prop:"tableData_prize."+t.$index+".lpi_caption","label-width":"0"}},[i("el-input",{attrs:{disabled:t.row.disabled_mbgi_goods_name,type:"text",autocomplete:"off",maxlength:6,placeholder:"最多可输入6个字符"},model:{value:t.row.mbgi_goods_name,callback:function(i){e.$set(t.row,"mbgi_goods_name",i)},expression:"scope.row.mbgi_goods_name"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("i",{staticStyle:{color:"#F56C6C"}},[e._v("*")]),e._v(" "),i("span",{staticStyle:{color:"#fff"}},[e._v("规格")])]}},{key:"default",fn:function(t){return[i("el-form-item",{attrs:{prop:"tableData_prize."+t.$index+".mbgi_goods_describer","label-width":"0"}},[i("el-input",{attrs:{disabled:t.row.disabled_mbgi_goods_describer,type:"text",autocomplete:"off",maxlength:6,placeholder:"最多可输入6个字符"},model:{value:t.row.mbgi_goods_describer,callback:function(i){e.$set(t.row,"mbgi_goods_describer",i)},expression:"scope.row.mbgi_goods_describer"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("i",{staticStyle:{color:"#F56C6C"}},[e._v("*")]),e._v(" "),i("span",{staticStyle:{color:"#fff"}},[e._v("原价(元)")])]}},{key:"default",fn:function(t){return[i("el-form-item",{attrs:{prop:"tableData_prize."+t.$index+".mbgi_money_1",rules:e.essentialFormrule.disabled_mbgi_money_1,"label-width":"0"}},[i("el-input",{attrs:{disabled:t.row.disabled_mbgi_money_1,type:"text",autocomplete:"off",maxlength:4,placeholder:"输入范围在0至9999之间"},model:{value:t.row.mbgi_money_1,callback:function(i){e.$set(t.row,"mbgi_money_1",i)},expression:"scope.row.mbgi_money_1"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.preserve_show,expression:"scope.row.preserve_show"}],on:{click:function(i){return e.preserve(t.$index,t.row)}}},[e._v("保存")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.revise_show,expression:"scope.row.revise_show"}],on:{click:function(i){return e.revise(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.cut_off_show,expression:"scope.row.cut_off_show"}],on:{click:function(i){return e.cut_off(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],on:{click:function(t){return e.clearQuery("essentialForm")}}},[e._v("重 置")]),e._v(" "),i("el-button",{on:{click:function(t){return e.cancelForm("essentialForm")}}},[e._v("关 闭")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("essentialForm")}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.options.title,visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"el-cropper"},[i("div",[i("div",{staticStyle:{margin:"10px 0"}},[i("div",{staticStyle:{"font-weight":"600"}},[e._v("操作说明：")]),e._v(" "),i("div",[e._v("通过鼠标滚轮调整图片大小")]),e._v(" "),i("div",[e._v("通过鼠标左键调整裁剪框位置")])]),e._v(" "),i("div",{staticClass:"cropper-content"},[i("div",{staticClass:"cropper"},[i("vueCropper",{ref:"cropper",attrs:{img:e.options.img,outputSize:e.options.outputSize,outputType:e.options.outputType,full:e.options.full,canMove:e.options.canMove,canMoveBox:e.options.canMoveBox,original:e.options.original,autoCrop:e.options.autoCrop,autoCropWidth:e.options.autoCropWidth,autoCropHeight:e.options.autoCropHeight,fixedBox:e.options.fixedBox,enlarge:e.options.enlarge,centerBox:e.options.centerBox,fixedNumber:e.options.fixedNumber,fixed:e.options.fixed,maxImgSize:e.options.maxImgSize,mode:e.options.mode,infoTrue:e.options.infoTrue,high:e.options.high},on:{realTime:e.realTime}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"show-preview",style:{overflow:"hidden"}},[i("div",{staticClass:"wait"},[e._v("预览区域：")]),e._v(" "),i("div",{staticClass:"preview"},[i("img",{style:e.scaleFun,attrs:{src:e.imgsrc,alt:""}})])])])]),e._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("div",[i("label",{staticClass:"el-button el-button--default",attrs:{for:"uploads3"}},[e._v("选择图片\n                "),i("input",{ref:"reference",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads3",accept:"image/png, image/jpeg, image/jpg"},on:{change:function(t){return e.uploadImg(t,1)}}})])])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("el-button",{on:{click:e.rotateLeft}},[i("span",{staticStyle:{"font-weight":"600"}},[e._v("↺")])]),e._v(" "),i("el-button",{on:{click:e.rotateRight}},[i("span",{staticStyle:{"font-weight":"600"}},[e._v("↻")])])],1)]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{on:{click:function(t){return e.oncropped("base64")}}},[e._v("确 定")])],1)])],1)],1)])])],1)},staticRenderFns:[]};var p=i("VU/8")(g,b,!1,function(e){i("R1CA")},"data-v-1b8a0ad9",null);t.default=p.exports}});
//# sourceMappingURL=67.08045e17e71ecb55a13c.js.map