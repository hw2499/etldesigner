{"version":3,"sources":["webpack:///src/components/index/right/WebSocketExample.vue","webpack:///./src/components/index/right/WebSocketExample.vue?ebb8","webpack:///./src/components/index/right/WebSocketExample.vue"],"names":["WebSocketExample","name","data","websock","destroyed","this","close","created","initWebSocket","methods","WebSocket","alert","onopen","websocketonopen","onmessage","websocketonmessage","onerror","websocketonerror","onclose","websocketclose","console","log","e","dataJson","JSON","parse","btnClick","_this","setTimeout","readyState","send","stringify_default","toUserId","msg","right_WebSocketExample","render","_h","$createElement","_self","_c","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"+HAOAA,GACAC,KAAA,mBACAC,KAFA,WAGA,OACAC,QAAA,OAIAC,UARA,WAUAC,KAAAF,SACAE,KAAAF,QAAAG,SAGAC,QAdA,WAeAF,KAAAG,iBAEAC,SAEAD,cAFA,WAGA,uBAAAE,UAEA,OADAC,MAAA,sBACA,EAIAN,KAAAF,QAAA,IAAAO,UADA,4CAEAL,KAAAF,QAAAS,OAAAP,KAAAQ,gBACAR,KAAAF,QAAAW,UAAAT,KAAAU,mBACAV,KAAAF,QAAAa,QAAAX,KAAAY,iBACAZ,KAAAF,QAAAe,QAAAb,KAAAc,gBAGAN,gBAhBA,WAiBAO,QAAAC,IAAA,kBAGAN,mBApBA,SAoBAO,GACA,IAAAC,EAAAC,KAAAC,MAAAH,EAAApB,MACAkB,QAAAC,IAAAE,IAIAN,iBA1BA,SA0BAK,GACAF,QAAAC,IAAA,WAAAC,GACAjB,KAAAG,iBAGAW,eA/BA,SA+BAG,GACAF,QAAAC,IAAA,OAAAC,GACAjB,KAAAG,iBAGAkB,SApCA,WAoCA,IAAAC,EAAAtB,KAEAA,KAAAF,SACAE,KAAAF,QAAAG,QAEAD,KAAAG,gBAEAoB,WAAA,WAEA,OAAAD,EAAAxB,QAAA0B,WAAA,CAOAF,EAAAxB,QAAA2B,KAAAC,KAJAC,SAAA,QACAC,IAAA,cAKA,QC3EeC,GADEC,OAFjB,WAA0B,IAAaC,EAAb/B,KAAagC,eAAkD,OAA/DhC,KAAuCiC,MAAAC,IAAAH,GAAwB,QAExEI,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE3C,EACAkC,GATF,EAVA,SAAAU,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/70.89c2788d5d87b4ea0b00.js","sourcesContent":["<template>\n<div>\n\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"WebSocketExample\",\n  data() {\n    return {\n      websock: null,\n\n    }\n  },\n  destroyed () {\n\n    if(this.websock){\n      this.websock.close() ;\n    }\n  },\n  created() {\n    this.initWebSocket();\n  },\n  methods: {\n    //初始化weosocket\n    initWebSocket(){\n      if(typeof(WebSocket) === \"undefined\"){\n        alert(\"您的浏览器不支持WebSocket\")\n        return false\n      }\n      // const wsuri = 'ws://127.0.0.1:38080/fr/imserver/sa' // websocket地址\n      const wsuri = 'ws://192.168.31.233:38080/fr/imserver/sa' // websocket地址\n      this.websock = new WebSocket(wsuri)\n      this.websock.onopen = this.websocketonopen\n      this.websock.onmessage = this.websocketonmessage\n      this.websock.onerror = this.websocketonerror\n      this.websock.onclose = this.websocketclose\n    },\n    //连接成功\n    websocketonopen(){\n      console.log('WebSocket连接成功')\n    },\n    //接收后端返回的数据\n    websocketonmessage(e){\n      let dataJson = JSON.parse(e.data)\n      console.log(dataJson)\n\n    },\n    //连接建立失败重连\n    websocketonerror(e){\n      console.log(`连接失败的信息：`, e)\n      this.initWebSocket() // 连接失败后尝试重新连接\n    },\n    //关闭连接\n    websocketclose(e){\n      console.log('断开连接',e)\n      this.initWebSocket()\n    },\n    // 点击按钮\n    btnClick () {\n\n      if(this.websock){\n        this.websock.close() // 关闭websocket连接\n      }\n      this.initWebSocket() // 初始化weosocket，发起连接\n      // 这里使用定时器是为了等待连接后才发送数据，避免错误\n      setTimeout( () => {\n        //添加状态判断，当为OPEN时，前端发送消息给后端\n        if (this.websock.readyState === 1) {\n          // 把后台需要的参数数据传过去\n          let obj = {\n            toUserId: 'admin',\n            msg: '用户sa测试'\n          }\n          //发给后端的数据需要字符串化\n          this.websock.send(JSON.stringify(obj))\n        }\n      }, 500)\n    },\n\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/index/right/WebSocketExample.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-13ad6978\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/index/right/WebSocketExample.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-13ad6978\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./WebSocketExample.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./WebSocketExample.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./WebSocketExample.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-13ad6978\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./WebSocketExample.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-13ad6978\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/index/right/WebSocketExample.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}