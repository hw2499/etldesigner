webpackJsonp([38],{"7m2N":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("bOdI"),s=i.n(a),n=i("mvHQ"),o=i.n(n),c={name:"TransactionRecord",data:function(){return{scale:"scale(1)",options:[],value:"*",count_num:0,count:0,typeShow:!0,typeValue:1,totalRow:0,queryParam:{totalRow:0,currentPage:1,pageSize:this.customGlobal.pageSize},pickerOptions:{shortcuts:[{text:"近三十天",onClick:function(t){var e=(new Date).toLocaleString(),i=new Date((new Date).getTime()-2592e6).toLocaleString();i=i.substr(0,11)+"00:00:00",console.log("res==",i.substr(11,8)),t.$emit("pick",[i,e])}},{text:"当月",onClick:function(t){var e=(new Date).toLocaleString(),i=new Date((new Date).getFullYear(),(new Date).getMonth(),1).toLocaleString();console.log([i,e]),t.$emit("pick",[i,e])}}]},value1:[],value2:"",tableData:[]}},created:function(){Date.prototype.toLocaleString=function(){return this.getFullYear()+"-"+(this.getMonth()>9?this.getMonth()+1:"0"+(this.getMonth()+1))+"-"+(this.getDate()>9?this.getDate():"0"+this.getDate())+" "+(this.getHours()>9?this.getHours():"0"+this.getHours())+":"+(this.getMinutes()>9?this.getMinutes():"0"+this.getMinutes())+":"+(this.getSeconds()>9?this.getSeconds():"0"+this.getSeconds())};var t=(new Date).toLocaleString(),e=new Date((new Date).getTime()-2592e6).toLocaleString();e=e.substr(0,11)+"00:00:00",this.value1=[e,t],this.queryParam.currentPage=1,this.query_name(),this.queryList()},mounted:function(){var t=this.$refs.Transaction;this.scale="scale("+t.offsetWidth/600+")"},props:["msg","type","list"],watch:{"list.id":function(t){var e=(new Date).toLocaleString(),i=new Date((new Date).getTime()-2592e6).toLocaleString();i=i.substr(0,11)+"00:00:00",this.value1=[i,e],console.log(this.customGlobal.userInfoExt.cui_type,"==="),this.queryParam.currentPage=1,this.query_name(),this.queryList()}},methods:{changeClick:function(){this.queryParam.currentPage=1,this.query_name()},typeClick:function(t){switch(this.queryParam.currentPage=1,t){case 1:this.typeShow=!0;break;case 2:this.typeShow=!1}this.query_name()},handleCurrentChange:function(t){console.log("当前页: "+t),this.queryParam.currentPage=t,this.query_name()},queryList:function(t){var e=this;if(this.msg.type){var i=void 0,a=void 0;switch(a=this.type?this.list.type:this.customGlobal.userInfoExt.cui_type){case"0":i=this.list.id;break;case"1":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_bank_center_id;break;case"2":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_province_id;break;case"3":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_city_id;break;case"4":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_county_id;break;case"5":i=this.type?this.list.id:this.customGlobal.userInfoExt.cui_station_id}this.options=[{company_id:"*",company_name:"全部"}],console.log("--------------------------------------------------------------------------");var s={cui_type:a,company_id:i},n=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl.postQueryChildernCompanyList,this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:o()(s)})).then(function(t){"success"===t.data.status?e.options=e.options.concat(t.data.rows):(console.info("查询失败"),n.close(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){n.close(),e.$alert(o()(t.message),"查询失败!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){console.log("异步调用失败返回:"+o()(t)),n.close(),e.$alert(o()(t.message),"查询失败",{confirmButtonText:"确定",callback:function(t){}})})}},query_name:function(t){var e=this;if(console.log("res==",this.list),this.value1){switch(t){case 1:this.queryParam.currentPage=1}console.log(this.msg,"---------------");var i=this;i.tableData=[];var a,n,c=void 0,l="",r="",u="",h="",p=void 0,d=void 0;switch(c=this.type?this.list.type:this.customGlobal.userInfoExt.cui_type){case"0":d=this.list.id;break;case"1":this.type?(d=this.list.id,l=this.list.id):(d=this.customGlobal.userInfoExt.cui_bank_center_id,l=this.customGlobal.userInfoExt.cui_bank_center_id);break;case"2":this.type?(d=this.list.id,r=this.list.id):(d=this.customGlobal.userInfoExt.cui_province_id,r=this.customGlobal.userInfoExt.cui_province_id);break;case"3":this.type?(d=this.list.id,u=this.list.id):(d=this.customGlobal.userInfoExt.cui_city_id,u=this.customGlobal.userInfoExt.cui_city_id);break;case"4":this.type?(d=this.list.id,h=this.list.id):(d=this.customGlobal.userInfoExt.cui_county_id,h=this.customGlobal.userInfoExt.cui_county_id);break;case"5":this.type?(d=this.list.id,this.list.id):(d=this.customGlobal.userInfoExt.cui_station_id,this.customGlobal.userInfoExt.cui_station_id)}if(this.msg.type)a={start_time:this.value1[0],end_time:this.value1[1],level:this.typeShow?"1":"2",bai_cui_type:c,perPageSize:i.queryParam.pageSize,currentPage:i.queryParam.currentPage},s()(a,this.msg.query_company_id,i.value),s()(a,this.msg.cur_company_id,d||"*"),p=a;else n={start_time:this.value1[0],end_time:this.value1[1],level:this.typeShow?"1":"2",bai_cui_type:c,perPageSize:i.queryParam.pageSize,currentPage:i.queryParam.currentPage},s()(n,this.msg.bank_center_id,l),s()(n,this.msg.province_id,r),s()(n,this.msg.city_id,u),s()(n,this.msg.county_id,h),s()(n,"flag",this.msg.flag?this.msg.flag:""),p=n;var m=this.$loading({lock:!0,text:"提交中...",target:".main",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.customGlobal.postHttpClient(this.customGlobal.serverUrl[this.msg.api],this.customGlobal.serverUrl.orgBaseURI,{"Content-Type":"application/x-www-form-urlencoded"},this.qs.stringify({jsondata:o()(p)})).then(function(t){"success"===t.data.status?(m.close(),e.count_num=t.data.rows1[0].count_num,i.tableData=t.data.rows,i.totalRow=t.data.total,1==i.queryParam.currentPage&&i.tableData.length>0&&(e.count=i.tableData[0].count_num)):(console.info("查询失败"),m.close(),"请登录认证"===t.data.msg&&e.$router.push({path:"/login"}))},function(t){m.close(),e.$alert(o()(t.message),"查询失败!",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){console.log("异步调用失败返回:"+o()(t)),m.close(),e.$alert(o()(t.message),"查询失败",{confirmButtonText:"确定",callback:function(t){}})})}else this.$message({message:"日期不可为空!",type:"warning"})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"Transaction",staticClass:"TransactionRecord"},[t.type?i("el-card",{staticClass:"box1"},[i("div",{staticClass:"nav_bar"},[i("div",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.msg.name))]),t._v(" "),i("div",{staticClass:"box_1",staticStyle:{color:"rgb(66, 189, 243)",cursor:"pointer"}},[t._v("注释\n        "),i("div",{staticClass:"box_2"},[i("div",[t._v(t._s(t.msg.notes))])])])]),t._v(" "),i("div",{staticStyle:{display:"flex","margin-top":"15px"}},[i("el-date-picker",{staticClass:"dataInput",attrs:{type:"datetimerange","picker-options":t.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v(" "),i("div",[i("el-button",{staticStyle:{height:"25px","line-height":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.query_name(1)}}},[t._v("查询\n        ")])],1)],1),t._v(" "),t.msg.type?i("div",{staticStyle:{display:"flex","margin-top":"15px","font-size":"12px"}},[i("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:t.changeClick},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return i("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}})}),1)],1):i("div",{staticClass:"nav_title"},[i("div",{class:{colorSize:t.typeShow,size:!0},on:{click:function(e){return t.typeClick(1)}}},[t._v("看下级行")]),t._v(" "),i("div",{class:{colorSize:!t.typeShow,size:!0},on:{click:function(e){return t.typeClick(2)}}},[t._v("看网点")])]),t._v(" "),i("div",{staticClass:"title"},[i("div",{staticStyle:{"margin-right":"30px","line-height":"32px",display:"flex"}},[t._v("总计：\n        "),i("div",{staticStyle:{"min-width":"25px","margin-right":"5px","text-align":"center"}},[i("span",{staticClass:"colorSize"},[t._v(t._s(t.count_num))])]),t._v(t._s(t.msg.Company)+"\n      ")]),t._v(" "),i("el-pagination",{attrs:{small:"",background:"",layout:"prev, pager, next",total:t.totalRow},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),i("div",{staticStyle:{width:"100%","margin-top":"15px"}},t._l(t.tableData,function(e,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"8px"}},[i("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between","font-size":"12px"}},[i("div",[t._v(" "+t._s(t.queryParam.currentPage>1?10*(t.queryParam.currentPage-1)+a+1:a+1)+" 　\n            "),t.msg.type?i("span",[t._v(t._s(e.bmi_mer_name)+"(")]):t._e(),t._v(t._s(e.company_name)),t.msg.type?i("span",[t._v(")")]):t._e()]),t._v(" "),i("div",[t._v(t._s("元"==t.msg.Company?e.count_num.toFixed(2):e.count_num))])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"10px","background-color":"rgb(215, 215, 215)"}},[i("div",{style:{width:("0"==e.count_num?0:e.count_num/t.count*100)+"%","background-color":"#00bfbf",height:"10px"}})])])}),0)]):i("el-card",{staticClass:"box2"},[i("div",{staticClass:"nav_bar"},[i("div",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.msg.name))]),t._v(" "),i("div",{staticClass:"box_1",staticStyle:{color:"rgb(66, 189, 243)",cursor:"pointer"}},[t._v("注释\n        "),i("div",{staticClass:"box_2"},[i("div",[t._v(t._s(t.msg.notes))])])])]),t._v(" "),i("div",{staticStyle:{display:"flex","margin-top":"15px"}},[i("el-date-picker",{staticClass:"dataInput",attrs:{type:"datetimerange","picker-options":t.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v(" "),i("div",[i("el-button",{staticStyle:{height:"25px","line-height":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.query_name(1)}}},[t._v("查询\n        ")])],1)],1),t._v(" "),t.msg.type?i("div",{staticStyle:{display:"flex","margin-top":"15px","font-size":"12px"}},[i("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:t.changeClick},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return i("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}})}),1)],1):i("div",{staticClass:"nav_title"},[i("div",{class:{colorSize:t.typeShow,size:!0},on:{click:function(e){return t.typeClick(1)}}},[t._v("看下级行")]),t._v(" "),i("div",{class:{colorSize:!t.typeShow,size:!0},on:{click:function(e){return t.typeClick(2)}}},[t._v("看网点")])]),t._v(" "),i("div",{staticClass:"title"},[i("div",{staticStyle:{"margin-right":"30px","line-height":"32px",display:"flex"}},[t._v("总计：\n        "),i("div",{staticStyle:{"min-width":"25px","margin-right":"5px","text-align":"center"}},[i("span",{staticClass:"colorSize"},[t._v(t._s(t.count_num))])]),t._v(t._s(t.msg.Company)+"\n      ")]),t._v(" "),i("div",{staticStyle:{"text-align":"left"}},[i("el-pagination",{attrs:{small:"",background:"",layout:"prev, pager, next",total:t.totalRow},on:{"current-change":t.handleCurrentChange}})],1)]),t._v(" "),i("div",{staticStyle:{width:"100%","margin-top":"15px"}},t._l(t.tableData,function(e,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"8px"}},[i("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between","font-size":"12px"}},[i("div",[t._v(" "+t._s(t.queryParam.currentPage>1?10*(t.queryParam.currentPage-1)+a+1:a+1)+" 　\n            "),t.msg.type?i("span",[t._v(t._s(e.bmi_mer_name)+"(")]):t._e(),t._v(t._s(e.company_name)),t.msg.type?i("span",[t._v(")")]):t._e()]),t._v(" "),i("div",[t._v(t._s("元"==t.msg.Company?e.count_num.toFixed(2):e.count_num))])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"10px","background-color":"rgb(215, 215, 215)"}},[i("div",{style:{width:("0"==e.count_num?0:e.count_num/t.count*100)+"%","background-color":"#00bfbf",height:"10px"}})])])}),0)])],1)},staticRenderFns:[]};var r=i("VU/8")(c,l,!1,function(t){i("YhqH")},"data-v-b4581220",null);e.default=r.exports},YhqH:function(t,e){}});
//# sourceMappingURL=38.113f73207f1c8d303028.js.map